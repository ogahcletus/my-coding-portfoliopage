"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6139],{49197:function(e,t,n){n.d(t,{G:function(){return y},Z:function(){return Z}});var r=n(26042),i=n(69396),a=n(10253),o=n(35944),l=(n(67294),n(70917)),s=n(90317),c=n(69346),u=n(27843),d=n(81255),f=n(86292),p=n(44044),h=n(29163),v=n(61756),m=n(93160),g=n(81456),w=n(1144),b=n(49412),y=(0,l.iv)([p.gU.filled,d.l0.p(8),{width:"auto",height:"auto"}]);function Z(e){var t=e.repl,n=e.currentUser,l=e.surface,p=void 0===l||l,Z=(0,a.Z)((0,s.lUA)(),2),x=Z[0],k=Z[1].loading,R=(0,o.BX)(o.HY,{children:[(null===n||void 0===n?void 0:n.isVerified)&&(0,o.tZ)(v.zx,{css:[p&&y],disabled:k,onClick:function(){t.currentUserDidLike||(0,f.j)(f.U3.REACTED_TO_REPL,{replView:"https://replit.com"+t.url,reaction:"heart",isReplTalk:!1,item:"repl",isCommunityPublish:t.wasPosted,isAppPublish:t.wasPublished}),x({variables:{input:{replId:t.id}},optimisticResponse:{toggleReplLike:(0,i.Z)((0,r.Z)({},t),{likeCount:Math.max(0,t.likeCount+(t.currentUserDidLike?-1:1)),currentUserDidLike:!t.currentUserDidLike})}})},iconLeft:t.currentUserDidLike?(0,o.tZ)(b.Z,{}):(0,o.tZ)(u.Z,{}),text:t.likeCount>0?(0,g.d)(t.likeCount):"Like"}),n&&!n.isVerified&&(0,o.BX)(c.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,o.tZ)(h.Z,{alt:"Verify your email to like",css:p&&y,disabled:!0,children:(0,o.tZ)(u.Z,{})}),(0,o.tZ)(w.x,{color:"dimmer",children:(0,g.d)(t.likeCount)})]}),!n&&(0,o.BX)(c.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,o.tZ)(h.Z,{alt:"Log in to like",css:p&&y,disabled:!0,children:(0,o.tZ)(u.Z,{})}),(0,o.tZ)(w.x,{color:"dimmer",children:(0,g.d)(t.likeCount)})]})]});return p?(0,o.tZ)(m.Z,{background:"default",css:[d.l0.borderRadius(8)],children:R}):(0,o.tZ)(c.Z,{children:R})}},96139:function(e,t,n){n.d(t,{Z:function(){return $e}});var r=n(14924),i=n(26042),a=n(10253),o=n(35944),l=n(67294),s=n(90317),c=n(93160),u=n(81255),d=n(69346),f=n(61756),p=n(51995),h=n(1144),v=n(41307),m=n(22862),g=n(25602),w=n(18962),b=n(48920),y=n(45528),Z=n(47568),x=n(34051),k=n.n(x),R=n(92876),S=n(11163),E=n.n(S),C=n(66223),N=n(5783),F=n(52867),L=n(64926),I=n(99336),D=n(39791),B=n(59916),P=n(25108);var T=n(86292),U=n(753),_=n(65456),A=".lesson/lessonplan.md";function O(e){var t=e.fs,n=e.container,r=e.dotReplit,i=e.skip,o=e.preferredFile,s=(0,a.Z)(l.useState(null),2),c=s[0],u=s[1],d=function(e){var t,n=(0,a.Z)(l.useState(null===(t=e.getContext())||void 0===t?void 0:t.repl.id),2),r=n[0],i=n[1];return l.useEffect((function(){return e.onConnectionStateChanged((function(t){var n;t===N.e.CONNECTING&&i(null===(n=e.getContext())||void 0===n?void 0:n.repl.id)}))}),[e]),r}(n);return l.useEffect((function(){if(!i&&d){var e=!1;return Promise.all([(0,U.W)({replId:d,dotReplit:r,fs:t}),"LessonPlan"===(null===o||void 0===o?void 0:o.type)?t.stat(A):null,"FilePath"===(null===o||void 0===o?void 0:o.type)?t.stat(o.path):null]).then((function(t){var n=(0,a.Z)(t,3),r=n[0],i=r.entrypoint,l=r.readmeFile,s=n[1],c=n[2];e||("LessonPlan"===(null===o||void 0===o?void 0:o.type)&&s&&s.exists&&s.type===_.Tv.File?u(A):"FilePath"===(null===o||void 0===o?void 0:o.type)&&c&&c.exists&&c.type===_.Tv.File?u(o.path):"Readme"===(null===o||void 0===o?void 0:o.type)&&l?u(l):i&&u(i))})),function(){e=!0}}}),[t,r,d,i,o]),c}var j,V=n(90123);function z(e){var t,n,r=e.currentUser,i=e.repl,o=e.initialViewMode,c=e.enableDeeplinks,u=(0,a.Z)(l.useState(""),2),d=u[0],f=u[1],p=(0,l.useState)(w.e.DISCONNECTED),h=p[0],v=p[1],m=(0,l.useState)(b.A.OFFLINE),x=m[0],S=m[1],U=(0,l.useState)((function(){return function(e){var t=e.setBsodSentryEventId,n=(0,N.Z)({onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))E().push("/home","~/");else{P.error(e),R.Tb(e);var n=(0,I.ZP)(e,{tags:{replviewer:"true"}});t(n)}}}),r=(0,C.Z)({container:n}),i=(0,B.Z)({container:n,fs:r}),a=(0,L.Z)({container:n,dotReplit:i}),o=(0,F.Z)({container:n,mode:"shellrunner",beforeRun:(0,Z.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.Z)(n,i);case 2:if(!e.sent){e.next=5;break}return e.next=5,a.installPackages();case 5:case"end":return e.stop()}}),e)})))});return{container:n,fs:r,runner:o,dotReplit:i,packager:a}}({setBsodSentryEventId:f})})),_=U[0],A=_.container,z=_.fs,X=_.dotReplit,H=_.runner,G=_.packager,M=(0,l.useRef)((0,g.u9)()),W=(null===(t=i.replViewSettings)||void 0===t?void 0:t.defaultView)===s.dZH.ReplFile&&i.replViewSettings.replFile?i.replViewSettings.replFile:void 0,K={type:"Readme"};i.isProject?K={type:"LessonPlan"}:W&&(K={type:"FilePath",path:W});var q=(null===(n=i.replViewSettings)||void 0===n?void 0:n.defaultView)!==s.dZH.ReplImage&&(i.publishedAs===s.O2h.Template||i.isProject),J=(0,l.useState)((function(){return o===j.Code||M.current||W||q?{type:"code",fs:z,container:A,dotReplit:X}:null})),Q=J[0],Y=J[1],$=(0,l.useState)(M.current),ee=$[0],te=$[1],ne=(0,a.Z)(l.useState(null),2),re=ne[0],ie=ne[1],ae=Boolean("code"===(null===Q||void 0===Q?void 0:Q.type)&&!Q.deeplink&&!M.current),oe=O({fs:z,dotReplit:X,container:A,preferredFile:K,skip:!ae});(0,V.Z)({fs:z,currentDeeplink:"code"===(null===Q||void 0===Q?void 0:Q.type)?Q.deeplink:void 0,onChange:function(e){Y(e?{deeplink:e,type:"code",container:A,fs:z,dotReplit:X}:null)},enabled:c});var le=(0,a.Z)((0,s.yo9)({variables:{replId:i.id}}),1)[0];(0,l.useEffect)((function(){if((0,g.u9)()){var e=!1;return(0,g.mv)(z).then((function(t){var n=t.path,r=t.line,i=t.col;e||n&&Y({type:"code",container:A,fs:z,dotReplit:X,deeplink:{path:n,line:r,col:i}})})),function(){e=!0}}}),[A,z,X]),(0,l.useEffect)((function(){ae&&oe&&Y({type:"code",container:A,fs:z,dotReplit:X,deeplink:{path:oe}})}),[ae,oe,A,z,X]),(0,l.useEffect)((function(){re&&Y("server"!==re?{type:"vnc",container:A,fs:z}:{type:"server",previewUrl:i.previewUrl})}),[A,z,re,i.previewUrl]),(0,l.useEffect)((function(){h!==w.e.CONNECTED&&ie(null)}),[h]);var se=(0,y.b)({repl:i,currentUser:r}),ce=function(e){return!!["html","web_project","kaboom"].includes(e.lang.id)||Boolean(e.config.isServer)}(i),ue=ee||Boolean(Q&&("code"===Q.type||"vnc"===Q.type||"replboxDisplay"===Q.type||"terminal"===Q.type));(0,l.useEffect)((function(){if(ue&&A.getConnectionState()===w.e.DISCONNECTED){A.connect({context:se});var e=ce?[A.close]:[H.onStateChanged(S),A.onConnectionStateChanged(v),A.onPortOpened((function(e){var t=e.isVnc;ie(t?"vnc":"server")})),A.close];return function(){e.forEach((function(e){return e()}))}}}),[ue,A,H,se,ce]);var de=(0,l.useRef)(!1);return(0,l.useEffect)((function(){x===b.A.IDLE&&de.current&&(de.current=!1,"terminal"===(null===Q||void 0===Q?void 0:Q.type)&&H.run())}),[x,Q,H]),{fs:z,openFile:function(e){"server"!==(null===Q||void 0===Q?void 0:Q.type)&&"replboxDisplay"!==(null===Q||void 0===Q?void 0:Q.type)||S(b.A.IDLE),Y({type:"code",container:A,fs:z,deeplink:{path:e},dotReplit:X}),H.getRunState()===b.A.RUNNING&&H.stopRun()},viewState:Q,runRepl:function(){if(te(!1),r&&le(),(0,T.j)(T.U3.REACTED_TO_REPL,{replView:"https://replit.com"+i.url,reaction:"repl_ran",isReplTalk:!1,item:"repl",isCommunityPublish:i.wasPosted,isAppPublish:i.wasPublished}),ce){var e,t,n=(null===(e=i.deployment)||void 0===e||null===(t=e.activeRelease)||void 0===t?void 0:t.previewUrl)||i.previewUrl;return Y({type:"server",previewUrl:n}),void S(b.A.RUNNING)}return i.lang.canUseShellRunner?(Y("server"===re?{type:"server",previewUrl:i.previewUrl}:"vnc"===re?{type:"vnc",container:A,fs:z}:{type:"terminal",runner:H,packager:G}),H.getRunState()!==b.A.IDLE?void(de.current=!0):void H.run()):i.lang.hasReplboxWebview?(Y({type:"replboxDisplay",fs:z}),void S(b.A.RUNNING)):void Y({type:"deprecationNotice"})},stopRepl:function(){Y(null),te(!1),S(b.A.IDLE),ce||H.getRunState()===b.A.RUNNING&&H.stopRun()},runState:x,isFileTreeOpen:ee,setIsFileTreeOpen:te,didBsod:Boolean(d),showUrlOutput:ce,devClearBsod:function(){f("")}}}!function(e){e.Code="Code",e.Output="Output"}(j||(j={}));var X=n(24337),H=n(60536),G=n.n(H),M=n(48551),W=n(63872),K=n(58794),q=n(57263),J=q.j.tabletMin,Q=n(5152),Y=n.n(Q),$=n(2426),ee=n(23837),te=function(){var e=(0,Z.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(2738),n.e(4474)]).then(n.t.bind(n,74474,23)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=Y()(te,{ssr:!1,loading:function(){return null}});function re(e){var t=e.contents,n={scrollToContent:!0};try{n=(0,i.Z)({},n,JSON.parse(t||"{}"))}catch(a){}var r=(0,ee.Z)();return(0,o.BX)("div",{className:"jsx-f04e2237e6284377 excalidraw-wrapper",children:[(0,o.tZ)(ne,{viewModeEnabled:!0,zenModeEnabled:!0,initialData:n,theme:r===$.V2.replitLight?"light":"dark"}),(0,o.tZ)(G(),{id:"f04e2237e6284377",children:".excalidraw-wrapper.jsx-f04e2237e6284377{cursor:all-scroll;height:100%;width:100%}"})]})}var ie=n(34837),ae=n.n(ie),oe=n(28497);function le(e){var t=e.contents,n=e.isKbmsprite,r=l.useRef(null);return l.useEffect((function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var i=JSON.parse(t),a=ae()({canvas:e,data:n?(0,oe.C)(i):i,readonly:!0});return function(){a.cleanUp()}}}),[t,n]),(0,o.tZ)("canvas",{ref:r,className:"jsx-93826966b3fae22 pedit",children:(0,o.tZ)(G(),{id:"93826966b3fae22",children:".pedit.jsx-93826966b3fae22{width:100%;height:100%}"})})}var se=n(54568),ce=n(68928),ue=n(78244),de=n(77402),fe=n(66681);function pe(e){var t=e.fs,n=e.deeplink,r=null===n||void 0===n?void 0:n.path,i=(0,se.Z)({fs:t,path:r});return(0,o.BX)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" file-viewer",children:[(0,o.BX)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" content",children:[i.result&&i.result.fileViewerType===de.D.Media?(0,o.tZ)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" media",children:(0,o.tZ)(W.A,{content:K.Z.from(i.result.content).toString("base64"),mime:(0,M.yC)(i.result.path)})}):null,i.isLoading&&i.fileViewerType===de.D.Media?(0,o.tZ)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" file-loader",children:(0,o.tZ)(ce.Z,{})}):null,i.result&&i.result.fileViewerType===de.D.Markdown?(0,o.tZ)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" markdown",children:(0,o.tZ)(fe.Z,{path:i.result.path,source:i.result.content.toString(),fs:t,sourcePos:!1})}):null,i.isLoading&&i.fileViewerType===de.D.Markdown?(0,o.tZ)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" file-loader",children:(0,o.tZ)(ce.Z,{})}):null,i.result&&i.result.fileViewerType===de.D.Draw?(0,o.tZ)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" draw",children:(0,o.tZ)(re,{contents:i.result.content.toString()})}):null,i.isLoading&&i.fileViewerType===de.D.Draw?(0,o.tZ)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" file-loader",children:(0,o.tZ)(ce.Z,{})}):null,i.result&&i.result.fileViewerType===de.D.Code?(0,o.tZ)(ue.Z,{filePath:i.result.path,code:i.result.content.toString(),fontSize:14}):null,i.isLoading&&i.fileViewerType===de.D.Code?(0,o.tZ)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" file-loader",children:(0,o.tZ)(ce.Z,{})}):null,i.result&&i.result.fileViewerType===de.D.Pedit?(0,o.tZ)(le,{contents:i.result.content.toString(),isKbmsprite:!!(null===r||void 0===r?void 0:r.endsWith(".kbmsprite"))}):null,!i.isLoading&&i.error?(0,o.tZ)("div",{className:G().dynamic([["bfde0a756867257d",[J]]])+" error",children:(0,o.BX)("div",{className:G().dynamic([["bfde0a756867257d",[J]]]),children:["Could not load ",i.error.path]})}):null]}),(0,o.tZ)(G(),{id:"bfde0a756867257d",dynamic:[J],children:".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%}.markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--space-16);overflow-y:auto;position:relative;height:100%}.draw.__jsx-style-dynamic-selector{height:100%;width:100%}.file-tree.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);overflow:auto;display:none}.content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative}.file-loader.__jsx-style-dynamic-selector{width:100%;padding-top:var(--space-8);padding-left:var(--space-8);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn ease 0s forwards;-moz-animation:fadeIn ease 0s forwards;-o-animation:fadeIn ease 0s forwards;animation:fadeIn ease 0s forwards;-webkit-animation-delay:200ms;-moz-animation-delay:200ms;-o-animation-delay:200ms;animation-delay:200ms}.media.__jsx-style-dynamic-selector,.error.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@media screen and (min-width:".concat(J,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px}}")})]})}var he=n(65967),ve=n(61622),me=n(81456),ge=n(70240),we=n(12061),be=(0,d.K)("div");function ye(e){var t=e.replId,n=e.language,r=(0,a.Z)(l.useState((function(){return(0,ge.Z)({beforeRun:function(){return Promise.resolve()},getMainFileContents:function(){return(0,we.Z)({language:e.language,fs:e.fs})}})})),1)[0],i=l.useRef(null);return l.useEffect((function(){if(i.current){var e=!1;return r.load({replId:t,language:n,iframeParent:i.current}).then((function(){e||r.run()})),function(){e=!0,r.getRunState()!==b.A.OFFLINE&&r.destroy()}}}),[r,t,n]),(0,o.tZ)(be,{ref:i,css:[u.l0.width("100%"),u.l0.height("100%"),{backgroundColor:"white",borderBottomRightRadius:8,borderBottomLeftRadius:8,iframe:[u.l0.width("100%"),u.l0.height("100%"),{display:"block",utline:"none",border:"none",borderBottomRightRadius:8,borderBottomLeftRadius:8}]}]})}var Ze=n(31066),xe=n(93921),ke=n(92098),Re=n(55601),Se=n(70917),Ee=n(46609),Ce=n(7469),Ne=n(38935);function Fe(e){var t=e.fs,n=e.language,r=e.setActivePath,i=e.activePath,s=e.onNodeClick,c=(0,Ce.Z)({fs:t}),f=c.dirInfo,p=c.setExpandedState,v=c.watchDir,m=(0,a.Z)(l.useState(!1),2),g=m[0],w=m[1];return(0,o.tZ)(Ee.i.Provider,{value:{activePath:i,setActivePath:r,downloadFile:function(){},fs:t,transformChildren:(0,Re.Z)({language:n,shouldHideHiddenFiles:!g}),setPendingFileType:function(){},uploadFiles:function(){},pendingFileType:null,getNodeType:function(){var e=(0,Z.Z)(k().mark((function e(n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readFile(n);case 2:return r=e.sent,e.abrupt("return",r.error===_.Df.IsDirectory?_.Tv.Directory:_.Tv.File);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pendingUploads:[],currentRenamePath:null,setCurrentRenamePath:function(){},pendingDelete:null,setPendingDelete:function(){},overwriteNode:function(){},renameNode:function(){},deleteNode:function(){},duplicateFile:(0,Z.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),currentOp:null,nodeOpError:null,dirInfo:f,setExpandedState:p,watchDir:v},children:(0,o.tZ)(ke.Z,{children:(0,o.BX)(d.Z,{css:[u.l0.flex.column,u.l0.p(8),(0,Se.iv)({overflow:"auto",height:"100%"})],children:[(0,o.BX)(d.Z,{css:[u.l0.rowWithGap(4),u.l0.p(8),u.l0.justify.spaceBetween],children:[(0,o.tZ)(h.h,{level:3,variant:"subheadDefault",children:"Files"}),(0,o.tZ)(Ne.Z,{actions:[g?Ne.s.HideHiddenFiles:Ne.s.ShowHiddenFiles],onAction:function(e){switch(e){case Ne.s.ShowHiddenFiles:return void w(!0);case Ne.s.HideHiddenFiles:w(!1)}}})]}),(0,o.tZ)(xe.Z,{siblings:[],readOnly:!0,onClick:function(){return null},onNodeClick:s,path:Ze.Ql})]})})})}var Le=n(46702),Ie=n(96189),De=n(49197),Be=n(26451),Pe=n(29163),Te=n(98511),Ue=n(86127),_e=n(89295),Ae=n(94860),Oe=n(93058);function je(){return Boolean(function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullscreenElement}())}var Ve=n(62794),ze=n(10164),Xe=n(83241),He="1px solid "+u.TV.outlineDimmer;function Ge(e){var t=e.children;return(0,o.tZ)(d.Z,{tag:"header",css:[{borderBottom:He},u.l0.p(8),u.l0.rowWithGap(8),u.l0.align.center],children:t})}var Me=(0,d.K)("a");function We(e){var t=e.runCount,n=e.runState,r=e.onClick,a=e.publishedAs,l=n===b.A.RUNNING?(0,o.tZ)(he.Z,{fill:"currentColor"}):(0,o.tZ)(p.Z,{fill:"currentColor"}),c=a===s.O2h.Template?"Run example":"Run";return n===b.A.RUNNING&&(c="Stop"),(0,o.tZ)(d.Z,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:(0,o.tZ)(f.ZP,(0,i.Z)({colorway:n===b.A.RUNNING||a===s.O2h.Template?void 0:"positive",onClick:r,iconLeft:l,text:c},t>0&&{secondaryText:(0,me.d)(t)}))})}function Ke(e){var t=e.innerRef,n=e.children;return(0,o.tZ)(c.Z,{elevated:!0,css:[{border:He},u.l0.borderRadius(8)],innerRef:t,children:n})}function qe(e){var t=e.src;return(0,o.tZ)(d.Z,{css:[u.l0.width("100%"),u.l0.height("100%")],children:(0,o.tZ)(d.Z,(0,i.Z)({tag:"iframe",src:t,css:[u.l0.width("100%"),u.l0.height("100%"),{borderBottomRightRadius:8,borderBottomLeftRadius:8,position:"absolute",backgroundColor:"white",display:"block",border:"none",top:0,left:0}]},Xe.Z))})}function Je(e){var t=e.fs,n=e.isOpen,r=e.language,i=e.activePath,a=e.setActivePath,l=e.onNodeClick;return(0,o.tZ)(d.Z,{css:[{zIndex:101,position:"absolute",top:0,left:0,height:"100%",overflow:"hidden",borderBottomLeftRadius:8},!n&&{pointerEvents:"none"}],children:(0,o.tZ)(c.Z,{elevated:!0,css:[{height:"100%",width:200,transition:"transform ".concat(160,"ms"),transform:"translateX(".concat(n?0:-200,"px)")}],children:(0,o.tZ)(Fe,{fs:t,language:r,activePath:i,setActivePath:a,onNodeClick:l})})})}var Qe=(0,d.K)("div");function Ye(e){var t,n=e.repl,i=e.currentUser,s=e.enableDeeplinks,p=e.isFromProfile,g=z({enableDeeplinks:Boolean(s),repl:n,currentUser:i}),w=g.openFile,y=g.viewState,Z=g.fs,x=g.runRepl,k=g.stopRepl,R=g.runState,S=g.didBsod,E=g.devClearBsod,C=g.isFileTreeOpen,N=g.setIsFileTreeOpen,F=g.showUrlOutput,L=l.useRef(null),I=(0,Oe.Z)().showNotice,D=(0,l.useState)(!1),B=D[0],P=D[1],U=function(){var e=(0,a.Z)(l.useState(je()),2),t=e[0],n=e[1];return l.useEffect((function(){var e=function(){n(je())};return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}})),t}(),A=(0,Ie.Z)((function(e){void 0!==e.width&&P(e.width<=500)})),O=(0,a.Z)(l.useState("code"===(null===y||void 0===y?void 0:y.type)&&y.deeplink?null===(t=y.deeplink)||void 0===t?void 0:t.path:null),2),j=O[0],V=O[1];return S?(0,o.tZ)(m.Z,{devHide:E}):(0,o.BX)(Ke,{innerRef:L,children:[(0,o.BX)(Ge,{children:[(0,o.BX)(d.Z,{css:[u.l0.flex.growAndShrink(1),u.l0.rowWithGap(8)],children:[(0,o.BX)(d.Z,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[(0,o.tZ)(f.ZP,{iconLeft:(0,o.tZ)(Be.Z,{}),text:C?"Hide files":"Show files",onClick:function(){return N((function(e){return!e}))},css:(0,r.Z)({},"@media (max-width: ".concat(q.j.mobileMax,"px)"),{display:"none"})}),(0,o.tZ)(c.Z,{background:"default",css:[u.l0.borderRadius(8),(0,r.Z)({},"@media (min-width: ".concat(q.j.mobileMax+1,"px)"),{display:"none"})],children:(0,o.tZ)(Pe.Z,{css:De.G,alt:C?"Hide files":"Show files",onClick:function(){return N((function(e){return!e}))},children:(0,o.tZ)(Be.Z,{})})})]}),F||"server"===(null===y||void 0===y?void 0:y.type)?(0,o.tZ)(d.Z,{css:[u.l0.center,{borderLeft:"1px solid "+u.TV.outlineDimmest}],children:(0,o.BX)(Me,{css:[u.l0.rowWithGap(4),u.l0.color.foregroundDimmer,u.l0.px(8)],href:n.prodUrl,target:"_blank",children:[(0,o.tZ)(Le.Z,{}),(0,o.tZ)(h.x,{children:(0,o.tZ)("span",{css:(0,r.Z)({},"@media (max-width: ".concat(q.j.mobileMax+20,"px)"),{display:"none"}),children:"Open website"})})]})}):null]}),(0,o.BX)(d.Z,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[L.current&&document.fullscreenEnabled&&(0,o.tZ)(Pe.Z,{alt:U?"Exit fullscreen":"Enter fullscreen",css:De.G,onClick:function(){var e=L.current;e?U?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozExitFullScreen?e.mozExitFullScreen():e.webkitExitFullScreen&&e.webkitExitFullScreen()}():(!function(e){var t=e;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}(e),(0,T.j)(T.U3.REPL_VIEWER_FULLSCREEN_ENTERED,{location:p?"profile":"coverpage"})):I("Failed to enter fullscreen mode")},children:U?(0,o.tZ)(Ae.Z,{}):(0,o.tZ)(_e.Z,{})}),(0,o.tZ)(De.Z,{repl:n,currentUser:i}),(0,o.tZ)(We,{runCount:n.runCount,runState:R,publishedAs:n.publishedAs,onClick:function(){if(R===b.A.IDLE||R===b.A.OFFLINE)return(0,T.j)(T.U3.RUN_BUTTON_CLICKED,{context:"replView"}),void x();R===b.A.RUNNING&&k()}})]})]}),(0,o.BX)(Qe,{ref:function(e){A(e)},css:[u.l0.flex.growAndShrink(1),{position:"relative"}],children:[null===y?(0,o.tZ)(v.Z,{repl:n,onClick:x}):null,"server"===(null===y||void 0===y?void 0:y.type)?(0,o.tZ)(qe,{src:y.previewUrl}):null,"vnc"===(null===y||void 0===y?void 0:y.type)?(0,o.tZ)(X.Z,{fs:y.fs,container:y.container}):null,"replboxDisplay"===(null===y||void 0===y?void 0:y.type)?(0,o.tZ)(ye,{replId:n.id,language:n.language,fs:y.fs}):null,"deprecationNotice"===(null===y||void 0===y?void 0:y.type)?(0,o.BX)(d.Z,{css:[u.l0.center,u.l0.p(16),u.l0.height("100%")],children:[(0,o.BX)(h.x,{multiline:!0,variant:"subheadDefault",children:['Running "',n.lang.displayName,'" is no longer supported.'," "]}),(0,o.tZ)(Ve.Z,{feature:ze.l.General})]}):null,"terminal"===(null===y||void 0===y?void 0:y.type)?(0,o.tZ)(d.Z,{css:[u.l0.height("100%"),u.l0.width("100%"),u.l0.position.relative,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8}],children:(0,o.tZ)(ve.Z,{packager:y.packager,runner:y.runner,languageHeader:n.lang.header||void 0})}):null,"code"===(null===y||void 0===y?void 0:y.type)?(0,o.tZ)(d.Z,{css:[u.l0.height("100%"),u.l0.flex.growAndShrink(1),{position:"relative",overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,transition:"margin ".concat(160,"ms"),marginLeft:C&&!B?200:0}],onClick:function(){B&&N(!1)},children:(0,o.tZ)(pe,{fs:y.fs,deeplink:y.deeplink})}):null,(0,o.tZ)(Je,{isOpen:C,language:n.lang.id,activePath:j,onNodeClick:function(e){V(e.path),e.type!==_.Tv.Directory&&(w(e.path),B&&N(!1))},setActivePath:V,fs:Z})]})]})}function $e(e){var t=e.repl,n=e.currentUser,r=e.enableDeeplinks,i=e.isFromProfile,a=(0,l.useState)(!1),s=a[0],c=a[1];return(0,l.useEffect)((function(){return c(!0)}),[]),(0,l.useEffect)(Ue.S,[]),s?(0,o.tZ)(Te.Z.Provider,{value:t.id,children:(0,o.tZ)(Ye,{isFromProfile:i,repl:t,currentUser:n,enableDeeplinks:r})}):(0,o.tZ)(Ke,{})}},90123:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(47568),i=n(34051),a=n.n(i),o=n(67294),l=n(11163),s=n.n(l),c=n(25602);function u(e){var t=e.currentDeeplink,n=e.onChange,i=e.fs,l=e.enabled,u=(0,o.useRef)(!1);(0,o.useEffect)((function(){if(l){var e=function(){var e=(0,r.Z)(a().mark((function e(){var t,r,o,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,c.mv)(i);case 4:if(t=e.sent,r=t.path,o=t.line,l=t.col,r){e.next=11;break}return n(null),e.abrupt("return");case 11:n({path:r,line:o,col:l});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[i,n,l]),(0,o.useEffect)((function(){if(l&&t){var e=(0,c.YM)(t),n=s().asPath;try{n=window.decodeURI(n)}catch(i){}if(!n.endsWith(e)){var r=s().asPath.includes("#")?s().asPath.slice(0,s().asPath.indexOf("#")):s().asPath;u.current=!0,s().push({pathname:s().pathname,query:s().query},"".concat(r).concat(e),{shallow:!0}),u.current=!1}}}),[i,t,l])}},54568:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(26042),i=n(10253),a=n(67294),o=n(77402);function l(e,t){return(0,r.Z)({},e,t)}var s={isLoading:!1,result:null,error:null,fileViewerType:null};function c(e){var t=e.fs,n=e.path,r=(0,i.Z)(a.useReducer(l,s),2),c=r[0],u=r[1];return a.useEffect((function(){if(n){var e=!1,r=(0,o.V)(n);return u({isLoading:!0,fileViewerType:r}),t.readFile(n).then((function(t){e||(t.error?u({isLoading:!1,result:null,error:{path:n,fileViewerType:r,error:t.error}}):u({isLoading:!1,result:{path:n,fileViewerType:r,content:t.content},error:null}))})),function(){e=!0}}u(s)}),[t,n]),c}},61622:function(e,t,n){n.d(t,{Z:function(){return L}});var r,i=n(10253),a=n(35944),o=n(60536),l=n.n(o),s=n(67294),c=n(60731),u=n(10129),d=n(19526),f=n(70917),p=n(50055),h=n(10449),v=n(48920);function m(e,t){var n,i;switch(e){case r.Init:n="5%",i="Loading...";break;case r.Booting:i="Booting Repl",n="20%";break;case r.LoadingFiles:i="Downloading files",n="".concat(Math.floor(20+70*t).toString(),"%");break;case r.Ready:i="Ready",n="100%";break;default:(0,h.Z)(e)}return{percentString:n,message:i}}!function(e){e.Init="Init",e.Booting="Booting",e.LoadingFiles="LoadingFiles",e.Ready="Ready"}(r||(r={}));var g=(0,f.F4)({"0%":{opacity:0,top:0},"100%":{opacity:1,top:"-25px"}});function w(e){var t=e.onBootStatus,n=e.initialRunState,i=(0,s.useState)({current:n===v.A.OFFLINE?r.Init:r.Ready,previous:null}),o=i[0],l=i[1],c=(0,s.useState)(0),u=c[0],d=c[1];(0,s.useEffect)((function(){var e=0,n=0,i=null,a=null,o=function(){e=0,n=0,i=null,a&&(clearInterval(a),a=null)},s=t((function(t){var s;switch(function(t){var r=t.stage,l=t.progress,s=t.total;if(a&&clearInterval(a),r!==p.api.BootStatus.Stage.PULL_FILES&&r!==p.api.BootStatus.Stage.LOAD_BLOCK||!s)return o(),void d(0);if(!(e>l)&&n!==l){var c=Date.now(),u=0;u=i?(l-n)/(c-i)*50:5e4,i=c,n=l,a=setInterval((function(){(e+=u)>s&&(e=s),e=Math.max(e,l),d(e/s)}),50)}}(t),t.stage){case p.api.BootStatus.Stage.ACQUIRING:s=r.Booting;break;case p.api.BootStatus.Stage.PULL_FILES:case p.api.BootStatus.Stage.LOAD_BLOCK:s=r.LoadingFiles;break;case p.api.BootStatus.Stage.COMPLETE:s=r.Ready;break;default:return}l((function(e){return e.current===s?e:{current:s,previous:e.current}}))}));return function(){o(),s()}}),[t]);var f=o.previous?m(o.previous,1):null,h=m(o.current,u);return(0,a.BX)("div",{css:{position:"absolute",left:"25%",right:"25%",top:"45%",backgroundColor:"transparent",color:"white",transition:"all 1s 0.5s",opacity:o.current===r.Ready?0:1},children:[(0,a.BX)("div",{children:[f&&(0,a.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-100px",opacity:0,transition:"top 0.4s, opacity 0.4s"},children:[f.message,o.previous===r.LoadingFiles&&" 100%"]},f.message),(0,a.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-25px",opacity:1,animationName:g.toString(),animationDuration:"0.6s"},children:[h.message,o.current===r.LoadingFiles&&" ".concat(h.percentString)]},h.message)]}),(0,a.tZ)("div",{css:{background:"none",border:"solid white 1px",borderRadius:"10px"},children:(0,a.tZ)("div",{css:{height:"5px",width:h.percentString,backgroundColor:"#fff",transition:"width cubic-bezier(0.28, 0.26, 0.33, 1) 2s"}})})]})}var b=n(99382),y=n(72064);var Z=n(29672),x=n(91202),k=n(48386),R=n(23329),S=n(43804),E=n(34140),C=n(51748),N=n(23723),F=function(e,t){var n=e.runner,r=e.packager,o=e.languageHeader,f=e.onClear,p=e.enableScreenReaderMode,h=e.onBootStatus,m=(0,C.Z)().preferences.accessibleTerminal,g=(0,i.Z)(function(e){var t=e.runner,n=e.packager,r=e.languageHeader,a=e.enableScreenReaderMode,o=(0,i.Z)((0,b.Z)({createXtermProps:{enableScreenReaderMode:a}}),2),l=o[0],c=o[1],u=(0,s.useState)(""),d=u[0],f=u[1];return(0,s.useEffect)((function(){if(!l)return t.onOutput((function(e){return f((function(t){return t+e}))}))}),[l,t,f]),(0,s.useEffect)((function(){if(!l&&n)return n.onOutput((function(e){return f((function(t){return t+e.replace(/\n/g,"\n\r")}))}))}),[l,n,f]),(0,s.useEffect)((function(){var e=function(e){if(!l)throw new Error("Expected xterm");l.write(e.replace(/\n/g,"\n\r"))};if(l&&n){var t=n.onOutput((function(t){e(t)})),r=n.onError((function(){return e("\x1b[31m\n\nReplit: Package operation failed.\x1b[00m")})),i=n.onStateChanged((function(t){t&&e("\n\nReplit: Updating package configuration\n\n")}));return function(){t(),r(),i()}}}),[l,n]),(0,s.useEffect)((function(){d&&l&&(l.write(d),f(""))}),[l,d]),(0,s.useEffect)((function(){r&&f((function(e){return e+"".concat(r.replace(/\n/g,"\n\r"),"\n\r")}))}),[r,f]),(0,s.useEffect)((function(){if(l){var e=function(){t.getRunState()!==v.A.OFFLINE&&t.resizeTerminal(l.getSize())},n=[];n.push(l.onResize(e).dispose);var r=[];n.push(l.onData((function(e){var n=(0,y.I)(e);t.getRunState()!==v.A.OFFLINE?t.sendInput(n):r.push(n)})).dispose),n.push(t.onOutput((function(e){l.write(e)})));var i=!1;return n.push(t.onStateChanged((function(n){if(n!==v.A.OFFLINE){if(i||(e(),i=!0),r.length){var a=!0,o=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;t.sendInput(u)}}catch(d){o=!0,l=d}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}r=[]}}else i=!1}))),t.getRunState()!==v.A.OFFLINE&&(e(),i=!0),function(){n.forEach((function(e){return e()}))}}}),[l,t]),[l,c,f]}({runner:n,packager:r,languageHeader:o,enableScreenReaderMode:p}),3),F=g[0],L=g[1],I=g[2],D=(0,i.Z)(s.useState(!1),2),B=D[0],P=D[1],T=(0,N.a)();s.useImperativeHandle(t,(function(){return{write:function(e){F?F.write(e):I((function(t){return t+e.replace(/\n/g,"\n\r")}))},clear:function(){F&&F.clear()},focus:function(){F&&F.focus()}}}));var U=(0,R.Z)(S.H.Output);return(0,a.BX)("div",{css:T,onKeyDown:function(e){"f"===e.key&&(0,u.j)(e)&&!e.shiftKey&&(P(!0),e.preventDefault())},ref:U,className:l().dynamic([["5b265e2ffc6fb3a7",[c.TV.borderRadius4]]])+" terminal",children:[(0,a.tZ)("div",{className:l().dynamic([["5b265e2ffc6fb3a7",[c.TV.borderRadius4]]])+" controls",children:(0,a.BX)(d.Ug,{align:"center",wrap:"nowrap",children:[B&&F?(0,a.tZ)(Z.R,{findPrevious:F.findPrevious,findNext:F.findNext,exit:function(){return P(!1)}}):(0,a.tZ)(x.l,{onClick:function(){return P(!0)}}),(0,a.tZ)(k.Z,{onClick:function(){F&&(F.clear(),f&&f(),o&&F.write("".concat(o.replace(/\n/g,"\n\r"),"\n\r")),F.focus())}})]})}),!(p||m)&&(0,a.tZ)(E.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the console.'}),(0,a.tZ)("div",{ref:L,className:l().dynamic([["5b265e2ffc6fb3a7",[c.TV.borderRadius4]]])+" xterm-container"}),h?(0,a.tZ)(w,{initialRunState:n.getRunState(),onBootStatus:h}):null,(0,a.tZ)(l(),{id:"5b265e2ffc6fb3a7",dynamic:[c.TV.borderRadius4],children:".terminal.__jsx-style-dynamic-selector{height:100%;width:100%;position:relative;background-color:var(--background-default);-webkit-border-radius:".concat(c.TV.borderRadius4,";-moz-border-radius:").concat(c.TV.borderRadius4,";border-radius:").concat(c.TV.borderRadius4,";padding-left:var(--space-16);padding-top:var(--space-4)}.controls.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:absolute;opacity:0;top:var(--space-8);right:var(--space-8);z-index:100;min-height:30px}.terminal.__jsx-style-dynamic-selector:focus-within .controls.__jsx-style-dynamic-selector{opacity:1}.xterm-container.__jsx-style-dynamic-selector{height:100%;overflow:auto}.xterm-container.__jsx-style-dynamic-selector .xterm{height:100%}.xterm-container.__jsx-style-dynamic-selector .xterm-viewport{overflow-y:auto!important;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}")})]})},L=s.forwardRef(F)},28497:function(e,t,n){function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()}))}}function i(e){return new Promise((function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n}))}function a(e){return new Promise((function(t,n){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var a=i.getContext("2d");if(a){var o=r.map((function(t){return a.drawImage(t,0,0),{pixels:Array.from(a.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));t({frames:o,preview:e.frames[0],width:e.width,height:e.height})}else n(new Error("failed to get canvas ctx"))})).catch(n)}))}n.d(t,{C:function(){return r},u:function(){return a}})}}]);
//# sourceMappingURL=6139-a86ea985528d53bf.js.map