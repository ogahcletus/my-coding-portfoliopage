"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9027],{58e3:function(e,n,t){t.d(n,{$:function(){return S},u:function(){return w}});var r=t(10253),i=t(35944),o=(t(67294),t(38137)),a=t(54011),s=t(24833),u=t(24888),c=t(3553),l=t(25424),f=t(19353),d=t(43463),p=t(18374),m=t(26404),v=t(2428),h=t(91674),E=t(60731),x=t(50119),b=t(41654),g=function(e){var n=new Map,t=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var u=(0,r.Z)(a.value,3),c=u[0],l=u[1],f=u[2];"string"===typeof l&&(l=x.s.get(l)),n.set(c,[l,null!==f&&void 0!==f?f:E.TV.foregroundDefault])}}catch(d){i=!0,o=d}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}return n}([[h.SymbolKind.Array,d.Z],[h.SymbolKind.Boolean,m.Z],[h.SymbolKind.Class,"class",E.TV.yellowDefault],[h.SymbolKind.Constant,"constant",E.TV.blueStronger],[h.SymbolKind.Constructor,"method",E.TV.blurpleDefault],[h.SymbolKind.Enum,s.Z,E.TV.orangeDefault],[h.SymbolKind.EnumMember,v.Z,E.TV.blueStronger],[h.SymbolKind.Event,o.Z],[h.SymbolKind.Field,p.Z],[h.SymbolKind.File,u.Z],[h.SymbolKind.Function,"function",E.TV.blurpleStronger],[h.SymbolKind.Interface,l.Z,E.TV.blueStronger],[h.SymbolKind.Key,f.Z],[h.SymbolKind.Method,"method",E.TV.blurpleDefault],[h.SymbolKind.Module,b.Package,E.TV.purpleDefault],[h.SymbolKind.Namespace,a.Z],[h.SymbolKind.Object,m.Z,E.TV.blueDimmer],[h.SymbolKind.Operator,m.Z],[h.SymbolKind.Package,b.Package,E.TV.purpleDefault],[h.SymbolKind.Property,p.Z],[h.SymbolKind.String,c.Z],[h.SymbolKind.Struct,a.Z],[h.SymbolKind.TypeParameter,v.Z],[h.SymbolKind.Variable,v.Z,E.TV.blueStronger]]),S=Array.from(g.keys());function w(e){var n,t=e.kind,o=(0,r.Z)(null!==(n=g.get(t))&&void 0!==n?n:[m.Z,E.TV.foregroundDefault],2),a=o[0],s=o[1];return(0,i.tZ)(a,{color:s,size:16})}},99027:function(e,n,t){t.d(n,{Z:function(){return We}});var r,i=t(47568),o=t(34051),a=t.n(o),s=t(5783),u=t(64926);!function(e){e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED"}(r||(r={}));var c=t(29815),l=t(50055),f=t(80437),d=Object.values(f.Z.multiplayer);function p(e){var n={};return d.forEach((function(e){n[e]=0})),e.forEach((function(e){n[e.color]++})),Object.keys(n).sort((function(e,t){return n[e]-n[t]}))[0]}function m(e){var n=e.sessions.sort((function(e,n){return e.timestamp-n.timestamp})),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.activeFile)return s.activeFile}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null}function v(e,n){var t=n.find((function(n){return n.sessions.some((function(n){return n.id===e}))}));if(!t)throw new Error("Expected user with session ID ".concat(e));return t}function h(e){var n=e.seconds,t=e.nanos;return Number(n||0)+(t||0)/1e9}var E=t(86292);var x=t(5133),b=t(48551),g=t(62991),S=t.n(g);function w(e){var n=e.container,t=function(e){S()(u,e)||(u=e,o.emit(r.FOLLOWED_USER_CHANGED,e))},o=(0,x.ZP)();o.setMaxListeners(1/0);var s=[],u=null,f=[],d={},g=null,w=window.performance.now();function y(){return D.apply(this,arguments)}function D(){return(D=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return",g);case 2:return e.abrupt("return",new Promise((function(e){o.once(r.USERS_UPDATE,(function(){if(!g)throw new Error("Expected presenceChannel to be set");e(g)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=(0,i.Z)(a().mark((function e(n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===u||void 0===u?void 0:u.username)!==n){e.next=2;break}throw new Error("Already following user with username ".concat(n));case 2:if(!u){e.next=5;break}return e.next=5,I();case 5:return e.next=7,y();case 7:if(r=e.sent,i=s.find((function(e){return e.username===n}))){e.next=11;break}return e.abrupt("return");case 11:t(i),i.sessions.forEach((function(e){r.send({followUser:{session:e.id}})})),w=window.performance.now(),(0,E.j)(E.U3.LOCAL_USER_CURSOR_FOLLOWED);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)(a().mark((function e(){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw new Error("No user to unfollow");case 2:return n=u,t(null),e.next=6,y();case 6:r=e.sent,n.sessions.forEach((function(e){r.send({unfollowUser:{session:e.id}})})),i=window.performance.now()-w,(0,E.j)(E.U3.LOCAL_USER_CURSOR_UNFOLLOWED,{sessionLength:i});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.openChannel({service:"presence",name:"presencer"},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("Expected channel");return n.onCommand((function(e){var n={cmd:e,emitter:o,activeUsers:s,userIdToFile:d,followedUser:u,setFollowedUser:t,followingUsers:f};switch(e.body){case"roster":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=e.followedUser,s=e.followingUsers,u=e.setFollowedUser,l=n.roster;if(l){var f=l.user,d=l.files;if(f&&d){var v=new Set;if(i.splice(0,i.length),f.forEach((function(e){if(e.id&&e.name&&e.roles&&!v.has(e.id)){var n=d.filter((function(n){return n.userId===e.id})).map((function(e){if(!e.session||!e.timestamp)throw new Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:h(e.timestamp)}}));i.push({id:e.id,username:e.name,roles:e.roles,color:p(i),sessions:n}),v.add(e.id)}})),i.forEach((function(e){o[e.id]=m(e)})),t.emit(r.USERS_UPDATE,(0,c.Z)(i)),i.length>1&&(0,E.j)(E.U3.MP2_USER_JOINED,{count:i.length}),s.filter((function(e){return!i.some((function(n){return n.id===e.id}))})).forEach((function(e){var n=s.indexOf(e);-1!==n&&(s.splice(n,1),t.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,c.Z)(s),user:e,type:"unfollow"}))})),a)if(i.some((function(e){return e.id===a.id}))){var x=o[a.id];t.emit(r.USER_OPENED_FILE,{user:a,file:x})}else u(null)}}}(n);break;case"join":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=n.join;if(a.id&&a.name&&a.roles&&a.session){var s=i.find((function(e){return e.id===a.id})),u=Math.floor(Date.now()/1e3),f=h(l.google.protobuf.Timestamp.create({seconds:u}));if(s)s.sessions.push({id:a.session,activeFile:null,timestamp:f});else{var d={id:a.id,username:a.name,roles:a.roles,color:p(i),sessions:[{id:a.session,activeFile:null,timestamp:f}]};o[a.id]=null,i.push(d),t.emit(r.USER_JOIN,d),t.emit(r.USERS_UPDATE,(0,c.Z)(i)),(0,E.j)(E.U3.MP2_USER_JOINED,{count:i.length})}}}(n);break;case"part":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=e.followedUser,s=e.followingUsers,u=e.setFollowedUser;if(n.part&&n.part.id&&n.part.session){var l=n.part,f=l.id,d=l.session,p=i.findIndex((function(e){return e.id===f})),v=i[p];if(1===v.sessions.length){i.splice(p,1),delete o[v.id],t.emit(r.USER_LEAVE,v),t.emit(r.USERS_UPDATE,(0,c.Z)(i)),a&&u(null);var h=s.findIndex((function(e){return e.id===v.id}));-1!==h&&(s.splice(h,1),t.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,c.Z)(s),user:v,type:"unfollow"}))}else{v.sessions=v.sessions.filter((function(e){return e.id!==d}));var E=m(v);o[v.id]!==E&&(o[v.id]=E,t.emit(r.USER_OPENED_FILE,{user:v,file:E}))}}}(n);break;case"fileOpened":!function(e){var n=e.emitter,t=e.cmd,i=e.activeUsers,o=e.userIdToFile;if(t.fileOpened){var a=t.fileOpened,s=a.userId,u=a.file,c=a.timestamp,l=a.session,f=u||null;if(!s||!c)throw new Error("Expected userId and timestamp associated with file opened command");var d=i.find((function(e){return e.id===s}));if(!d)throw new Error("Expected user with ID ".concat(s));var p=d.sessions.find((function(e){return e.id===l}));if(!p)throw new Error("Expected session with ID ".concat(p));p.activeFile=f,p.timestamp=h(c),o[s]=f,n.emit(r.USER_OPENED_FILE,{user:d,file:f})}}(n);break;case"followUser":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.followingUsers,a=n.followUser;if(!a.session)throw new Error("Expected session associated with follow user");var s=v(a.session,i);o.some((function(e){return e.id===s.id}))||(o.push(s),t.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,c.Z)(o),user:s,type:"follow"}))}(n);break;case"unfollowUser":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.followingUsers,a=n.unfollowUser;if(!a.session)throw new Error("Expected session associated with follow user");var s=v(a.session,i),u=o.findIndex((function(e){return e.id===s.id}));-1!==u&&(o.splice(u,1),t.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,c.Z)(o),user:s,type:"unfollow"}))}(n);break;case"sessionTimestampUpdated":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=n.sessionTimestampUpdated;if(!a.session||!a.timestamp)throw new Error("Expected session and tiemstamp associated with update");var s=a.session,u=v(s,i),c=o[u.id],l=u.sessions.find((function(e){return e.id===s}));if(!l)throw new Error("Expected user ".concat(u.id," to have a session with ID ").concat(s));l.timestamp=h(a.timestamp);var f=l.activeFile;f!==c&&(o[u.id]=f,t.emit(r.USER_OPENED_FILE,{user:u,file:f}))}(n)}})),g=n,function(){g=null}}})),{onUserLeave:function(e){return o.on(r.USER_LEAVE,e),function(){o.removeListener(r.USER_LEAVE,e)}},onUserJoin:function(e){return o.on(r.USER_JOIN,e),function(){o.removeListener(r.USER_LEAVE,e)}},onActiveUsersChange:function(e){return o.on(r.USERS_UPDATE,e),function(){o.removeListener(r.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return o.on(r.USER_OPENED_FILE,e),function(){o.removeListener(r.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return o.on(r.FOLLOWED_USER_CHANGED,e),function(){o.removeListener(r.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return o.on(r.FOLLOWING_USERS_CHANGED,e),function(){o.removeListener(r.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var n=d[e];if("undefined"===typeof n)throw new Error("Expected file for user with ID ".concat(e," to be defined"));return n},updateOpenFile:function(e){return(0,i.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y();case 2:n.sent.send({openFile:{file:e}});case 4:case"end":return n.stop()}}),n)})))()},updateSessionTimestamp:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:e.sent.send({updateSessionTimestamp:{}});case 4:case"end":return e.stop()}}),e)})))()},followUser:function(e){return k.apply(this,arguments)},unfollowUser:I,getActiveUsers:function(){return s},getFollowedUser:function(){return u},getFollowingUsers:function(){return f},getUserIdToFile:function(){return d},getPathToUserIds:function(){var e=new Map;function n(t,r){var i;if(""!==t){e.has(t)||e.set(t,[]);var o=e.get(t);if(!o)throw new Error("Expected user Ids");o.some((function(e){return e===r}))||(null===(i=e.get(t))||void 0===i||i.push(r),n((0,b.Il)(t),r))}}return s.forEach((function(e){var t=e.id,r=d[t];r&&n(r,t)})),e}}}var y,D=t(26042),k=t(69396);!function(e){e.COMMAND_BAR_TOGGLED="COMMAND_BAR_TOGGLED",e.DEEPLINK_CHANGED="DEEPLINK_CHANGED",e.EDITOR_FOCUSED="EDITOR_FOCUSED",e.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED",e.PREVIEWED_FILE_CHANGED="PREVIEWED_FILE_CHANGED",e.INSTRUCTIONS_VIEWER_TOGGLED="INSTRUCTIONS_VIEWER_TOGGLED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e.CURSOR_POSITION_CHANGED="CURSOR_POSITION_CHANGED",e.CONFIG_FILE_VISIBILITY_TOGGLED="CONFIG_FILE_VISIBILITY_TOGGLED",e.RESOURCE_MONITORING_STATE_CHANGED="RESOURCE_MONITORING_STATE_CHANGED",e.TERMINAL_WRITE_CALLED="TERMINAL_WRITE_CALLED",e.TERMINAL_CLEAR_CALLED="TERMINAL_CLEAR_CALLED",e.WPX_TASK_COMPLETION_SURVEY_READY="WPX_TASK_COMPLETION_SURVEY_READY"}(y||(y={}));var I=3e5,R=t(15583);var T,C=t(52867);!function(e){e.MESSAGES_LOADED="MESSAGES_LOADED",e.MESSAGE_RECEIVED="MESSAGE_RECEIVED",e.MESSAGE_SENT="MESSAGE_SENT",e.USER_TYPING_UPDATED="USER_TYPING_UPDATED"}(T||(T={}));var A,_=t(66223),O=t(12061),N=t(70240);!function(e){e.MESSAGE_RECEIVED="MESSAGE_RECEIVED"}(A||(A={}));var L=t(82378),P=t(82670),U=t(10253),Z=t(39571),F=t(51438),G=t(92876),M="{".charCodeAt(0),V="}".charCodeAt(0),H="[".charCodeAt(0),j="]".charCodeAt(0),B='"'.charCodeAt(0),W="\\".charCodeAt(0);var q=new TextEncoder,J=new TextDecoder,z="\r".charCodeAt(0),K="\n".charCodeAt(0);var Y=function(){var e=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source;return RegExp("(".concat(e,"\\r\\n)*(").concat(e,")$"),"i")}();function X(e,n){var t=J.decode(e.slice(0,n));try{return{json:JSON.parse(t),buffer:e.slice(n)}}catch(a){if((0,P.Z)(a,SyntaxError)&&"Unexpected end of JSON input"===a.message){var r=function(e,n){for(var t=0,r=0,i=!1,o=n;o<e.length+1;o++){if(o!==n&&!t&&!r&&!i)return o;var a=e[o];switch(a){case W:o++;continue;case B:i=!i;continue}if(!i)switch(a){case M:t++;break;case V:t--;break;case H:r++;break;case j:r--}}return-1}(e,0);if(-1!==r){var i=e.slice(0,r),o=J.decode(i);try{return{json:JSON.parse(o),buffer:e.slice(r)}}catch(s){G.Tb(s)}}}return G.Tb(a),{json:void 0,buffer:e.slice(n)}}}var Q=function(){function e(n){(0,F.Z)(this,e),this.onMessage=n,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var n=e.prototype;return n.consumeHeaders=function(){var e=function(e){var n=e.findIndex((function(n,t){return n===z&&e[t+1]===K&&e[t+2]===z&&e[t+3]===K}));if(-1!==n){var t=J.decode(e.slice(0,n)),r=t.match(Y);if(!r)throw new Error("Unable to match header, text: ".concat(t));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,d=f.indexOf(":");if(-1===d)throw new Error('Message header must separate key and value using ":"');var p=f.substr(0,d),m=f.substr(d+1).trim();if("Content-Length"===p){var v=parseInt(m,10);if(isNaN(v))throw new Error("Content-Length value must be a number.");i[p]=parseInt(m,10)}else i[p]=m}}catch(h){s=!0,u=h}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}if(null==i["Content-Length"])throw new Error("Header must provide a Content-Length property.");return{headerLength:n,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},n.read=function(e){var n;for(this.buffer=function(e,n){var t=new Uint8Array(e.length+n.length);return t.set(e),t.set(n,e.length),t}(this.buffer,q.encode(e));null!==(n=this.headers)&&void 0!==n?n:this.headers=this.consumeHeaders();){var t=this.headers.value["Content-Length"];if(this.buffer.length<t)return;var r=X(this.buffer,t),i=r.json,o=r.buffer;if(this.headers=void 0,this.buffer=o,void 0!==i)try{this.onMessage(i)}catch(a){G.Tb(a)}}},e}(),$=a().mark(ee);function ee(e,n){var t;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.length===n.length){r.next=2;break}return r.abrupt("return");case 2:t=0;case 3:if(!(t<e.length)){r.next=9;break}return r.next=6,[e[t],n[t]];case 6:t++,r.next=3;break;case 9:case"end":return r.stop()}}),$)}var ne=t(48764).Buffer;function te(e){var n,t=e.channel,r=e.beforeRun,o=function(){u.current="terminated",f.current=[],d.current=[],m.current=null,h.handleDebugSessionEnded(),E.current=!1},s=function(e){return v.on("started",e),function(){v.removeListener("started",e)}},u=(0,L.u)("terminated"),f=(0,L.u)([]),d=(0,L.u)([]),p=(0,L.u)(new Map),m=(0,L.u)(null),v=(0,x.ZP)(),h=function(e,n){var t=function(){var e=new Map,n=new Set,t=!0,i=!1,a=void 0;try{for(var u,c=r.entries()[Symbol.iterator]();!(t=(u=c.next()).done);t=!0){var l=(0,U.Z)(u.value,2),f=l[0],d=l[1];if(0!==d.length){var p=[],m=!0,v=!1,h=void 0;try{for(var E,x=d[Symbol.iterator]();!(m=(E=x.next()).done);m=!0){var b=E.value;if(b.breakpointId&&b.line){var g=s.get(b.breakpointId),S=void 0===g?void 0:o.get(g);S&&n.add(g),p.push({dapId:g,pid1Id:b.breakpointId,line:S&&S.line||b.line,verified:Boolean(null===S||void 0===S?void 0:S.verified),logMessage:b.logMessage||void 0})}}}catch(B){v=!0,h=B}finally{try{m||null==x.return||x.return()}finally{if(v)throw h}}e.set(f,p)}}}catch(B){i=!0,a=B}finally{try{t||null==c.return||c.return()}finally{if(i)throw a}}var w=!0,y=!1,D=void 0;try{for(var k,I=o.entries()[Symbol.iterator]();!(w=(k=I.next()).done);w=!0){var R,T,C=(0,U.Z)(k.value,2),A=C[0],_=C[1];if(!n.has(A)){var O=(0,Z.IT)((null===(R=_.source)||void 0===R?void 0:R.path)||(null===(T=_.source)||void 0===T?void 0:T.name)||""),N=_.line;if(O&&N){var L=e.get(O);L||(L=[],e.set(O,L));var P=!1,F=!0,G=!1,M=void 0;try{for(var V,H=L[Symbol.iterator]();!(F=(V=H.next()).done);F=!0){var j=V.value;if(j.line===_.line){j.dapId=A,j.verified=_.verified,P=!0;break}}}catch(B){G=!0,M=B}finally{try{F||null==H.return||H.return()}finally{if(G)throw M}}P||L.push({dapId:A,line:N,verified:_.verified})}}}}catch(B){y=!0,D=B}finally{try{w||null==I.return||I.return()}finally{if(y)throw D}}return e},r=new Map,o=new Map,s=new Map;function u(){return(u=(0,i.Z)(a().mark((function n(t){var i,u,c,l,f,d,p,m,v,h,E,x,b,g,S,w,y,k,I,R,T,C,A,_,O,N,L,P,Z,F,G,M,V,H,j,B,W,q,J,z;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=!0,u=!1,c=void 0,n.prev=1,l=r.entries()[Symbol.iterator]();case 3:if(i=(f=l.next()).done){n.next=91;break}if(d=(0,U.Z)(f.value,2),p=d[0],m=d[1],void 0===t||t===p){n.next=7;break}return n.abrupt("continue",88);case 7:return n.next=9,e({command:"setBreakpoints",arguments:{source:{name:p,path:p},breakpoints:m.map((function(e){return{line:e.line,logMessage:e.logMessage||void 0}}))}});case 9:if((v=n.sent).success){n.next=12;break}return n.abrupt("continue",88);case 12:h=!0,E=!1,x=void 0,n.prev=13,b=o[Symbol.iterator]();case 15:if(h=(g=b.next()).done){n.next=39;break}for(S=(0,U.Z)(g.value,2),w=S[0],y=S[1],(null===(k=y.source)||void 0===k?void 0:k.name)===p&&o.delete(w),I=!0,R=!1,T=void 0,n.prev=20,C=s[Symbol.iterator]();!(I=(A=C.next()).done);I=!0)_=(0,U.Z)(A.value,2),O=_[0],_[1]===w&&s.delete(O);n.next=28;break;case 24:n.prev=24,n.t0=n.catch(20),R=!0,T=n.t0;case 28:n.prev=28,n.prev=29,I||null==C.return||C.return();case 31:if(n.prev=31,!R){n.next=34;break}throw T;case 34:return n.finish(31);case 35:return n.finish(28);case 36:h=!0,n.next=15;break;case 39:n.next=45;break;case 41:n.prev=41,n.t1=n.catch(13),E=!0,x=n.t1;case 45:n.prev=45,n.prev=46,h||null==b.return||b.return();case 48:if(n.prev=48,!E){n.next=51;break}throw x;case 51:return n.finish(48);case 52:return n.finish(45);case 53:for(N=v,L=!0,P=!1,Z=void 0,n.prev=55,F=N.body.breakpoints[Symbol.iterator]();!(L=(G=F.next()).done);L=!0)null!=(M=G.value).id&&o.set(M.id,(0,D.Z)({source:{name:p,path:p}},M));n.next=63;break;case 59:n.prev=59,n.t2=n.catch(55),P=!0,Z=n.t2;case 63:n.prev=63,n.prev=64,L||null==F.return||F.return();case 66:if(n.prev=66,!P){n.next=69;break}throw Z;case 69:return n.finish(66);case 70:return n.finish(63);case 71:for(V=!0,H=!1,j=void 0,n.prev=72,B=ee(m,N.body.breakpoints)[Symbol.iterator]();!(V=(W=B.next()).done);V=!0)q=(0,U.Z)(W.value,2),J=q[0],z=q[1],J.breakpointId&&null!=z.id&&s.set(J.breakpointId,z.id);n.next=80;break;case 76:n.prev=76,n.t3=n.catch(72),H=!0,j=n.t3;case 80:n.prev=80,n.prev=81,V||null==B.return||B.return();case 83:if(n.prev=83,!H){n.next=86;break}throw j;case 86:return n.finish(83);case 87:return n.finish(80);case 88:i=!0,n.next=3;break;case 91:n.next=97;break;case 93:n.prev=93,n.t4=n.catch(1),u=!0,c=n.t4;case 97:n.prev=97,n.prev=98,i||null==l.return||l.return();case 100:if(n.prev=100,!u){n.next=103;break}throw c;case 103:return n.finish(100);case 104:return n.finish(97);case 105:case"end":return n.stop()}}),n,null,[[1,93,97,105],[13,41,45,53],[20,24,28,36],[29,,31,35],[46,,48,52],[55,59,63,71],[64,,66,70],[72,76,80,88],[81,,83,87],[98,,100,104]])})))).apply(this,arguments)}return{findPathByBreakpointId:function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=r.entries()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=(0,U.Z)(o.value,2),u=s[0];if(s[1].some((function(n){return n.breakpointId===e})))return u}}catch(c){t=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return null},getBreakpoints:t,flush:function(e){return u.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var r=e.body,i=r.reason,a=r.breakpoint,s=a.id;if(null!==s&&void 0!==s){switch(i){case"changed":case"new":o.set(s,(0,D.Z)({},o.get(s),a));break;case"removed":o.delete(s);break;default:return}n(t())}},handlePID1BreakpointEvent:function(e){var i=e.absolutePath?(0,Z.IT)(e.absolutePath):null;i&&(r.set(i,e.breakpoints||[]),n(t()))},handleDebugSessionEnded:function(){o.clear(),s.clear();var e=!0,i=!1,a=void 0;try{for(var u,c=r.entries()[Symbol.iterator]();!(e=(u=c.next()).done);e=!0){var l=(0,U.Z)(u.value,2),f=l[0];0===l[1].length&&r.delete(f)}}catch(d){i=!0,a=d}finally{try{e||null==c.return||c.return()}finally{if(i)throw a}}n(t())}}}(I,(function(e){p.current=e})),E=(0,L.u)(!1),b=[],g=new Q((function(e){if(b.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":u.current="running";break;case"stopped":var n;u.current="paused",m.current=null!==(n=e.body.threadId)&&void 0!==n?n:null,v.emit("paused",e.body.reason),function(){A.apply(this,arguments)}();break;case"breakpoint":h.handleDAPBreakpointEvent(e)}else if("response"===e.type){var t=e,r=S.get(t.request_seq);r&&(S.delete(t.request_seq),r(e))}})),S=new Map,w=100,y=!1;function I(e){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=w++;S.set(r,e);var i=(0,k.Z)((0,D.Z)({},n),{type:"request",seq:r});b.push({time:Date.now(),direction:"out",data:i});var o={debugInput:{session:"main",adapterInput:re(i)}};b.push({time:Date.now(),direction:"out",data:o}),t.send(o)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return C.apply(this,arguments)}function C(){return(C=(0,i.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.push({time:Date.now(),direction:"out",data:n}),e.next=3,t.request(n);case 3:if(r=e.sent,b.push({time:Date.now(),direction:"in",data:r}),!r.error){e.next=7;break}throw r.error;case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return A=(0,i.Z)(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.current=[],d.current=[],e.next=4,I({command:"stackTrace",arguments:{threadId:m.current}});case 4:if((n=e.sent).success){e.next=7;break}return e.abrupt("return");case 7:if(f.current=n.body.stackFrames,0!==f.current.length){e.next=10;break}return e.abrupt("return");case 10:return t=f.current[0],e.next=13,I({command:"scopes",arguments:{frameId:t.id}});case 13:if((r=e.sent).success){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,Promise.all(r.body.scopes.map((function(e){return I({command:"variables",arguments:{variablesReference:e.variablesReference}}).then((function(n){return{response:n,parentVariableReference:e.variablesReference}}))})));case 18:i=e.sent,d.current=i.filter((function(e){return e.response.success})).reduce((function(e,n){var t=n.response,r=n.parentVariableReference;return e.concat(t.body.variables.map((function(e){return(0,k.Z)((0,D.Z)({},e),{parentVariableReference:r})})))}),[]);case 20:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function _(){return O.apply(this,arguments)}function O(){return O=(0,i.Z)(a().mark((function e(){var n,i,o,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("terminated"===u.current){e.next=3;break}throw new Error("Cant start while debugger is already running");case 3:return u.current="preinitializing",f.current=[],e.next=7,r();case 7:if("stopping"!==u.current){e.next=10;break}return u.current="terminated",e.abrupt("return");case 10:return y=!0,u.current="initializing",o={debugMain:{session:"main",readOnly:!1}},b.push({time:Date.now(),direction:"out",data:o}),e.next=16,t.request(o);case 16:if(s=e.sent,b.push({time:Date.now(),direction:"in",data:s}),!s.error){e.next=22;break}return v.emit("output",s.error),u.current="terminated",e.abrupt("return");case 22:return e.next=24,I({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}});case 24:if((c=e.sent).success){e.next=28;break}return u.current="terminated",e.abrupt("return");case 28:return E.current=Boolean(null===(n=c.body)||void 0===n?void 0:n.supportsStepBack),l=!(null===(i=c.body)||void 0===i?void 0:i.supportsConfigurationDoneRequest),e.next=32,h.flush();case 32:if(l){e.next=35;break}return e.next=35,I({command:"configurationDone"});case 35:"initializing"===u.current&&(u.current="running"),v.emit("started",l);case 37:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function N(e,n){return F.apply(this,arguments)}function F(){return F=(0,i.Z)(a().mark((function e(n,t){var r,i,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.line,i=t.otIndex,o=t.otVersion,s=t.logMessage,c=(0,Z.om)(n)||n,e.next=4,T({debugAddBreakpointRequest:{path:c,line:r,otIndex:i,otVersion:o,logMessage:s}});case 4:if("terminated"===u.current){e.next=7;break}return e.next=7,h.flush(n);case 7:v.emit("breakpoint","added");case 8:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function G(e){return M.apply(this,arguments)}function M(){return(M=(0,i.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.findPathByBreakpointId(n),e.next=3,T({debugRemoveBreakpointRequest:{breakpointId:n}});case 3:if("terminated"===u.current||!t){e.next=6;break}return e.next=6,h.flush(t);case 6:v.emit("breakpoint","removed");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=(0,i.Z)(a().mark((function e(n,t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.findPathByBreakpointId(n)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,T({debugUpdateBreakpointRequest:{breakpointId:n,logMessage:t.logMessage}});case 5:if("terminated"===u.current){e.next=8;break}return e.next=8,h.flush(r);case 8:v.emit("breakpoint","updated");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return H=(0,i.Z)(a().mark((function e(n,t){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=null===(i=null===(r=p.current.get(n))||void 0===r?void 0:r.find((function(e){return e.line===t.line&&void 0!==e.pid1Id})))||void 0===i?void 0:i.pid1Id)){e.next=7;break}return e.next=5,G(o);case 5:e.next=9;break;case 7:return e.next=9,N(n,t);case 9:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}return t.onCommand((function(e){var n,t;b.push({time:Date.now(),direction:"in",data:e});var r=e.debugOutput,i=e.debugState,a=e.debugBreakpointEvent,s=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&g.read(r.adapterOutput),r.output&&v.emit("output",r.output)}if(a&&h.handlePID1BreakpointEvent(a),i&&i.state===l.api.State.Stopped&&o(),(null===s||void 0===s||null===(n=s.sessions)||void 0===n?void 0:n.main)!==l.api.State.Running&&(null===i||void 0===i?void 0:i.state)!==l.api.State.Running||"terminated"===u.current&&_(),(null===s||void 0===s||null===(t=s.sessions)||void 0===t?void 0:t.main)===l.api.State.Stopped||(null===i||void 0===i?void 0:i.state)===l.api.State.Stopped){if(y)return void(y=!1);o()}})),{state:u,stackFrames:f,variables:d,breakpoints:p,supportsStepBack:E,onOutput:function(e){return v.on("output",e),function(){v.removeListener("output",e)}},onStarted:s,onPaused:function(e){return v.on("paused",e),function(){v.removeListener("paused",e)}},onBreakpoint:function(e){return v.on("breakpoint",e),function(){v.removeListener("breakpoint",e)}},sendInput:function(e){return(0,i.Z)(a().mark((function n(){var r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={debugInput:{session:"main",input:e}},b.push({time:Date.now(),direction:"out",data:r}),n.next=4,t.request(r);case 4:if(i=n.sent,b.push({time:Date.now(),direction:"in",data:i}),!i.error){n.next=8;break}throw i.error;case 8:case"end":return n.stop()}}),n)})))()},fetchVariables:function(e){return(0,i.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I({command:"variables",arguments:{variablesReference:e}});case 2:if(!(t=n.sent).success){n.next=5;break}return n.abrupt("return",t.body.variables.map((function(n){return(0,k.Z)((0,D.Z)({},n),{parentVariableReference:e})})));case 5:throw new Error(t.message);case 6:case"end":return n.stop()}}),n)})))()},evaluate:function(e){var t=e.frameId,r=void 0===t?null===(n=f.current[0])||void 0===n?void 0:n.id:t,o=e.expression,s=e.context;return(0,i.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({command:"evaluate",arguments:{frameId:r,expression:o,context:s}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))()},addBreakpoint:N,removeBreakpoint:G,updateBreakpoint:function(e,n){return V.apply(this,arguments)},toggleBreakpoint:function(e,n){return H.apply(this,arguments)},start:_,continue:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.current=[],u.current="running",e.next=4,I({command:"continue",arguments:{threadId:m.current}});case 4:case"end":return e.stop()}}),e)})))()},reverseContinue:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.current=[],u.current="running",e.next=4,I({command:"reverseContinue",arguments:{threadId:m.current}});case 4:case"end":return e.stop()}}),e)})))()},back:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current="running",e.next=3,I({command:"stepBack",arguments:{threadId:m.current}});case 3:case"end":return e.stop()}}),e)})))()},next:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current="running",e.next=3,I({command:"stepIn",arguments:{threadId:m.current}});case 3:case"end":return e.stop()}}),e)})))()},skip:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current="running",e.next=3,I({command:"next",arguments:{threadId:m.current,granularity:"line"}});case 3:case"end":return e.stop()}}),e)})))()},stepOut:function(){return(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current="running",e.next=3,I({command:"stepOut",arguments:{threadId:m.current}});case 3:case"end":return e.stop()}}),e)})))()},stop:function(){return(0,i.Z)(a().mark((function e(){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("terminated"!==u.current){e.next=2;break}throw new Error("Debugger already terminated");case 2:if(n=u.current,u.current="stopping","preinitializing"!==n){e.next=6;break}return e.abrupt("return");case 6:if("initializing"!==n){e.next=13;break}return r=[],e.next=10,Promise.race([new Promise((function(e){r.push(u.subscribe((function(){return e()})))})),new Promise((function(e){r.push(s((function(){return e()})))}))]);case 10:if(r.forEach((function(e){return e()})),"terminated"!==u.current){e.next=13;break}return e.abrupt("return");case 13:return i={debugStop:{session:"main"}},b.push({time:Date.now(),direction:"out",data:i}),e.next=17,t.request(i);case 17:if(o=e.sent,b.push({time:Date.now(),direction:"in",data:o}),!o.error){e.next=21;break}throw new Error("Failed to stop debugger "+o.error);case 21:case"end":return e.stop()}}),e)})))()},getSource:function(e){return(0,i.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I({command:"source",arguments:{source:{path:e}}});case 2:if((t=n.sent).success){n.next=5;break}throw new Error(t.message);case 5:return n.abrupt("return",t.body.content);case 6:case"end":return n.stop()}}),n)})))()},getDebugLogs:function(){return Object.entries({state:u,stackFrames:f,variables:d,breakpoints:p,threadId:m}).map((function(e){var n=(0,U.Z)(e,2),t=n[0],r=n[1];return"".concat(t," = ").concat(JSON.stringify((0,P.Z)(r.current,Map)?(0,c.Z)(r.current):r.current,void 0,2))})).join("\n")+"\n\n"+b.map((function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")})).join("\n")}}}function re(e){var n=JSON.stringify(e);return"Content-Length: ".concat(ne.byteLength(n),"\r\n\r\n").concat(n)}var ie,oe=t(59916);!function(e){e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED"}(ie||(ie={}));var ae,se=t(7787),ue=t(8415),ce=t(36077),le=t.n(ce),fe=t(99534),de=t(24920),pe=t(58e3),me=function(e){var n=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["plaintext","markdown"]}},publishDiagnostics:{relatedInformation:!0},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:pe.$}},definition:{dynamicRegistration:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,completionItem:{documentationFormat:["plaintext","markdown"],snippetSupport:!0}},codeAction:{dynamicRegistration:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(de.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:n.clientToServer?{dynamicRegistration:!0}:void 0,configuration:n.serverToClient,executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[de.ResourceOperationKind.Create,de.ResourceOperationKind.Delete,de.ResourceOperationKind.Rename]}}}},ve=t(98649),he=t(11625),Ee=t(48764).Buffer;function xe(e,n){return(0,he.D)(e)||n}function be(e,n){return e.line<n.line||e.line===n.line&&e.character<=n.character}function ge(){return Math.floor(Math.random()*(Math.pow(2,31)-1))}function Se(e){var n=JSON.stringify((0,k.Z)((0,D.Z)({},e),{jsonrpc:"2.0"})),t=Ee.byteLength(n,"utf8");return"Content-Length: ".concat(t,"\r\n\r\n").concat(n)}function we(e){var n=e.connection,t=e.isSupportedFile,r=e.clientId,o=e.getWorkspaceConfiguration,s=e.onWorkspaceConfigurationChange,u=function(e){if(!E)throw new Error("Expected rootUri");return e.slice(E.length+1)},c=function(e){if(!E)throw new Error("Expected rootUri");if(e.startsWith("/"))throw new Error("Path must be relative. Got: ".concat(e));return E+"/"+e},l=function(e){b!==e&&(b=e,h.emit(ae.SERVER_STATE_CHANGE,b))},f=function(e){h.emit(ae.SEND_NOTIFICATION,e),n.write(Se(e))},d=function(e){var t=e.options,r=void 0===t?{}:t,i=r.id,o=void 0===i?ge():i,a=r.signal,s=r.tap,u=(0,fe.Z)(e,["options"]);if(!Number.isInteger(o))throw new Error("Request ID must be an integer");if(n.didClose())return Promise.resolve({result:null,cancelled:!0});h.emit(ae.REQUEST,{id:o,data:u}),null===a||void 0===a||a.addEventListener("abort",(function(){m(o)}),{once:!0}),n.write(Se((0,k.Z)((0,D.Z)({},u),{id:o})));var c=new Promise((function(e){w.set(o,e)}));return s&&s(c),c},p=function(e,t){n.write(Se((0,k.Z)((0,D.Z)({},t),{id:e})))},m=function(e){var n=w.get(e);n&&(h.emit(ae.CANCEL_REQUEST,e),n({result:null,cancelled:!0}),w.delete(e),f({method:"$/cancelRequest",params:{id:e}}))},v=function(e){if(!g)throw new Error("Expected client to be initialized");if(!g[e])throw new Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return g[e]},h=(0,x.ZP)(),E=null,b=ue.a.OFFLINE,g=null,S=new Map,w=new Map,y=new Q((function(e){if(e.id&&w.has(e.id)){var n=w.get(e.id);w.delete(e.id);var t=e.result,i=e.error;if((void 0!==t||i)&&h.emit(ae.RESPONSE,e),"undefined"!==typeof t)return void n({result:t,cancelled:!1});if(i){var a=i.code,s=i.message,c=i.data;return se.kg.error("LSP request failed",{code:a,lspId:r,errorMessage:s,data:JSON.stringify(c)}),void n({error:i})}throw se.kg.error("LSP response message contained neither error nor result"),new Error("Expected either message or error in LSP response")}var l=e.method;if("client/registerCapability"!==l)if("workspace/applyEdit"!==l){if("textDocument/publishDiagnostics"===l){var f=u(e.params.uri),d=S.get(f);if(!d)return;var m=e.params.diagnostics;return d.diagnostics=m,S.set(f,d),void h.emit(ae.DIAGNOSTICS,{path:f,diagnostics:m})}if("workspace/configuration"===l){var v,E=e.params,x=Array(E.items.length).fill(null),b=null!==(v=null===o||void 0===o?void 0:o())&&void 0!==v?v:null;b&&(x=E.items.map((function(e){return e.section?(0,ve.Z)(b,e.section):b}))),p(e.id,{result:x,cancelled:!1})}}else h.emit(ae.WORKSPACE_EDIT,(0,D.Z)({id:e.id},e.params));else{var y=e.params.registrations;if(!y||!Array.isArray(y))throw new Error("Expected registrations array");y.forEach((function(e){var n=e.method;if(!n)throw new Error("Expected registration method");if(!g)throw new Error("Expected server capabilities");var t=e.registerOptions||!0;switch(n){case"textDocument/definition":g.definitionProvider=!0;break;case"textDocument/typeDefinition":g.typeDefinitionProvider=!0;break;case"textDocument/implementation":g.implementationProvider=!0;break;case"textDocument/references":g.referencesProvider=!0;break;case"textDocument/hover":g.hoverProvider=!0;break;case"textDocument/completion":g.completionProvider=t;break;case"textDocument/formatting":g.documentFormattingProvider=t;break;case"textDocument/rename":g.renameProvider=t;break;case"textDocument/codeAction":g.codeActionProvider=t;break;case"textDocument/signatureHelp":g.signatureHelpProvider=t;break;case"textDocument/didSave":if("number"===typeof g.textDocumentSync)break;g.textDocumentSync=(0,k.Z)((0,D.Z)({},g.textDocumentSync||{}),{save:t});break;case"textDocument/willSaveWaitUntil":if("number"===typeof g.textDocumentSync)break;g.textDocumentSync=(0,k.Z)((0,D.Z)({},g.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"===typeof g.textDocumentSync)break;g.textDocumentSync=(0,k.Z)((0,D.Z)({},g.textDocumentSync||{}),{change:t});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"===typeof g.textDocumentSync)break;g.textDocumentSync=(0,k.Z)((0,D.Z)({},g.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":g.executeCommandProvider=t;break;default:se.kg.info("Unexpected dynamically registered capability in LSP client",{method:n})}h.emit(ae.SERVER_CAPABILITIES_CHANGE,g)}))}}));n.read(y.read);var I=function(){};return{initialize:function(e){var n=e.pwd,t=e.initializationOptions;return(0,i.Z)(a().mark((function e(){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(ue.a.INITIALIZING),E="file://".concat(n),e.next=4,d({method:"initialize",params:{initializationOptions:t,capabilities:me({configurationSupport:{serverToClient:Boolean(o),clientToServer:Boolean(s)}}),processId:null,rootUri:E,workspaceFolders:[{name:E,uri:E}]}});case 4:if(!("error"in(r=e.sent))){e.next=7;break}throw new Error("Something went wrong initializing the LSP client: ".concat(r.error.message));case 7:if(!r.cancelled){e.next=9;break}throw new Error("Initialize request cancelled");case 9:if(r.result){e.next=11;break}throw new Error("Expected result in initialize request");case 11:f({method:"initialized",params:{}}),g=r.result.capabilities,h.emit(ae.SERVER_CAPABILITIES_CHANGE,g),l(ue.a.INITIALIZED),s&&(I=s((function(e){f({method:"workspace/didChangeConfiguration",params:{settings:e}})})),o&&(i=o(),f({method:"workspace/didChangeConfiguration",params:{settings:i}})));case 16:case"end":return e.stop()}}),e)})))()},generateId:ge,notify:{didOpen:function(e,n){if(!t(e))throw new Error("Path not supported");var i,o=S.get(e);if(o&&0!==o.buffers)return o.buffers++,void S.set(e,o);var a=null!==(i=null===o||void 0===o?void 0:o.version)&&void 0!==i?i:0;S.set(e,{version:a,buffers:1,diagnostics:[]}),f({method:"textDocument/didOpen",params:{textDocument:{uri:c(e),languageId:xe(e,r),text:n,version:a}}})},didChange:function(e,n){var t=S.get(e);if(!t)throw new Error('Document for "'.concat(e,'" is not open'));t.version++,f({method:"textDocument/didChange",params:{textDocument:{uri:c(e),version:t.version},contentChanges:n}})},didSave:function(e){if(!S.get(e))throw new Error('Document for "'.concat(e,'" is not open'));v("textDocumentSync"),f({method:"textDocument/didSave",params:{textDocument:{uri:c(e)}}})},didClose:function(e){var n=S.get(e);if(!n)throw new Error('Document for "'.concat(e,'" is not open'));n.buffers--,n.buffers>0||(f({method:"textDocument/didClose",params:{textDocument:{uri:c(e)}}}),S.delete(e))},cancelRequest:function(e){m(e)}},request:{completion:function(e,n,t){return v("completionProvider"),d({method:"textDocument/completion",params:{textDocument:{uri:c(e)},position:n,context:t}})},resolveCompletionItem:function(e){if(!v("completionProvider").resolveProvider)throw new Error("LSP Server does not support resolving completion items");return d({method:"completionItem/resolve",params:e})},signatureHelp:function(e,n){return d({method:"textDocument/signatureHelp",params:{textDocument:{uri:c(e)},position:n}})},hover:function(e,n){return d({method:"textDocument/hover",params:{textDocument:{uri:c(e)},position:n}})},codeActions:function(e,n){var t=S.get(e);if(!t)throw new Error("Document for path ".concat(e," is not open."));var r=t.diagnostics.filter((function(e){return t=e.range,r=n,be(t.start,r.end)&&be(r.start,t.end);var t,r}));return d({method:"textDocument/codeAction",params:{textDocument:{uri:c(e)},range:n,context:{diagnostics:r}}})},executeCommand:function(e,n){return d({method:"workspace/executeCommand",params:{command:e,arguments:n}})},format:function(e,n){return v("documentFormattingProvider"),d({method:"textDocument/formatting",params:{textDocument:{uri:c(e)},options:n}})},findDefinitions:function(e,n,t){return(0,i.Z)(a().mark((function r(){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return v("definitionProvider"),r.next=3,d({options:t,method:"textDocument/definition",params:{textDocument:{uri:c(e)},position:n}});case 3:if("result"in(i=r.sent)){r.next=6;break}return r.abrupt("return",i);case 6:if(!i.result||Array.isArray(i.result)){r.next=8;break}return r.abrupt("return",{result:[i.result],cancelled:!1});case 8:return r.abrupt("return",i);case 9:case"end":return r.stop()}}),r)})))()},findTypeDefinitions:function(e,n,t){return(0,i.Z)(a().mark((function r(){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return v("typeDefinitionProvider"),r.next=3,d({options:t,method:"textDocument/typeDefinition",params:{textDocument:{uri:c(e)},position:n}});case 3:if("result"in(i=r.sent)){r.next=6;break}return r.abrupt("return",i);case 6:if(!i.result||Array.isArray(i.result)){r.next=8;break}return r.abrupt("return",{result:[i.result],cancelled:!1});case 8:return r.abrupt("return",i);case 9:case"end":return r.stop()}}),r)})))()},findImplementations:function(e,n,t){return(0,i.Z)(a().mark((function r(){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return v("implementationProvider"),r.next=3,d({options:t,method:"textDocument/implementation",params:{textDocument:{uri:c(e)},position:n}});case 3:if("result"in(i=r.sent)){r.next=6;break}return r.abrupt("return",i);case 6:if(!i.result||Array.isArray(i.result)){r.next=8;break}return r.abrupt("return",{result:[i.result],cancelled:!1});case 8:return r.abrupt("return",i);case 9:case"end":return r.stop()}}),r)})))()},findReferences:function(e,n,t){return v("referencesProvider"),d({method:"textDocument/references",params:{textDocument:{uri:c(e)},position:n,context:t}})},rename:function(e,n,t,r){return v("renameProvider"),d({options:r,method:"textDocument/rename",params:{textDocument:{uri:c(e)},position:n,newName:t}})},prepareRename:function(e,n){var t=v("renameProvider");if("boolean"===typeof t||!t.prepareProvider)throw new Error("LSP server does not support prepare rename");return d({method:"textDocument/prepareRename",params:{textDocument:{uri:c(e)},position:n}})},documentSymbol:function(e,n){return(0,i.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({options:n,method:"textDocument/documentSymbol",params:{textDocument:{uri:c(e)}}});case 2:if("result"in(r=t.sent)){t.next=5;break}return t.abrupt("return",r);case 5:if(!r.result){t.next=7;break}return t.abrupt("return",{result:r.result,cancelled:!1});case 7:case"end":return t.stop()}}),t)})))()}},onDiagnostics:(0,x.JV)(h,ae.DIAGNOSTICS),onWorkspaceEdit:function(e){return(0,x.NH)(h,ae.WORKSPACE_EDIT,(function(n){var t=e(n);p(n.id,{result:t,cancelled:!1})}))},onServerStateChange:(0,x.JV)(h,ae.SERVER_STATE_CHANGE),onServerCapabilitiesChange:(0,x.JV)(h,ae.SERVER_CAPABILITIES_CHANGE),onRequest:(0,x.JV)(h,ae.REQUEST),onResponse:(0,x.JV)(h,ae.RESPONSE),onCancelRequest:(0,x.JV)(h,ae.CANCEL_REQUEST),onSendNotification:(0,x.JV)(h,ae.SEND_NOTIFICATION),shutdown:function(){for(var e in l(ue.a.EXITING),S.clear(),w)m(Number(e));I(),d({method:"shutdown"}).then((function(){f({method:"exit"}),l(ue.a.EXITED),h.removeAllListeners()}))},destroy:function(){for(var e in S.clear(),w)m(Number(e));I(),l(ue.a.EXITED),h.removeAllListeners()},getServerState:function(){return b},getServerCapabilities:function(){return g},getDiagnostics:function(e){var n=S.get(e);if(!n)throw new Error("File with path ".concat(e," is not open."));return n.diagnostics},isOpen:function(e){return S.has(e)},documentUriToPath:u,pathToDocumentURI:c,isSupportedFile:t,getLanguageId:function(e){return xe(e,r)}}}!function(e){e.INITIALIZED="INITIALIZED",e.DIAGNOSTICS="DIAGNOSTICS",e.WORKSPACE_EDIT="WORKSPACE_EDIT",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.CANCEL_REQUEST="CANCEL_REQUEST",e.SEND_NOTIFICATION="SEND_NOTIFICATION"}(ae||(ae={}));var ye,De=["typescript","javascript","javascriptreact","typescriptreact"];!function(e){e.ON_CLIENT="ON_CLIENT"}(ye||(ye={}));var ke=t(58794),Ie=t(83035);function Re(e){return Te.apply(this,arguments)}function Te(){return(Te=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.t1=ke.Z,e.next=4,Ce(n);case 4:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.abrupt("return",e.t0.writeFile.call(e.t0,"index.html",e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,i.Z)(a().mark((function e(n){var t,r,i,o,s,u,c,l,f,d,p,m,v,h,E,x,g,S,w,y,D,k,I,R,T,C,A,_,O,N,L,P,Z,F,G,M,V,H,j,B,W;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",r="",e.next=4,n.readFile("conf.json");case 4:if(!(i=e.sent).error){e.next=7;break}return e.abrupt("return","");case 7:return o=JSON.parse(i.content.toString()),(0,Ie.h)(o.version,"0.1.0")?r+="kaboom.import();\n":(0,Ie.h)(o.version,"0.4.0")&&(r+="kaboom.global();\n"),(0,Ie.h)(o.version,"0.4.0")?r+="\ninit({\n  ...".concat(JSON.stringify(o),",\n  clearColor: ").concat(o.clearColor?function(){var e=o.clearColor;return JSON.stringify({r:e[0],g:e[1],b:e[2],a:e[3]})}():"undefined","\n});\n  "):r+="\nkaboom({\n  ...".concat(JSON.stringify(o),",\n  global: true,\n  plugins: [ peditPlugin, asepritePlugin, kbmspritePlugin ],\n});\n"),e.t0=U.Z,e.next=13,Promise.all(["scenes","sprites","sounds"].map(n.readDir));case 13:if(e.t1=e.sent,s=(0,e.t0)(e.t1,3),u=s[0],c=s[1],l=s[2],c.error){e.next=36;break}for(f=!0,d=!1,p=void 0,e.prev=20,m=c.children[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)h=v.value,E=JSON.stringify((0,b.eb)(h.filename)),x=JSON.stringify("sprites/".concat(h.filename)),(0,Ie.H)(o.version,"0.4.0")?h.filename.endsWith(".pedit")?r+="loadPedit(".concat(E,", ").concat(x,");\n"):h.filename.endsWith(".kbmsprite")?r+="loadKbmsprite(".concat(E,", ").concat(x,");\n"):r+="loadSprite(".concat(E,", ").concat(x,");\n"):r+="loadSprite(".concat(E,", ").concat(x,");\n");e.next=28;break;case 24:e.prev=24,e.t2=e.catch(20),d=!0,p=e.t2;case 28:e.prev=28,e.prev=29,f||null==m.return||m.return();case 31:if(e.prev=31,!d){e.next=34;break}throw p;case 34:return e.finish(31);case 35:return e.finish(28);case 36:if(l.error){e.next=54;break}for(g=!0,S=!1,w=void 0,e.prev=38,y=l.children[Symbol.iterator]();!(g=(D=y.next()).done);g=!0)k=D.value,I=JSON.stringify((0,b.eb)(k.filename)),R=JSON.stringify("sounds/".concat(k.filename)),r+="loadSound(".concat(I,", ").concat(R,");\n");e.next=46;break;case 42:e.prev=42,e.t3=e.catch(38),S=!0,w=e.t3;case 46:e.prev=46,e.prev=47,g||null==y.return||y.return();case 49:if(e.prev=49,!S){e.next=52;break}throw w;case 52:return e.finish(49);case 53:return e.finish(46);case 54:if(u.error){e.next=84;break}return e.next=57,Promise.all(u.children.map((function(e){var t=e.filename;return Promise.all([(0,b.eb)(t),n.readFile("scenes/".concat(t))])})));case 57:T=e.sent,C=!0,A=!1,_=void 0,e.prev=59,O=T[Symbol.iterator]();case 61:if(C=(N=O.next()).done){e.next=70;break}if(L=N.value,P=(0,U.Z)(L,2),Z=P[0],!(F=P[1]).error){e.next=66;break}return e.abrupt("continue",67);case 66:r+="scene(".concat(JSON.stringify(Z),", (args = {}) => {\n").concat(F.content.toString(),"\n});\n");case 67:C=!0,e.next=61;break;case 70:e.next=76;break;case 72:e.prev=72,e.t4=e.catch(59),A=!0,_=e.t4;case 76:e.prev=76,e.prev=77,C||null==O.return||O.return();case 79:if(e.prev=79,!A){e.next=82;break}throw _;case 82:return e.finish(79);case 83:return e.finish(76);case 84:for(r+="start(".concat(JSON.stringify(o.startScene),");\n"),G=["kaboom.js"],(0,Ie.h)(o.version,"0.1.0")?(G.push("kit/physics.js"),G.push("kit/starter.js"),G.push("kit/level.js")):(0,Ie.H)(o.version,"0.4.0")&&(G.push("plugins/aseprite.js"),G.push("plugins/pedit.js")),M=!0,V=!1,H=void 0,e.prev=88,j=G[Symbol.iterator]();!(M=(B=j.next()).done);M=!0)W=B.value,t+='<script src="https://kaboomjs.com/lib/'.concat(encodeURIComponent(o.version),"/").concat(encodeURI(W),'"><\/script>\n');e.next=96;break;case 92:e.prev=92,e.t5=e.catch(88),V=!0,H=e.t5;case 96:e.prev=96,e.prev=97,M||null==j.return||j.return();case 99:if(e.prev=99,!V){e.next=102;break}throw H;case 102:return e.finish(99);case 103:return e.finish(96);case 104:return(0,Ie.H)(o.version,"0.4.0")&&(t+='<script src="https://kaboomjs.com/pub/legacy/kbmsprite.js"><\/script>\n'),e.abrupt("return",'\n<!DOCTYPE html>\n\n<html>\n\n<head>\n  <title>kaboom</title>\n  <meta charset="utf-8">\n  <style>\n    * {\n      margin: 0;\n    }\n    html,\n    body {\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n    }\n    canvas {\n      display: block;\n    }\n  </style>\n</head>\n\n<body>\n'.concat(t,"\n  <script>\n").concat(r,"\n  <\/script>\n</body>\n\n</html>\n"));case 106:case"end":return e.stop()}}),e,null,[[20,24,28,36],[29,,31,35],[38,42,46,54],[47,,49,53],[59,72,76,84],[77,,79,83],[88,92,96,104],[97,,99,103]])})))).apply(this,arguments)}var _e,Oe=t(39791),Ne=t(41951),Le=t(9556),Pe=t(83633),Ue=t.n(Pe);function Ze(e){var n=e.container,t=e.beforeRun,r=(0,x.ZP)(),o=Le.Z.Idle,s=new Date(0),u=!1;r.on(Le.z.TEST_RESULT,(function(e){u=u&&"passed"===e.body}));var c=function(e){r.emit(Le.z.STATE_CHANGED,e),o=e},f=function(){var e=(0,i.Z)(a().mark((function e(n,t){var i,o,s,u,f,d,p,m,v,h,E;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ne.api.Payload.fromObject(t),!(o=Ne.api.Payload.verify(i))){e.next=4;break}throw o;case 4:return s=new(Ue())((function(e){var n=Ne.api.Response.fromObject(e),t=Ne.api.Response.verify(n);if(t)G.Tb(new TypeError("invalid payload received"),(function(r){return r.setExtras({validationError:t,payload:i,message:e,response:n})}));else switch(n.body){case"error":return r.emit(Le.z.ERROR,n.error);case"instructionResult":return r.emit(Le.z.INSTRUCTION_RESULT,n.instructionResult);case"testResult":return r.emit(Le.z.TEST_RESULT,n.testResult);case"status":switch(n.status){case Ne.api.Status.Ready:return c(Le.Z.Ready);case Ne.api.Status.Building:return c(Le.Z.Building);case Ne.api.Status.Running:return c(Le.Z.Running)}}})),u=n.onCommand((function(e){if(e.output)try{s.submit(e.output)}catch(m){G.Tb(new SyntaxError("invalid response received from i/o testing binary"),(function(t){return t.setExtras({err:m,payload:i,cmd:e})}))}})),f=n.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:l.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),e.next=9,new Promise((function(e,n){var t,i=function(){t(),e()};r.once(Le.z.STATE_CHANGED,i);var o=setTimeout((function(){t(),n(new Error("timeout while waiting for iotester to start"))}),2e4);t=function(){clearTimeout(o),r.off(Le.z.STATE_CHANGED,i)}}));case 9:return e.next=11,n.request({input:JSON.stringify(i)+"\n"});case 11:if((d=e.sent).ok){e.next=17;break}throw m=new Error(null!==(p=d.error)&&void 0!==p?p:"unexpected error occurred while sending input to i/o testing binary"),G.Tb(m,(function(e){return e.setExtra("status",d)})),m;case 17:return e.next=19,f;case 19:(v=e.sent).ok||(E=new Error(null!==(h=v.error)&&void 0!==h?h:"unexpected error occurred while executing i/o testing binary"),G.Tb(E,(function(e){return e.setExtra("result",v)}))),u();case 22:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return{run:function(e){if(o!==Le.Z.Idle)throw new Error("iotester already running");return c(Le.Z.Starting),s=new Date,u=!0,t().then((function(){return new Promise((function(t,r){var i=n.openChannel({service:"exec"},(function(n){if(n.error)return r(n.error),i;var o="",a="",s=n.channel.onCommand((function(e){e.log?o+=e.log:e.stderr&&(a+=e.stderr)}));return t(f(n.channel,e).finally((function(){s(),i(),(a||o)&&G.Tb(new Error("logs received from io tseter"),(function(n){return n.setExtras({logs:o,stderr:a,payload:e})}))}))),i}))}))})).catch((function(e){return u=!1,Promise.reject(e)})).finally((function(){return c(Le.Z.Idle)}))},get lastRunAt(){return s},get state(){return o},get lastRunDidPass(){return u},onInstructionResult:function(e){return r.on(Le.z.INSTRUCTION_RESULT,e),function(){r.off(Le.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return r.on(Le.z.STATE_CHANGED,e),function(){r.off(Le.z.STATE_CHANGED,e)}},onTestResult:function(e){return r.on(Le.z.TEST_RESULT,e),function(){r.off(Le.z.TEST_RESULT,e)}},onError:function(e){return r.on(Le.z.ERROR,e),function(){r.off(Le.z.ERROR,e)}}}}!function(e){e.ANCHORS_ADDED="ANCHORS_ADDED",e.ANCHORS_REMOVED="ANCHORS_REMOVED",e.PORTAL_UPDATED="PORTAL_UPDATED",e.THREAD_CREATED="THREADS_CREATED",e.CODE_EXPLAINED="CODE_EXPLAINED"}(_e||(_e={}));var Fe=t(25497),Ge=t(81700),Me=t.n(Ge);function Ve(e,n){return Me()(e,{extended:!0,globstar:!0}).test(n)}function He(e,n){return e&&n?e.globPattern===n.globPattern&&(JSON.stringify(e.startCommand)===JSON.stringify(n.startCommand)&&(JSON.stringify(e.startCommand)===JSON.stringify(n.startCommand)&&(e.initializationOptionsJson===n.initializationOptionsJson&&e.configurationJson===n.configurationJson))):Boolean(e)===Boolean(n)}function je(e){return Be.apply(this,arguments)}function Be(){return Be=(0,i.Z)(a().mark((function e(n){var t,r,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:0,e.next=3,n.exec("pwd");case 3:if(null===(r=e.sent).error){e.next=8;break}if(!(t>5)){e.next=7;break}return e.abrupt("return",{error:new Error("Could not get cwd "+r.error),workingDirectory:null});case 7:return e.abrupt("return",je(n,t+1));case 8:return e.abrupt("return",{error:null,workingDirectory:r.output.replace("\n","")});case 9:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}function We(e){var n=e.runnerMode,t=void 0===n?"shellrunner":n,r=e.onUnrecoverableError,o=e.openFile,c=(0,s.Z)({onUnrecoverableError:r}),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=function(e){S()(m,e)||(m=e,u.emit(y.INSTRUCTIONS_VIEWER_TOGGLED,e))},t=function(e){S()(h,e)||(h=e,u.emit(y.SESSION_STATE_CHANGED,h))},r=function(e){c!==e&&(c=e,u.emit(y.PREVIEWED_FILE_CHANGED,e))},i=function(e){S()(e,v)||(v=e,u.emit(y.CURSOR_POSITION_CHANGED,e))},o=function(e){d!==e&&(d=e,u.emit(y.COMMAND_BAR_TOGGLED,d))},a=function(e){p!==e&&(p=e,u.emit(y.CONFIG_FILE_VISIBILITY_TOGGLED,p))},s=function(e,n){var t=n||h.openFiles.length;if(e<0||e>=t||!Number.isInteger(e))throw new Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(t))},u=(0,x.ZP)();u.setMaxListeners(1e3);var c=null,l=null,f=[],d=!1,p=!1,m=!1,v={column:1,lineNumber:1,offset:0},h={openFiles:[],activeTab:0},E=window.performance.now(),b=0;return{onSessionStateChanged:function(e){return u.on(y.SESSION_STATE_CHANGED,e),function(){u.removeListener(y.SESSION_STATE_CHANGED,e)}},onPreviewedFileChanged:function(e){return u.on(y.PREVIEWED_FILE_CHANGED,e),function(){u.removeListener(y.PREVIEWED_FILE_CHANGED,e)}},onCursorPositionChanged:function(e){return u.on(y.CURSOR_POSITION_CHANGED,e),function(){u.removeListener(y.CURSOR_POSITION_CHANGED,e)}},onCommandBarToggled:function(e){return u.on(y.COMMAND_BAR_TOGGLED,e),function(){u.removeListener(y.COMMAND_BAR_TOGGLED,e)}},onHiddenFileVisibilityToggled:function(e){return u.on(y.CONFIG_FILE_VISIBILITY_TOGGLED,e),function(){u.removeListener(y.CONFIG_FILE_VISIBILITY_TOGGLED,e)}},onDeeplinkUpdated:function(e){return u.on(y.DEEPLINK_CHANGED,e),l&&(e(l),l=null),function(){u.removeListener(y.DEEPLINK_CHANGED,e)}},onEditorFocused:function(e){return u.on(y.EDITOR_FOCUSED,e),function(){u.removeListener(y.EDITOR_FOCUSED,e)}},closeTab:function(e){s(e);var n=h.openFiles.slice(),r=h.activeTab;e<=h.activeTab&&0!==h.activeTab&&r--,n.splice(e,1),t({openFiles:n,activeTab:r})},closeFile:function(e){var n=h.openFiles.indexOf(e);n>-1&&this.closeTab(n)},openFile:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile)e.openFile({path:n,newTab:r.newTab,col:r.col,line:r.line});else{var i=r.tabIndex,o=r.newTab,a=f.indexOf(n);if(-1!==a?(f.splice(a),f.unshift(n)):(f.unshift(n),f.length>5&&f.pop()),void 0===i)if(h.openFiles.includes(n))t((0,k.Z)((0,D.Z)({},h),{activeTab:h.openFiles.indexOf(n)}));else{var u=h.openFiles.slice();if(o){var c=0===u.length?0:h.activeTab+1;return u.splice(c,0,n),void t({openFiles:u,activeTab:c})}var l=h.activeTab;u.splice(l,1,n),t({openFiles:u,activeTab:l})}else{s(i,h.openFiles.length+1);var d=h.openFiles.slice(),p=h.openFiles.indexOf(n);if(-1===p)return d.splice(i,1,n),void t({openFiles:d,activeTab:d.indexOf(n)});if(p===i)return void t((0,k.Z)((0,D.Z)({},h),{activeTab:d.indexOf(n)}));d.splice(p,1),d.splice(i,0,n);var m=d.indexOf(n);t({openFiles:d,activeTab:m})}}},moveFile:function(e,n){var r=h.openFiles.map((function(t){return t===e?n:(0,R.yr)(e,t)?(0,R.hk)(e,n,t):t}));t((0,k.Z)((0,D.Z)({},h),{openFiles:r}))},deleteFile:function(e){var n=h.openFiles[h.activeTab],r=h.openFiles.filter((function(n){return n!==e&&!(0,R.yr)(e,n)})),i=r.includes(n)?r.indexOf(n):r.length-1,o=Math.max(0,i),a=f.findIndex((function(n){return n===e}));a&&f.splice(a,1),t({openFiles:r,activeTab:o})},updateDeeplink:function(e){u.emit(y.DEEPLINK_CHANGED,e),l=e},focusEditor:function(){u.emit(y.EDITOR_FOCUSED)},writeToTerminal:function(e){u.emit(y.TERMINAL_WRITE_CALLED,e)},clearTerminal:function(){u.emit(y.TERMINAL_CLEAR_CALLED)},onTerminalWrite:function(e){return u.on(y.TERMINAL_WRITE_CALLED,e),function(){u.off(y.TERMINAL_WRITE_CALLED,e)}},onTerminalClear:function(e){return u.on(y.TERMINAL_CLEAR_CALLED,e),function(){u.off(y.TERMINAL_CLEAR_CALLED,e)}},getActiveFile:function(){var e=h.openFiles,n=h.activeTab;if(0!==e.length)return e[n]},getCursorPosition:function(){return v},getRecentFiles:function(){return f},setPreviewedFile:r,setCursorPosition:i,setIsCommandBarOpen:o,setAreHiddenFilesVisible:a,getPreviewedFile:function(){return c},getIsCommandBarOpen:function(){return d},getAreHiddenFilesVisible:function(){return p},onWpxTaskCompletionSurveyReady:function(e){return u.on(y.WPX_TASK_COMPLETION_SURVEY_READY,e),function(){u.removeListener(y.WPX_TASK_COMPLETION_SURVEY_READY,e)}},incrementProjectRunCount:function(){if(++b>=5){var e=window.performance.now()-E;setTimeout((function(){u.emit(y.WPX_TASK_COMPLETION_SURVEY_READY)}),Math.max(I-e,0))}},getState:function(){return h},getInstructionsViewerVisible:function(){return m},setInstructionsViewerVisible:n,onInstructionsViewerToggled:function(e){return u.on(y.INSTRUCTIONS_VIEWER_TOGGLED,e),function(){u.off(y.INSTRUCTIONS_VIEWER_TOGGLED,e)}}}}({openFile:o}),d=(0,_.Z)({container:c}),p=w({container:c}),m=(0,oe.Z)({container:c,fs:d}),v=function(e){var n=e.container,t=(0,x.ZP)(),r=null;function o(){return s.apply(this,arguments)}function s(){return(s=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||"open"!==r.status){e.next=2;break}return e.abrupt("return",r);case 2:return e.abrupt("return",new Promise((function(e){t.once(ie.CHANNEL_OPENED,(function(n){e(n)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return c.apply(this,arguments)}function c(){return c=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var r=!1,i=n.openChannel({service:"nix"},(function(n){var o=n.channel,a=n.error;if(r)throw new Error("getAnonymousChannel fulfilled but openChannelCb called again");if(!a)return e([o,i]),function(e){e.willReconnect&&i(),r||(r=!0,t(new Error("Expected getAnonymousChannel promise to be fulfilled when closing")))};t(a)}))})));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}n.openChannel({service:"nix"},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("No channel returned, channel expected");return r=n,t.emit(ie.CHANNEL_OPENED,n),function(){r=null}}}));var l={searchPackages:function(){var e=(0,i.Z)(a().mark((function e(n){var t,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U.Z,e.next=3,u();case 3:return e.t1=e.sent,t=(0,e.t0)(e.t1,2),r=t[0],i=t[1],e.next=9,r.request({nixPackageSearchRequest:{query:n}});case 9:if(!(o=e.sent).channelClosed){e.next=12;break}return e.abrupt("return",{error:"Channel closed",packages:null});case 12:if(i(),!o.error){e.next=15;break}return e.abrupt("return",{error:o.error,packages:null});case 15:if(o.nixPackageSearchResponse){e.next=17;break}return e.abrupt("return",{error:"Response expected but none received",packages:null});case 17:return e.abrupt("return",{packages:o.nixPackageSearchResponse.packages,error:null});case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),listPackages:(0,i.Z)(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U.Z,e.next=3,u();case 3:return e.t1=e.sent,n=(0,e.t0)(e.t1,2),t=n[0],r=n[1],e.next=9,t.request({nixPackageListRequest:{}});case 9:if(!(i=e.sent).channelClosed){e.next=12;break}return e.abrupt("return",{error:"Channel closed",packages:null});case 12:if(r(),!i.error){e.next=15;break}return e.abrupt("return",{error:i.error,packages:null});case 15:if(i.nixPackageListResponse){e.next=17;break}return e.abrupt("return",{error:"Response expected but none received",packages:null});case 17:return e.abrupt("return",{packages:i.nixPackageListResponse.packages,error:null});case 18:case"end":return e.stop()}}),e)}))),getChannels:(0,i.Z)(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U.Z,e.next=3,u();case 3:return e.t1=e.sent,n=(0,e.t0)(e.t1,2),t=n[0],r=n[1],e.next=9,t.request({nixChannelsRequest:{}});case 9:if(!(i=e.sent).channelClosed){e.next=12;break}return e.abrupt("return",{error:"Channel closed",channels:null});case 12:if(r(),!i.error){e.next=15;break}return e.abrupt("return",{error:i.error,channels:null});case 15:if(i.nixChannelsResponse){e.next=17;break}return e.abrupt("return",{error:"Response expected but none received",channels:null});case 17:return e.abrupt("return",{channels:i.nixChannelsResponse.channels,error:null});case 18:case"end":return e.stop()}}),e)}))),getLatestStableChannel:(0,i.Z)(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U.Z,e.next=3,u();case 3:return e.t1=e.sent,n=(0,e.t0)(e.t1,2),t=n[0],r=n[1],e.next=9,t.request({nixChannelLatestStableRequest:{}});case 9:if(!(i=e.sent).channelClosed){e.next=12;break}return e.abrupt("return",{error:"Channel closed",channel:null});case 12:if(r(),!i.error){e.next=15;break}return e.abrupt("return",{error:i.error,channel:null});case 15:if(i.nixChannelLatestStableResponse){e.next=17;break}return e.abrupt("return",{error:"Response expected but none received",channel:null});case 17:return e.abrupt("return",{channel:i.nixChannelLatestStableResponse.channel,error:null});case 18:case"end":return e.stop()}}),e)}))),addPackages:function(){var e=(0,i.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return t=e.sent,e.next=5,t.request({nixPackageAddRequest:{packages:n}});case 5:if(!(r=e.sent).channelClosed){e.next=8;break}return e.abrupt("return","channel closed");case 8:if(!r.error){e.next=10;break}return e.abrupt("return",r.error);case 10:if(r.nixPackageAddResponse){e.next=12;break}return e.abrupt("return","response expected but non received");case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),removePackages:function(){var e=(0,i.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return t=e.sent,e.next=5,t.request({nixPackageRemoveRequest:{packages:n}});case 5:if(!(r=e.sent).channelClosed){e.next=8;break}return e.abrupt("return","channel closed");case 8:if(!r.error){e.next=10;break}return e.abrupt("return",r.error);case 10:if(r.nixPackageRemoveResponse){e.next=12;break}return e.abrupt("return","response expected but non received");case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()};return l}({container:c}),h=(0,u.Z)({container:c,dotReplit:m}),E=function(e){var n=e.container,t=(0,x.ZP)(),r=null,o=[],s=[];function u(){return c.apply(this,arguments)}function c(){return(c=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r);case 2:return e.abrupt("return",new Promise((function(e){t.once(T.MESSAGES_LOADED,(function(){e(r)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.openChannel({service:"chat",name:"chatter"},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("Expected channel");return n.onCommand((function(e){switch(e.body){case"chatMessage":var i=e.chatMessage;if(!i||!i.username||!i.text)throw new Error("expected a chat message in the response");o.push(i),t.emit(T.MESSAGE_RECEIVED,{text:i.text,username:i.username});break;case"chatTyping":var a=e.chatTyping;if(!a||!a.username)return;var u=a.username,c=a.typing;c&&!s.includes(u)&&s.push(u),!c&&s.includes(u)&&s.splice(s.indexOf(u),1),t.emit(T.USER_TYPING_UPDATED,{username:u,isTyping:Boolean(c)});break;case"chatScrollback":var l=e.chatScrollback;if(!(null===l||void 0===l?void 0:l.scrollback))return;l.scrollback.forEach((function(e){return o.push(e)})),r=n,t.emit(T.MESSAGES_LOADED,o)}})),function(){r=null}}})),{sendMessage:function(e){return(0,i.Z)(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:r=n.sent,o.push(e),r.send({chatMessage:e}),t.emit(T.MESSAGE_SENT,e);case 6:case"end":return n.stop()}}),n)})))()},onMessageReceived:function(e){return t.on(T.MESSAGE_RECEIVED,e),function(){t.removeListener(T.MESSAGE_RECEIVED,e)}},onMessageSent:function(e){return t.on(T.MESSAGE_SENT,e),function(){t.removeListener(T.MESSAGE_SENT,e)}},updateUserTyping:function(e){return(0,i.Z)(a().mark((function n(){var t,r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:t=n.sent,r=e.username,i=e.isTyping,t.send({chatTyping:{username:r,typing:i}});case 5:case"end":return n.stop()}}),n)})))()},onUserTypingUpdated:function(e){return t.on(T.USER_TYPING_UPDATED,e),function(){t.removeListener(T.USER_TYPING_UPDATED,e)}},onMessagesLoaded:function(e){return t.on(T.MESSAGES_LOADED,e),function(){t.removeListener(T.MESSAGES_LOADED,e)}},getMessages:function(){return o},getUsersTyping:function(){return s}}}({container:c}),b=function(){var e=(0,i.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("kaboom"!==(null===(t=c.getContext())||void 0===t?void 0:t.repl.language)){e.next=4;break}return e.next=4,Re(d);case 4:return e.next=6,d.flush();case 6:return n&&n("prerun flush finished"),e.next=9,(0,Oe.Z)(c,m);case 9:if(!e.sent){e.next=14;break}return e.next=12,h.installPackages();case 12:r=e.sent,n&&n("prerun packager install finished",{success:r});case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=(0,C.Z)({mode:t,container:c,beforeRun:b}),P=function(e){var n=e.container,t=e.beforeRun,r=(0,L.u)(null);return{mainClient:r,connect:function(){return new Promise((function(e,i){r.current||n.openChannel({service:"debugger"},(function(n){if(!n.error)return r.current=te({channel:n.channel,beforeRun:t}),e(null),function(){r.current=null};i(n.error)}))}))}}}({container:c,beforeRun:b}),Z=(0,N.Z)({beforeRun:b,getMainFileContents:function(e){return(0,O.Z)({language:e,fs:d})}}),F=function(e){var n,t=e.container,r=(0,x.ZP)(),o=new Promise((function(e){return n=e})),s=null;return t.openChannel({service:"chat",name:"broadcaster"},(function(e){if(!e.error){var t=e.channel,i=e.context;if(!t)throw new Error("Expected channel");return i.currentUser&&(s=i.currentUser.username),t.onCommand((function(e){if("chatMessage"===e.body){var n=e.chatMessage;if(!n||!n.username||!n.text)throw new Error("unexpected broadcast without a message");r.emit(A.MESSAGE_RECEIVED,{text:n.text,username:n.username})}})),n(t),function(){o=new Promise((function(e){return n=e}))}}})),{broadcastMessage:function(e){var n=e.text;return(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o;case 2:if(t=e.sent,s){e.next=5;break}throw new Error("Cannot broadcast without as username. Is currentUser in context?");case 5:t.send({chatMessage:{text:n,username:s}});case 6:case"end":return e.stop()}}),e)})))()},onBroadcastReceived:function(e){return r.on(A.MESSAGE_RECEIVED,e),function(){r.removeListener(A.MESSAGE_RECEIVED,e)}}}}({container:c}),G=function(e){var n=e.container,t=function(e){i!==e&&(i=e,r.emit(ye.ON_CLIENT,i))},r=(0,x.ZP)(),i=null,o=!1,a=0,s=null,u=function(){t(null)},c=!1,f={start:function(){c||(c=!0,u=n.openChannel({service:"lsp",skip:function(e){if(e.repl.language.startsWith("nix")||e.repl.language.startsWith("html"))return!0;var n=le().get(e.repl.language).entrypoint;return!(0,he.D)(n)||!le().supportsLSP(e.repl.language)}},(function(e){var r=e.error,i=e.channel,u=e.context;if(!r){var c=!1,d=function(){},p=le().get(u.repl.language).entrypoint,m=(0,he.D)(p);if(!m)throw new Error("Expected languageId");var v=we({connection:{read:function(e){i.onCommand((function(n){n.output&&e(n.output)}))},write:function(e){"open"===i.status&&i.send({input:e})},didClose:function(){return"open"!==i.status}},clientId:"legacy-"+m,isSupportedFile:function(e){var n=(0,he.D)(e);return n===m||!(!De.includes(m)||!De.includes(n||""))}});n.exec("pwd").then((function(e){if(!c){var n=e.output?e.output.replace(/\n/,""):null;if(!n)throw new Error("Expected pwd");if(!v)throw new Error("Expected client");v.initialize({pwd:n}),d=v.onServerStateChange((function(e){c||e===ue.a.INITIALIZED&&t(v)}))}}));var h=i.onCommand((function(e){e.output||e.state===l.api.State.Stopped&&(se.kg.error("LSP server unexpectedly disconnected",{lspId:m,appService:"lsp"}),a++,f.stop(),s=setTimeout((function(){return f.start()}),1e3*Math.pow(2,a)))}));return function(){v&&(v.destroy(),t(null)),c=!0,d(),h(),o&&(o=!1)}}})))},getClient:function(){return i},onClient:function(e){return(0,x.NH)(r,ye.ON_CLIENT,e)},stop:function(){if(o=!0,c=!1,null!==s&&clearTimeout(s),i){var e=i.onServerStateChange((function(n){n===ue.a.EXITED&&(e(),u())}));return i.destroy(),void t(null)}u()}};return f}({container:c}),M=function(e){var n=e.container,t=e.dotReplit,r=e.allowNonNix,i=void 0!==r&&r,o=function(e){var n=c[e];if(!n)throw new Error("configId was never configured");var t=n.client;if(t){n.client=null,t.destroy();var r=!0,i=!1,o=void 0;try{for(var a,l=s[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var f=(0,U.Z)(a.value,2),d=f[0],p=f[1];if(u.get(d)===t){u.delete(d);var m=!0,v=!1,h=void 0;try{for(var E,x=p[Symbol.iterator]();!(m=(E=x.next()).done);m=!0)(0,E.value)(null)}catch(b){v=!0,h=b}finally{try{m||null==x.return||x.return()}finally{if(v)throw h}}}}}catch(b){i=!0,o=b}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}n.closeChannel(),delete c[e]},a=function(e,n){if(c[e])throw new Error("configId is already configured");c[e]=(0,D.Z)({client:null,closeChannel:function(){}},n),f&&d(e)},s=new Map,u=new Map,c=Object.create(null),f=!0;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!f)throw new Error("Called startClient while not enabled");if(!c[e])throw new Error("No config found for language");var r=c[e],o=r.client,a=(r.closeChannel,(0,fe.Z)(r,["client","closeChannel"]));if(o)throw new Error("A client is already set for language");var p=new Date,m=[],v=n.openChannel({service:"lsp2",skip:function(e){if(i)return!1;var n=e.repl.language;return!n.startsWith("nix")&&!n.startsWith("html")}},(function(r){var i=r.channel;if(i){var o=null,h=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m.forEach((function(e){return e()})),null===o||void 0===o||o.destroy(),c[e]&&c[e].client===o&&(c[e].client=null),n&&f||v();var t=!0,r=!1,i=void 0;try{for(var a,l=s[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var d=(0,U.Z)(a.value,2),p=d[0],h=d[1];if(u.get(p)===o){u.delete(p);var E=!0,x=!1,b=void 0;try{for(var g,S=h[Symbol.iterator]();!(E=(g=S.next()).done);E=!0){(0,g.value)(null)}}catch(w){x=!0,b=w}finally{try{E||null==S.return||S.return()}finally{if(x)throw b}}}}}catch(w){r=!0,i=w}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}};return i.request({startLSP:{language:e}}).then((function(r){r.ok&&f&&c[e]&&(m.push(i.onCommand((function(n){if(n.state===l.api.State.Stopped){if(se.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),h(),!f)return;if((new Date).getTime()-p.getTime()<5e3){if(t<3){var r=1e3*Math.pow(2,t);setTimeout((function(){f&&c[e]&&d(e,t+1)}),r)}}else d(e)}}))),je(n).then((function(n){if(He(c[e],a)&&"open"===i.status&&!n.error){var t;if(o=we({connection:{read:function(e){i.onCommand((function(n){n.output&&e(n.output)}))},write:function(e){"open"===i.status&&i.send({input:e})},didClose:function(){return"open"!==i.status}},clientId:e,isSupportedFile:function(e){return Ve(a.globPattern,e)},getWorkspaceConfiguration:function(){if(!a.configurationJson)return null;var e=null;try{e=JSON.parse(a.configurationJson)}catch(n){se.kg.error("Failed to parse LSP workspace configuration",{configurationJson:a.configurationJson})}return e}}),a.initializationOptionsJson)try{t=JSON.parse(a.initializationOptionsJson)}catch(r){se.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:a.initializationOptionsJson})}o.initialize({pwd:n.workingDirectory,initializationOptions:t}).catch((function(e){if("Initialize request cancelled"!==e.message)throw e})),m.push(o.onServerStateChange((function(n){if("open"===i.status&&o&&He(c[e],a)&&n===ue.a.INITIALIZED){c[e].client=o;var t=!0,r=!1,l=void 0;try{for(var f,d=s[Symbol.iterator]();!(t=(f=d.next()).done);t=!0){var p=(0,U.Z)(f.value,2),m=p[0],v=p[1];if(Ve(a.globPattern,m)&&!u.has(m)){u.set(m,o);var h=!0,E=!1,x=void 0;try{for(var b,g=v[Symbol.iterator]();!(h=(b=g.next()).done);h=!0)(0,b.value)(o)}catch(S){E=!0,x=S}finally{try{h||null==g.return||g.return()}finally{if(E)throw x}}}}}catch(S){r=!0,l=S}finally{try{t||null==d.return||d.return()}finally{if(r)throw l}}}})))}})))})),function(e){var n=e.willReconnect;h(n)}}}));c[e].closeChannel=v}return t.watch((function(e){if(e.error){if(e.error===Fe.Yt.NotFound){var n=!0,t=!1,r=void 0;try{for(var i,s=Object.keys(c)[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;o(u)}}catch(H){t=!0,r=H}finally{try{n||null==s.return||s.return()}finally{if(t)throw r}}}}else if(e.config.languages){var l={},f=!0,d=!1,p=void 0;try{for(var m,v=Object.entries(e.config.languages)[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var h,E,x=(0,U.Z)(m.value,2),b=x[0],g=x[1];g.pattern&&g.languageServer&&g.languageServer.startCommand&&(l[b]={globPattern:g.pattern,startCommand:g.languageServer.startCommand,initializationOptionsJson:null!==(h=g.languageServer.initializationOptionsJson)&&void 0!==h?h:void 0,configurationJson:null!==(E=g.languageServer.configurationJson)&&void 0!==E?E:void 0})}}catch(H){d=!0,p=H}finally{try{f||null==v.return||v.return()}finally{if(d)throw p}}var S=!0,w=!1,y=void 0;try{for(var D,k=Object.keys(c)[Symbol.iterator]();!(S=(D=k.next()).done);S=!0){var I=D.value;l[I]||o(I)}}catch(H){w=!0,y=H}finally{try{S||null==k.return||k.return()}finally{if(w)throw y}}var R=!0,T=!1,C=void 0;try{for(var A,_=Object.keys(l)[Symbol.iterator]();!(R=(A=_.next()).done);R=!0){var O=A.value,N=c[O],L=l[O];N?He(N,L)||(o(O),a(O,L)):a(O,L)}}catch(H){T=!0,C=H}finally{try{R||null==_.return||_.return()}finally{if(T)throw C}}}else{var P=!0,Z=!1,F=void 0;try{for(var G,M=Object.keys(c)[Symbol.iterator]();!(P=(G=M.next()).done);P=!0){var V=G.value;o(V)}}catch(H){Z=!0,F=H}finally{try{P||null==M.return||M.return()}finally{if(Z)throw F}}}})),{disable:function(){if(f){f=!1;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.values(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o,a=r.value;a.closeChannel(),null===(o=a.client)||void 0===o||o.destroy(),a.client=null;var l=!0,d=!1,p=void 0;try{for(var m,v=s[Symbol.iterator]();!(l=(m=v.next()).done);l=!0){var h=(0,U.Z)(m.value,2),E=h[0],x=h[1];if(u.has(E)){u.delete(E);var b=!0,g=!1,S=void 0;try{for(var w,y=x[Symbol.iterator]();!(b=(w=y.next()).done);b=!0)(0,w.value)(null)}catch(D){g=!0,S=D}finally{try{b||null==y.return||y.return()}finally{if(g)throw S}}}}}catch(D){d=!0,p=D}finally{try{l||null==v.return||v.return()}finally{if(d)throw p}}}}catch(D){n=!0,t=D}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},enable:function(){if(!f){f=!0;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.keys(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)d(r.value)}catch(o){n=!0,t=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},onClient:function(e,n){var t;s.has(e)||s.set(e,[]),null===(t=s.get(e))||void 0===t||t.push(n);var r=u.get(e);if(r)n(r);else{var i=!0,o=!1,a=void 0;try{for(var l,f=Object.values(c)[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var d=l.value;if(Ve(d.globPattern,e)){d.client&&n(d.client);break}}}catch(p){o=!0,a=p}finally{try{i||null==f.return||f.return()}finally{if(o)throw a}}}return function(){s.set(e,(s.get(e)||[]).filter((function(e){return e!==n})))}}}}({container:c,dotReplit:m}),V=Ze({container:c,beforeRun:b}),H=function(e){var n=e.fs,t={},r={},o={},s=(0,x.ZP)();function u(e){return c.apply(this,arguments)}function c(){return c=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=(0,i.Z)(a().mark((function e(t){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,new Promise((function(e){r=n.watchOtFile(t.path,{onReady:function(n){var i=n.transformSelection,o=n.version;if(r(),o===t.otVersion)return e({indexStart:t.indexStart,indexEnd:t.indexEnd,version:t.otVersion});e(i({indexStart:t.indexStart,indexEnd:t.indexEnd,versionFrom:t.otVersion,versionTo:o}))}})}));case 3:return i=e.sent,o=(0,k.Z)((0,D.Z)({},t),{indexStart:i.indexStart,indexEnd:i.indexEnd,otVersion:i.version}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return{onAnchorPortalSet:function(e,n){var t=function(t){t.id===e&&n(t)};return s.on(_e.PORTAL_UPDATED,t),function(){s.removeListener(_e.PORTAL_UPDATED,t)}},addAnchors:function(e){return(0,i.Z)(a().mark((function n(){var i,o,c,l,f,d,p,m,v,h,E,x,b;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(i=!0,o=!1,c=void 0,n.prev=1,l=e[Symbol.iterator]();!(i=(f=l.next()).done);i=!0)d=f.value,t[d.id]=d;n.next=9;break;case 5:n.prev=5,n.t0=n.catch(1),o=!0,c=n.t0;case 9:n.prev=9,n.prev=10,i||null==l.return||l.return();case 12:if(n.prev=12,!o){n.next=15;break}throw c;case 15:return n.finish(12);case 16:return n.finish(9);case 17:return n.next=19,u(e);case 19:for(p=n.sent,m=!0,v=!1,h=void 0,n.prev=21,E=p[Symbol.iterator]();!(m=(x=E.next()).done);m=!0)b=x.value,r[b.id]=b;n.next=29;break;case 25:n.prev=25,n.t1=n.catch(21),v=!0,h=n.t1;case 29:n.prev=29,n.prev=30,m||null==E.return||E.return();case 32:if(n.prev=32,!v){n.next=35;break}throw h;case 35:return n.finish(32);case 36:return n.finish(29);case 37:s.emit(_e.ANCHORS_ADDED,p);case 38:case"end":return n.stop()}}),n,null,[[1,5,9,17],[10,,12,16],[21,25,29,37],[30,,32,36]])})))()},removeAnchors:function(e){return(0,i.Z)(a().mark((function n(){var i,u,c,l,f,d,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=[],u=!0,c=!1,l=void 0,n.prev=2,f=e[Symbol.iterator]();case 4:if(u=(d=f.next()).done){n.next=15;break}if(p=d.value,t[p]){n.next=8;break}return n.abrupt("continue",12);case 8:i.push(t[p]),delete o[p],delete r[p],delete t[p];case 12:u=!0,n.next=4;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(2),c=!0,l=n.t0;case 21:n.prev=21,n.prev=22,u||null==f.return||f.return();case 24:if(n.prev=24,!c){n.next=27;break}throw l;case 27:return n.finish(24);case 28:return n.finish(21);case 29:s.emit(_e.ANCHORS_REMOVED,i);case 30:case"end":return n.stop()}}),n,null,[[2,17,21,29],[22,,24,28]])})))()},getAnchors:function(e){return(0,i.Z)(a().mark((function n(){var i,o,s,c,l,f,d,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object.values(t).filter((function(n){return n.path===e})),n.next=3,u(i);case 3:for(o=n.sent,s=!0,c=!1,l=void 0,n.prev=5,f=o[Symbol.iterator]();!(s=(d=f.next()).done);s=!0)p=d.value,r[p.id]=p;n.next=13;break;case 9:n.prev=9,n.t0=n.catch(5),c=!0,l=n.t0;case 13:n.prev=13,n.prev=14,s||null==f.return||f.return();case 16:if(n.prev=16,!c){n.next=19;break}throw l;case 19:return n.finish(16);case 20:return n.finish(13);case 21:return n.abrupt("return",o);case 22:case"end":return n.stop()}}),n,null,[[5,9,13,21],[14,,16,20]])})))()},createThread:function(e){s.emit(_e.THREAD_CREATED,e)},explainCode:function(e){s.emit(_e.CODE_EXPLAINED,e)},onThreadCreated:function(e){return s.on(_e.THREAD_CREATED,e),function(){s.off(_e.THREAD_CREATED,e)}},onCodeExplained:function(e){return s.on(_e.CODE_EXPLAINED,e),function(){s.off(_e.CODE_EXPLAINED,e)}},onAnchorsAdded:function(e){return s.on(_e.ANCHORS_ADDED,e),function(){s.removeListener(_e.ANCHORS_ADDED,e)}},onAnchorsRemoved:function(e){return s.on(_e.ANCHORS_REMOVED,e),function(){s.removeListener(_e.ANCHORS_REMOVED,e)}},setAnchorPortal:function(e){t[e.id]&&r[e.id]&&(o[e.id]=e,s.emit(_e.PORTAL_UPDATED,e))}}}({fs:d});return{session:f,presence:p,packager:h,container:c,fs:d,chat:E,runner:g,debuggest:P,replbox:Z,broadcast:F,dotReplit:m,nixService:v,lsp:G,lspnix:M,iotester:V,anchorer:H}}},9556:function(e,n,t){var r,i;t.d(n,{Z:function(){return i},z:function(){return r}}),function(e){e.INSTRUCTION_RESULT="INSTRUCTION_RESULT",e.TEST_RESULT="TEST_RESULT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED"}(r||(r={})),function(e){e[e.Idle=0]="Idle",e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Building=3]="Building",e[e.Running=4]="Running"}(i||(i={}))},11625:function(e,n,t){t.d(n,{D:function(){return o}});var r=t(1864),i=[{id:"abap",extensions:[".abap"]},{id:"aes",extensions:[".aes"]},{id:"apex",extensions:[".cls"]},{id:"azcli",extensions:[".azcli"]},{id:"bat",extensions:[".bat",".cmd"]},{id:"bibtex",extensions:[".bib",".bbl"]},{id:"bicep",extensions:[".bicep"]},{id:"c",extensions:[".c",".h"]},{id:"cameligo",extensions:[".mligo"]},{id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"]},{id:"coffeescript",extensions:[".coffee"]},{id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"]},{id:"csharp",extensions:[".cs",".csx",".cake"]},{id:"css",extensions:[".css"]},{id:"d",extensions:[".d"]},{id:"dart",extensions:[".dart"]},{id:"diff",extensions:[".diff",".patch"]},{id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"]},{id:"ecl",extensions:[".ecl"]},{id:"ejs",extensions:[".ejs"]},{id:"elisp",extensions:[".el"]},{id:"elixir",extensions:[".ex",".exs"]},{id:"elm",extensions:[".elm"]},{id:"erlang",extensions:[".erl",".hrl"]},{id:"flow9",extensions:[".flow"]},{id:"forth",extensions:[".fth"]},{id:"fortran",extensions:[".f",".for",".f90"]},{id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"]},{id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"]},{id:"gitignore"},{id:"glsl",extensions:[".vert",".tesc",".tese",".geom",".frag",".comp",".glsl",".glslv",".glslf",".glslg"]},{id:"go",extensions:[".go"]},{id:"graphql",extensions:[".graphql",".gql"]},{id:"groovy",extensions:[".groovy",".gvy",".gy",".gsh"]},{id:"handlebars",extensions:[".handlebars",".hbs"]},{id:"haskell",extensions:[".hs",".lhs"]},{id:"hcl",extensions:[".tf",".tfvars",".hcl"]},{id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"]},{id:"erb",extensions:[".erb",".rhtml",".rhtm"]},{id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"]},{id:"jade",extensions:[".jade",".pug"]},{id:"java",extensions:[".java",".jav"]},{id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],filenames:["jakefile"]},{id:"javascriptreact",extensions:[".jsx"]},{id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"]},{id:"julia",extensions:[".jl"]},{id:"kotlin",extensions:[".kt",".kts"]},{id:"latext",extensions:[".tex"]},{id:"less",extensions:[".less"]},{id:"lexon",extensions:[".lex"]},{id:"liquid",extensions:[".liquid"]},{id:"lisp",extensions:[".lisp",".lsp",".l",".fasl"]},{id:"lua",extensions:[".lua"]},{id:"m3",extensions:[".m3",".i3",".mg",".ig"]},{id:"makefile",filenames:["Makefile","makefile","GNUmakefile"],extensions:[".mak",".MAKE"]},{id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"]},{id:"mips",extensions:[".s"]},{id:"msdax",extensions:[".dax",".msdax"]},{id:"nim",extensions:[".nim"]},{id:"objective-c",extensions:[".m"]},{id:"objective-cpp",extensions:[".mm"]},{id:"ocaml",extensions:[".ml",".mli"]},{id:"pascal",extensions:[".pas",".p",".pp"]},{id:"pascaligo",extensions:[".ligo"]},{id:"perl",extensions:[".pl"]},{id:"perl6",extensions:[".pl6",".p6",".pm6",".pod6",".t6",".raku",".rakumod",".rakutest"]},{id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"]},{id:"pla",extensions:[".pla"]},{id:"plaintext",extensions:[".txt"]},{id:"postiats",extensions:[".dats",".sats",".hats"]},{id:"powerquery",extensions:[".pq",".pqm"]},{id:"powershell",extensions:[".ps1",".psm1",".psd1"]},{id:"processing",extensions:[".pde"]},{id:"prolog",extensions:[".pro",".plg"]},{id:"proto",extensions:[".proto"]},{id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"]},{id:"qsharp",extensions:[".qs"]},{id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"]},{id:"razor",extensions:[".cshtml"]},{id:"reason",extensions:[".re",".rei"]},{id:"redis",extensions:[".redis"]},{id:"restructuredtext",extensions:[".rst"]},{id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"]},{id:"rust",extensions:[".rs",".rlib"]},{id:"sass",extensions:[".sass"]},{id:"sb",extensions:[".sb"]},{id:"scala",extensions:[".scala",".sc",".sbt"]},{id:"scheme",extensions:[".scm",".ss",".sch",".rkt"]},{id:"scss",extensions:[".scss"]},{id:"shellscript",extensions:[".sh",".bash"]},{id:"sol",extensions:[".sol"]},{id:"sparql",extensions:[".rq"]},{id:"sql",extensions:[".sql"]},{id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"]},{id:"svelte",extensions:[".svelte"]},{id:"swift",extensions:[".swift"]},{id:"systemverilog",extensions:[".sv",".svh"]},{id:"tcl",extensions:[".tcl"]},{id:"toml",extensions:[".toml"]},{id:"twig",extensions:[".twig"]},{id:"typescript",extensions:[".ts"]},{id:"typescriptreact",extensions:[".tsx"]},{id:"vb",extensions:[".vb"]},{id:"verilog",extensions:[".v",".vh"]},{id:"vue",extensions:[".vue"]},{id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"]},{id:"yaml",extensions:[".yaml",".yml"]}],o=function(e){var n=(0,r.extname)(e),t=(0,r.basename)(e),o=!0,a=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l,f,d=u.value;if((null===(l=d.extensions)||void 0===l?void 0:l.includes(n))||(null===(f=d.filenames)||void 0===f?void 0:f.includes(t)))return d.id}}catch(p){a=!0,s=p}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return null}},8415:function(e,n,t){var r;t.d(n,{a:function(){return r}}),function(e){e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED"}(r||(r={}))},80437:function(e,n){n.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",gold:"#FFC700",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"}}},39571:function(e,n,t){function r(e){return e.startsWith("/")?e:null}function i(e){var n=r(e);if(null===n)throw new Error("Expected an absolute path but got ".concat(e));return n}function o(e){return e.startsWith("/home/runner/")?e.split("/").slice(4).join("/"):null}t.d(n,{IT:function(){return r},ZF:function(){return i},om:function(){return o}})},83035:function(e,n,t){function r(e,n){if("dev"===e)return!0;if("dev"===n)return!1;for(var t=function(e){var n=[0,0,0];return e.split(".").map(Number).forEach((function(t,r){if("number"!==typeof t||isNaN(t))throw new Error("invalid version: ".concat(e));n[r]=t})),n},r=t(e),i=t(n),o=0;o<3;o++){if(i[o]>r[o])return!1;if(r[o]>i[o])return!0}return!0}function i(e,n){return!r(e,n)}t.d(n,{H:function(){return r},h:function(){return i}})}}]);
//# sourceMappingURL=9027-a646e6111bf2ec74.js.map