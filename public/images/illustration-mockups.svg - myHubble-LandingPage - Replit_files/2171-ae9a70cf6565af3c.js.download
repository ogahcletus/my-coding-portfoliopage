"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2171],{98099:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(26042),i=n(69396),a=n(10253),o=n(29815),s=n(67294),l=n(90317),c=n(93058);function d(e,t){var n=t.onReceiveAnnotationUpdate,d=void 0===n?function(){}:n,u=(0,c.Z)().showError,f=(0,a.Z)(s.useState(null),2),p=f[0],m=f[1],h=(0,l.xTD)({variables:{replId:e}}),b=function(){var e,t=null===(e=h.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},g=function(t,n){var a=t.readQuery({query:l.yiQ,variables:{replId:e}}),s=[],c=a.repl.annotationAnchors,d=c.findIndex((function(e){return e.id===n.id}));s=-1===d?(0,o.Z)(c).concat([n]):(0,o.Z)(c.slice(0,d)).concat([n],(0,o.Z)(c.slice(d+1))),t.writeQuery({query:l.yiQ,variables:{replId:e},data:(0,i.Z)((0,r.Z)({},a),{repl:(0,i.Z)((0,r.Z)({},a.repl),{annotationAnchors:s})})})},v=(0,a.Z)((0,l.ASh)({onError:function(e){return u(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return u(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationAnchor;r&&("UserError"===r.__typename?u(r.message):"AnnotationAnchor"===r.__typename&&g(e,r))}}}),1),x=v[0],Z=(0,a.Z)((0,l.gEq)({onError:function(e){return u(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return u(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationMessage;r&&("UserError"===r.__typename?u(r.message):"AnnotationAnchor"===r.__typename&&g(e,r))}}}),1),w=Z[0],y=(0,a.Z)((0,l.RpE)({onError:function(e){return u(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return u(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateAnnotationAnchor;r&&("UserError"===r.__typename?u(r.message):"AnnotationAnchor"===r.__typename&&g(e,r))}}}),1),k=y[0],j=(0,a.Z)((0,l.nAY)(),1)[0],C=(0,a.Z)((0,l.HjV)(),1)[0];(0,l.Tt1)({variables:{replId:e},onSubscriptionData:function(e){var t=e.subscriptionData.data,n=e.client,r=null===t||void 0===t?void 0:t.updatedAnnotation;r&&(g(n,r),d(r))}});var N=(0,a.Z)(s.useState([]),2),S=N[0],T=N[1];s.useEffect((function(){var e,t,n=[];"Repl"===(null===(e=h.data)||void 0===e?void 0:e.repl.__typename)&&(t=n).push.apply(t,(0,o.Z)(h.data.repl.annotationAnchors));p&&n.push((0,i.Z)((0,r.Z)({},p),{isGeneral:Boolean(p.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),T(n)}),[h,p]);var z=s.useMemo((function(){return S.find((function(e){return e.isGeneral}))}),[S]),B=s.useMemo((function(){return S.reduce((function(e,t){return t.isResolved?e:t.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[S]),R=function(e){var t=e.annotationAnchor,n=e.annotationMessage,a=e.highlight;x({variables:{annotationAnchor:t,annotationMessage:n,highlight:a},optimisticResponse:{createAnnotationAnchor:(0,i.Z)((0,r.Z)({},b(),t),{isGeneral:Boolean(t.isGeneral),__typename:"AnnotationAnchor",messages:n?[(0,i.Z)((0,r.Z)({},b(),n),{content:{text:n.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})};return{annotations:S,generalThread:z,unreadThreadCount:B,placeholderAnchorId:null===p||void 0===p?void 0:p.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;m(t)},deleteAnnotationAnchorPlaceholder:function(){m(null)},createAnnotationAnchor:R,createAnnotationMessage:function(t){var n=t.anchor,a=t.annotationMessage,s=t.highlight;(null===p||void 0===p?void 0:p.id)===n.id?(m(null),R({annotationAnchor:(0,r.Z)({},p),annotationMessage:a,highlight:s})):w({variables:{replId:e,anchorId:n.id,annotationMessage:a,highlight:s},optimisticResponse:{createAnnotationMessage:(0,i.Z)((0,r.Z)({},n),{messages:(0,o.Z)(n.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},b(),a),{content:{text:a.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,n=e.changes;k({variables:{id:t.id,changes:n},optimisticResponse:{updateAnnotationAnchor:(0,i.Z)((0,r.Z)({},t,n),{isResolved:"boolean"===typeof n.isResolved?n.isResolved:t.isResolved})}})},updateThreadPreview:function(e){var t=e.threadId,n=e.messageId,r=e.message;C({variables:{threadId:t,messageId:n,message:r}})},markAllMessagesInReplAsSeenByUser:function(){j({variables:{replId:e}})}}}},7835:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(35944),i=n(60731);function a(e){var t=e.prompt,n=e.desc,a=e.confirmText,o=e.loading,s=void 0!==o&&o,l=e.onCancel,c=e.onConfirm,d=e.danger,u=e.icon;return(0,r.BX)(i.G7,{css:[i.l0.colWithGap(24)],children:[(0,r.tZ)(i.h4,{level:3,variant:"headerDefault",children:t}),(0,r.tZ)(i.xv,{multiline:!0,children:n}),(0,r.BX)(i.G7,{css:[i.l0.rowWithGap(12),i.l0.justify.end],children:[l&&(0,r.tZ)(i.zx,{disabled:s,onClick:l,text:"Cancel"}),(0,r.tZ)(i.zx,{colorway:d?"negative":"primary",disabled:s,onClick:c,text:a||"Ok",iconLeft:u})]})]})}},44372:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(14924),i=n(26042),a=n(69396),o=n(10253),s=n(67294);function l(e){var t=(0,o.Z)(s.useState(e),2),n=t[0],l=t[1];return[n,l,function(e){var t=null;switch(e.currentTarget.type){case"checkbox":t=e.currentTarget.checked;break;case"number":case"range":t=Number(e.currentTarget.value);break;default:t=e.currentTarget.value}l((0,a.Z)((0,i.Z)({},n),(0,r.Z)({},e.currentTarget.name,t)))}]}},83770:function(e,t,n){var r=n(67294),i=n(98562);t.Z=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).allowNoWid,t=r.useContext(i.Z);if(!t){if(e)return null;throw new Error("Expected wid to be in wid context")}return t}},65915:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(91131),i=n(95068);function a(){return(0,r.Dv)(i.Md)}},61668:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(35944),i=n(60536),a=n.n(i),o=(n(67294),n(44781));function s(e){var t=e.label;return(0,r.BX)(o.Z,{size:"xsmall",children:[(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":t,className:"jsx-b2b24242521d2288 help",children:"?"}),(0,r.tZ)(a(),{id:"b2b24242521d2288",children:".help.jsx-b2b24242521d2288{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})}},54774:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(26042),i=n(69396),a=n(35944),o=(n(67294),n(81183));function s(e){return(0,a.tZ)(o.Z,(0,i.Z)((0,r.Z)({},e),{children:(0,a.tZ)("path",{d:"M22.0005 12.4999V8.50012H20.001V6.49987H18V5.50012H20.001V2.50012H17.001V4.49962H15V6.49987H9V4.49962H7.0005V2.50012H4.0005V5.50012H6V6.49987H4.0005V8.50012H2.001V12.4999H0V19.4996H3V15.4999H4.0005V19.4996H6V21.4999H11.001V18.4999H7.0005V17.5001H17.001V18.4999H13.0005V21.4999H18V19.4996H20.001V15.4999H21V19.4996H24V12.4999H22.0005ZM9 11.5001H6V8.50012H9V11.5001ZM18 11.5001H15V8.50012H18V11.5001Z",fill:"currentColor",stroke:"none"})}))}},87949:function(e,t,n){n.d(t,{IH:function(){return b},ZP:function(){return m},x$:function(){return g}});var r=n(26042),i=n(10253),a=n(35944),o=n(60536),s=n.n(o),l=n(67294),c=n(60731),d=n(6148),u=n(74454),f=n(91131),p=n(45435);function m(){var e=(0,i.Z)((0,u.Z)(!1),2),t=e[0],n=e[1],o=(0,l.useState)(null),s=o[0],m=o[1],h=(0,f.Dv)(p.Sj),v=(0,i.Z)((0,f.KO)(p.a0),2),x=v[0],Z=v[1],w=(0,i.Z)((0,f.KO)(p.ot),2),y=w[0],k=w[1],j=(0,f.b9)(p.UB);return(0,a.BX)(c.G7,{css:[c.l0.colWithGap(8)],children:[(0,a.BX)(c.G7,{css:[c.l0.colWithGap(8),c.l0.position.sticky,c.l0.top(0),c.l0.px(4),c.l0.pb(8),c.l0.backgroundColor.backgroundDefault],children:[(0,a.tZ)(c.zx,{colorway:x?void 0:"positive",onClick:function(){Z((function(e){return!e}))},text:x?"Stop logging goval":"Start logging goval"}),(0,a.BX)(c.G7,{css:[c.l0.rowWithGap(4),c.l0.justify.spaceBetween],children:[(0,a.tZ)(c.zx,{onClick:n,text:t?"Hide filters":"Show filters"}),s&&(0,a.tZ)(c.zx,{onClick:function(){return m(null)},text:"Reset Time Ref"}),(0,a.tZ)(c.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(h)),t=document.createElement("a");t.setAttribute("href",e);var n=(new Date).toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,a.tZ)(d.Z,{})}),(0,a.tZ)(c.zx,{colorway:"negative",onClick:function(){return j()},text:"Clear logs"})]}),t?(0,a.tZ)(g,{filters:y,updateFilters:function(e){k((0,r.Z)({},y,e))}}):null]}),(0,a.tZ)(c.G7,{css:[c.l0.flex.growAndShrink(1),c.l0.overflow("auto"),c.l0.height("100%")],children:(0,a.tZ)(b,{logs:h,timeRef:s,setTimeRef:m})})]})}var h=l.memo((function(e){var t=e.log,n=e.timeRef,r=e.setTimeRef,i=JSON.stringify(t.cmd,null,2),o=n?t.timestamp-n:t.timestamp;return(0,a.BX)("div",{className:"jsx-f9f1d3880ce11273 "+("log "+(t.highlighted?"highlighted ":"")+("in"===t.dir?"in":"")||0),children:[(0,a.BX)("div",{className:"jsx-f9f1d3880ce11273 direction",children:[(0,a.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:t.dir}),(0,a.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:"in"===t.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,a.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:(0,a.tZ)(c.zx,{small:!0,colorway:"positive",onClick:function(){return r(t.timestamp)},text:o.toFixed(0)+"ms"})})]}),(0,a.tZ)("pre",{className:"jsx-f9f1d3880ce11273",children:i}),(0,a.tZ)(s(),{id:"f9f1d3880ce11273",children:".log.jsx-f9f1d3880ce11273{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.in.jsx-f9f1d3880ce11273{color:red}.highlighted.jsx-f9f1d3880ce11273{background:yellow}.direction.jsx-f9f1d3880ce11273{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-moz-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid}.direction.jsx-f9f1d3880ce11273>div.jsx-f9f1d3880ce11273:not(:last-child){border-bottom:1px solid;width:100%}"})]},t.index)}),(function(e,t){return e.log.index===t.log.index&&e.log.highlighted===t.log.highlighted&&e.timeRef===t.timeRef})),b=function(e){var t=e.logs,n=e.timeRef,r=e.setTimeRef;return(0,a.BX)("div",{className:"jsx-ded4128a88e9355f log-list",children:[t.map((function(e){return(0,a.tZ)(h,{log:e,timeRef:n,setTimeRef:r},e.index)})),(0,a.tZ)("div",{className:"jsx-ded4128a88e9355f bottom-anchor"}),(0,a.tZ)(s(),{id:"ded4128a88e9355f",children:".log-list.jsx-ded4128a88e9355f{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.log-list.jsx-ded4128a88e9355f *.jsx-ded4128a88e9355f{overflow-anchor:none}.bottom-anchor.jsx-ded4128a88e9355f{overflow-anchor:auto!important;min-height:1px}"})]})};var g=function(e){var t=e.filters,n=e.updateFilters;return(0,a.BX)(c.G7,{css:c.l0.colWithGap(4),children:[(0,a.tZ)(c.xv,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,a.tZ)(c.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,i.Z)(e.currentTarget.value.split(","),2),a=r[0],o=r[1];try{t=new RegExp(a,o)}catch(s){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,a.tZ)(c.xv,{variant:"subheadDefault",children:"Directions:"}),(0,a.tZ)(c.Ee,{css:c.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t,r=e.target.value;n({direction:(t=r,"in"===t||"out"===t||""===t?r:"")})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,a.BX)(c.G7,{css:[c.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Y8,{id:e.val,value:e.val}),(0,a.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,a.tZ)(c.xv,{variant:"subheadDefault",children:"Filter style:"}),(0,a.tZ)(c.Ee,{css:c.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,a.BX)(c.G7,{css:[c.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Y8,{id:e.val,value:e.val}),(0,a.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})}},45435:function(e,t,n){n.d(t,{Sj:function(){return c},Th:function(){return s},UB:function(){return d},a0:function(){return u},f9:function(){return o},ot:function(){return l}});var r=n(26042),i=n(69396),a=n(91131);function o(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return(0,i.Z)((0,r.Z)({},e),{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.cmd;return(!t.direction||n===t.direction)&&!(t.regexp&&t.regexp.test&&!t.regexp.test(JSON.stringify(r)))};return t.highlightOnly?e.map((function(e){return n(e)?(0,i.Z)((0,r.Z)({},e),{highlighted:!0}):e})):e.filter(n)}var s=(0,a.cn)([]),l=(0,a.cn)({regexp:null,direction:"",highlightOnly:!0}),c=(0,a.cn)((function(e){return o(e(s),e(l))})),d=(0,a.cn)(null,(function(e,t){t(s,[])})),u=(0,a.cn)(!1)},45222:function(e,t,n){n.d(t,{S:function(){return b}});var r=n(35944),i=n(60536),a=n.n(i),o=(n(67294),n(79500)),s=n(81255),l=n(69346),c=n(1144),d=n(29163),u=n(97648),f=n(8527),p=n(89596),m=n(99408),h=n(15335),b=function(){var e=(0,m.Z)().container;(0,h.Z)();var t=e.getConnectionMetadata();if(!t)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,i=new URL(t.conmanURL).host,b='./conman-repl -t "'.concat(n,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(l.Z,{css:s.l0.rowWithGap(2),children:[(0,r.BX)(c.x,{css:s.l0.flex.shrink(1),children:["conman Repl command: ",(0,r.tZ)(u.Z,{children:b})]}),(0,r.tZ)(d.Z,{alt:"Copy to clipboard",onClick:function(){return(0,o.Z)(b)},children:(0,r.tZ)(f.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,p.h)(t.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(a(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})}},87008:function(e,t,n){n.d(t,{V:function(){return d}});var r=n(10253),i=n(35944),a=n(35642),o=n(67294),s=n(27206),l=n(6951),c=n(59077),d=function(){var e=(0,r.Z)(o.useState(a.Z.get("gurl","string")||""),2),t=e[0],n=e[1];return(0,i.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,i.tZ)(s.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,i.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,c.t)(t),null,2)]}),(0,i.tZ)("br",{}),(0,i.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.tZ)(l.Z,{color:"positive",onClick:function(){a.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,i.tZ)(l.Z,{color:"orange",onClick:function(){a.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,i.tZ)("br",{}),(0,i.tZ)("br",{}),(0,i.tZ)("div",{children:a.Z.get("gurl","string")?"currently in localStorage: ".concat(a.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,i.tZ)("br",{}),(0,i.tZ)("br",{}),"Gurl order of precedence:",(0,i.BX)("ol",{style:{margin:20},children:[(0,i.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,i.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,i.tZ)("code",{children:"https://currenthost:4563"})," or",(0,i.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,i.BX)("li",{children:["default is ",(0,i.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]})}},51262:function(e,t,n){n.d(t,{_:function(){return x}});var r=n(35944),i=n(60536),a=n.n(i),o=n(63377),s=n(79500),l=n(90317),c=n(5152),d=n.n(c),u=n(81255),f=n(69346),p=n(1144),m=n(97648),h=n(29163),b=n(8527),g=n(8394),v=d()((function(){return n.e(367).then(n.t.bind(n,55171,23))}),{loadableGenerated:{webpack:function(){return[55171]}},ssr:!1}),x=function(){var e,t,n=(0,o.Z)(),i=(0,l.bPN)({variables:{replId:n}}).data,c=(0,g.Z)(),d="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?JSON.parse(JSON.stringify(i.repl)):void 0;d&&(delete d.__typename,null===(e=d.user)||void 0===e||delete e.__typename,null===(t=d.origin)||void 0===t||delete t.__typename,delete d.config.__typename);return(0,r.BX)(f.Z,{css:[u.l0.colWithGap(16),u.l0.p(4)],children:[(0,r.BX)(f.Z,{css:u.l0.rowWithGap(2),children:[(0,r.BX)(p.x,{children:["Repl ID: ",(0,r.tZ)(m.Z,{children:n})]}),(0,r.tZ)(h.Z,{alt:"Copy to clipboard",onClick:function(){return(0,s.Z)(n)},children:(0,r.tZ)(b.Z,{})})]}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:d&&(0,r.tZ)(v,{iconStyle:"circle",style:{backgroundColor:"transparent"},displayDataTypes:!1,theme:c,src:d,collapseStringsAfterLength:40})}),(0,r.tZ)(a(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})}},33568:function(e,t,n){n.d(t,{Z:function(){return ue}});var r=n(10253),i=n(35944),a=n(60536),o=n.n(a),s=n(67294),l=n(94184),c=n.n(l),d=n(90317),u=n(63377),f=n(30019),p=n(44781),m=n(19526),h=n(43902),b=n(84789),g=n(14924),v=n(82670),x=n(26042),Z=n(69396),w=n(6951),y=n(93058),k=n(77365),j=n(51995),C=n(92002),N=n(99534),S=n(19050),T=n(27206),z=n(33773),B=n(44643),R=n(34193),_=n(47568),E=n(51438),I=n(28668),G=n(29815),X=n(25892),L=n(25171),D=n(34051),U=n.n(D),O=n(92876);function A(e){switch(e){case d.Flv.Match:return"The test passes if the expected output is in the actual output.";case d.Flv.Exact:return"The test passes if the expected output is equal to the actual output.";case d.Flv.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case d.Flv.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var F=function(e){(0,I.Z)(n,e);var t=(0,L.Z)(n);function n(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var a;return(0,E.Z)(this,n),(a=t.call.apply(t,[this].concat((0,G.Z)(r)))).name=a.constructor.name,a}return n}((0,X.Z)(Error));function P(e){var t={id:e.id},n={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":t.output={compatibility:{expected:e.output}};break;case"match":t.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":t.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":t.output={regex:{expression:e.output}}}return{id:e.id,instructions:[n,t]}}function W(e){var t=e.args,n=e.env,r=t.indexOf("--ps1"),i=t.indexOf("--ps2"),a=t.indexOf("-i");return-1!==r&&null!=t[r+1]&&(t[r+1]=""),-1!==i&&null!=t[i+1]&&(t[i+1]=""),-1!==a&&t.splice(a,1),t.includes("-q")||t.unshift(t.shift(),"-q"),n.PS1="",n.PS2="",{args:t,env:n}}function M(e){return H.apply(this,arguments)}function H(){return(H=(0,_.Z)(U().mark((function e(t){var n,r,i,a,o,s,l,c,d,u;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.getRunConfig();case 3:if(r=e.sent){e.next=6;break}throw new F("unable to fetch dotreplit run config");case 6:if(!r.interp){e.next=17;break}if("stderred"===(null===(a=null===(i=r.interp)||void 0===i?void 0:i.command)||void 0===a?void 0:a.args[0])&&("--"===a.args[1]?a.args.splice(0,2):a.args.shift()),a&&!(a.args.length<1)){e.next=14;break}throw o=new F("received interp without command"),O.Tb(o,(function(e){return e.setExtra("runInfo",u)})),o;case 14:if(!a.args[0].match(/(^|\/)prybar/i)){e.next=16;break}return e.abrupt("return",{execCommand:W(a)});case 16:return e.abrupt("return",{execCommand:{args:a.args,env:a.env}});case 17:if(null===(n=r.run)||void 0===n?void 0:n.run){e.next=21;break}throw s=new F("Bad repl run config received"),O.Tb(s,(function(e){return e.setExtra("runConfig",r)})),s;case 21:return l=r.run,c=l.run,d=l.compile,c.env.PS1="",c.env.PS2="",u={execCommand:{args:c.args,env:c.env}},d&&(d.env.PS1="",d.env.PS2="",u.buildCommand={args:d.args,env:d.env}),e.abrupt("return",u);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V,Y=function(e){var t=e.test,n=e.onSubmit,a=e.onCancel,l=e.isOpen,c=e.onRequestClose,u=(0,r.Z)(s.useState({}),2),m=u[0],h=u[1],b=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||d.Flv.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},v=(0,y.Z)().showError,k=(0,r.Z)(s.useState(b(t)),2),j=k[0],C=k[1];s.useEffect((function(){C(b(t)),h({})}),[t,C]);var _=function(e,t){h((function(n){return(0,Z.Z)((0,x.Z)({},n),(0,g.Z)({},e,t?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,i.tZ)(R.Z,{isOpen:l,onRequestClose:c,children:(0,i.BX)("div",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,i.tZ)("div",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,i.tZ)(f.Z,{level:4,align:"center",children:t?"Edit test: ":"Create test"})}),(0,i.tZ)("div",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,i.tZ)(T.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===j||void 0===j?void 0:j.name)||"",validationResults:m.name,onChange:function(e){var t;e.persist(),C((function(t){var n;return(0,Z.Z)((0,x.Z)({},t),{name:(null===(n=e.target)||void 0===n?void 0:n.value)||""})})),_("name",null===(t=e.target)||void 0===t?void 0:t.value)},maxLength:20})}),(0,i.tZ)("div",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,i.tZ)(B.Z,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:j.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),C((function(t){return(0,Z.Z)((0,x.Z)({},t),{input:e.target.value})}))}})}),(0,i.tZ)("div",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,i.tZ)(B.Z,{style:{height:"150px"},label:"Expected output",validationResults:m.output,placeholder:"The expected output for the test",value:j.output,fontFamily:"monospace",translate:"no",onChange:function(e){var t;e.persist(),C((function(t){return(0,Z.Z)((0,x.Z)({},t),{output:e.target.value})})),_("output",null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,i.tZ)("div",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,i.tZ)("div",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,i.tZ)(S.Z,{items:[d.Flv.Match,d.Flv.Exact,d.Flv.Regex,d.Flv.Compatibility],renderItemChildComponent:function(e){return(0,i.BX)("a",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,i.tZ)("br",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,i.tZ)(p.Z,{size:"xsmall",children:A(e)})]})},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,N.Z)(e,["innerRef"]);return(0,i.BX)("a",(0,Z.Z)((0,x.Z)({ref:t},n),{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,i.tZ)(p.Z,{children:j.type}),(0,i.tZ)(p.Z,{children:(0,i.tZ)(z.Z,{})})]}))},onClick:function(e){C((function(t){return(0,Z.Z)((0,x.Z)({},t),{type:e})}))}})})}),(0,i.BX)("div",{className:o().dynamic([["550654d38c65c62e",[""===j.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,i.tZ)(w.Z,{onClick:a,children:"Cancel"}),(0,i.tZ)(w.Z,{color:"primary",filled:!0,onClick:function(){if(!j.name||!j.output)return v("Test name and expected output must be provided."),j.name||_("name"),void(j.output||_("output"));j.type?(n({testId:null===t||void 0===t?void 0:t.id,name:j.name,input:j.input||"",type:j.type,output:j.output}),C(b(void 0))):v("A test type must be provided")},children:"Save"})]}),(0,i.tZ)(o(),{id:"550654d38c65c62e",dynamic:[""===j.type?"--foreground-dimmer":"--foreground-default"],children:".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8)}.dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;text-align:right}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var(".concat(""===j.type?"--foreground-dimmer":"--foreground-default",")}.manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16)}.manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16)}.align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8)}.manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%}")})]})})},q=n(42941),J=n(64080),K=n(57704),$=function(e){var t=e.test,n=e.onEdit,r=e.onDelete,a=e.onView,s=e.isTeacherView,l=e.status,d=e.isRunning,u=e.onShowFailed,f=e.disableButtons,m="";return l?m=l:d&&(m="Running"),(0,i.BX)("div",{onClick:function(){return a()},className:"jsx-d0055d2df6a917c5 test",children:[(0,i.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,i.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,i.tZ)(p.Z,{size:"large",children:t.name})}),s&&(0,i.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-d0055d2df6a917c5 test-row",children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(w.Z,{color:"primary",onClick:n,Icon:J.Z,disabled:f}),(0,i.tZ)(q.Z,{width:"var(--space-4)"}),(0,i.tZ)(w.Z,{onClick:r,color:"negative",Icon:K.Z,disabled:f})]})})]}),(l||d)&&(0,i.BX)(i.HY,{children:[(0,i.tZ)(q.Z,{height:2}),(0,i.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,i.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,i.tZ)(p.Z,{className:c()([{"status-passed":"Passed"===l},{"status-failed":"Failed"===l}]),children:m})}),(0,i.tZ)(w.Z,{onClick:function(e){return e.stopPropagation(),u(e)},disabled:d,children:"Results"})]})]}),(0,i.tZ)(o(),{id:"d0055d2df6a917c5",children:".test.jsx-d0055d2df6a917c5{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);cursor:pointer}.test-row.jsx-d0055d2df6a917c5 .status-passed{color:var(--accent-positive-default)}.test-row.jsx-d0055d2df6a917c5 .status-failed{color:var(--accent-negative-default)}.test-text.jsx-d0055d2df6a917c5{width:100%;padding:var(--space-4)0;padding-right:var(--space-8);word-break:break-all}.test.jsx-d0055d2df6a917c5:hover{background-color:var(--background-higher)}.test-row.jsx-d0055d2df6a917c5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}"})]})},Q=function(e){var t=e.text;if(!t)return null;var n=t.split("\n").map((function(e,t){return[e,"".concat(t+1)]}));return""===n[n.length-1][0]&&n.pop(),(0,i.BX)(m.Ug,{children:[(0,i.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,i.tZ)("pre",{className:"jsx-6ac664c130469a42",children:n.map((function(e){var t=(0,r.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,i.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,i.tZ)("pre",{className:"jsx-6ac664c130469a42",children:t})}),(0,i.tZ)(o(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},ee=n(37529),te=n.n(ee),ne=function(e){var t=e.expected,n=e.actual;if(!t||!n)return null;var a=n.split("\n"),s=t.split("\n"),l=s.length>a.length?s:a,c=l.map((function(e,t){return[e,"".concat(t+1)]})),d=l.map((function(e,t){var n=t<a.length?a[t]:"",r=t<s.length?s[t]:"";return(0,i.BX)(i.HY,{children:[te()(n,r).map((function(e,t){var n;return-1===e[0]&&(n={backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}),1===e[0]&&(n={backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}),(0,i.tZ)("span",{style:n,children:e[1]},t)})),(0,i.tZ)("br",{})]})}));return(0,i.BX)(m.Ug,{children:[(0,i.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,i.tZ)("pre",{className:"jsx-6ac664c130469a42",children:c.map((function(e){var t=(0,r.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,i.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,i.tZ)("pre",{className:"jsx-6ac664c130469a42",children:d})}),(0,i.tZ)(o(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},re=function(e){var t=e.test,n=e.actualOutput,r=e.isOpen,a=e.isResults,s=e.onRequestClose,l=e.didFail,c=e.error,u=t?A(t.type):"",h=null===n||void 0===n?void 0:n.split("\n"),b=null===t||void 0===t?void 0:t.output.split("\n"),g=null===t||void 0===t?void 0:t.output;return l=null!==l&&void 0!==l?l:"Failed"===(null===t||void 0===t?void 0:t.status),(0,i.BX)(R.Z,{onRequestClose:s,isOpen:r&&void 0!==t,children:[(0,i.BX)("div",{className:"jsx-c7ed87540f6ec33d test-info",children:[(0,i.BX)(m.gC,{align:"center",spacing:1,children:[(0,i.BX)(f.Z,{level:4,children:[a&&"Test results: ",null===t||void 0===t?void 0:t.name]}),(0,i.BX)(m.Ug,{spacing:1,children:[(0,i.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":u,className:"jsx-c7ed87540f6ec33d test-type",children:(0,i.tZ)(p.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.type})}),a&&(null===t||void 0===t?void 0:t.status)&&(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d "+"test-status ".concat(null===t||void 0===t?void 0:t.status),children:(0,i.tZ)(p.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.status})})]})]}),(0,i.tZ)(q.Z,{height:6}),(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,i.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:a?(0,i.BX)(m.Ug,{spacing:1,align:"center",children:[(0,i.tZ)(p.Z,{size:"medium",children:"Expected output"}),(0,i.tZ)(p.Z,{size:"xsmall",children:(0,i.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,i.tZ)(p.Z,{size:"medium",children:"Output"})}),(0,i.tZ)(q.Z,{height:"var(--space-8)"}),(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,i.tZ)(Q,{text:null===t||void 0===t?void 0:t.output})})]})}),(0,i.tZ)(q.Z,{height:2}),(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,i.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:a?(0,i.BX)(m.Ug,{spacing:1,align:"center",children:[(0,i.tZ)(p.Z,{size:"medium",children:"Actual output"}),(0,i.tZ)(p.Z,{size:"xsmall",children:(0,i.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,i.tZ)(p.Z,{size:"medium",children:"Input"})}),(0,i.tZ)(q.Z,{height:"var(--space-8)"}),(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,i.tZ)(Q,{text:a?n:null===t||void 0===t?void 0:t.input})})]})}),a&&l&&(0,i.tZ)(i.HY,{children:c?(0,i.BX)(i.HY,{children:[(0,i.tZ)(q.Z,{height:2}),(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,i.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,i.tZ)(p.Z,{size:"medium",children:"Error(s)"})}),(0,i.tZ)(q.Z,{height:"var(--space-8)"}),(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,i.tZ)(Q,{text:c.stderr||c.message})})]})})]}):(null===t||void 0===t?void 0:t.type)!==d.Flv.Regex&&b&&h&&(0,i.BX)(i.HY,{children:[(0,i.tZ)(q.Z,{height:2}),(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,i.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,i.BX)(m.Ug,{spacing:1,align:"center",children:[(0,i.tZ)(p.Z,{size:"medium",children:"Difference"}),(0,i.tZ)(p.Z,{size:"xsmall",children:(0,i.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]})}),(0,i.tZ)(q.Z,{height:"var(--space-8)"}),(0,i.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,i.tZ)(ne,{expected:g,actual:n})})]})})]})})]}),(0,i.tZ)(o(),{id:"c7ed87540f6ec33d",children:".test-info.jsx-c7ed87540f6ec33d{padding:var(--space-24);display:relative}.test-io-line-spacing.jsx-c7ed87540f6ec33d{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.test-io-row.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.test-io-line-number.jsx-c7ed87540f6ec33d{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-line.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code)}.test-io-line-content.jsx-c7ed87540f6ec33d{display:inline-block}.test-io-label.jsx-c7ed87540f6ec33d{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-label.jsx-c7ed87540f6ec33d .text{color:var(--foreground-dimmer)}.test-io-section.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;width:100%}.test-io-box.jsx-c7ed87540f6ec33d{height:100%;border:1px solid var(--outline-dimmest);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:auto}.test-io-box.jsx-c7ed87540f6ec33d .text{white-space:nowrap}.test-type.jsx-c7ed87540f6ec33d,.test-status.jsx-c7ed87540f6ec33d{background-color:var(--background-highest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-status.jsx-c7ed87540f6ec33d .text{color:var(--white)}.test-status.Passed.jsx-c7ed87540f6ec33d{background-color:var(--accent-positive-default)}.test-status.Failed.jsx-c7ed87540f6ec33d{background-color:var(--accent-negative-default)}.help.jsx-c7ed87540f6ec33d{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})},ie=n(99408),ae=n(9556),oe=n(46829),se=n(5783),le=n(86292),ce=function(){var e,t,n,a,l,c,m,h,b=(0,ie.Z)(),N=b.iotester,S=b.dotReplit,T=b.container,z=(0,y.Z)(),B=z.showError,R=z.showConfirm,_=(0,r.Z)(s.useState([]),2),E=_[0],I=_[1],G=(0,r.Z)(s.useState(),2),X=G[0],L=G[1],D=(0,r.Z)(s.useState(T.getConnectionState()),2),U=D[0],A=D[1],F=(0,r.Z)(s.useState(N.state),2),W=F[0],H=F[1],V=(0,r.Z)(s.useState(),2),q=V[0],J=V[1],K=(0,oe.useApolloClient)();s.useEffect((function(){return T.onConnectionStateChanged(A)}),[A,T]);var Q=(0,u.Z)(),ee=(0,d.CHr)({variables:{replId:Q}}),te="Repl"===(null===(e=ee.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)?ee.data.repl:null,ne="Team"===(null===te||void 0===te||null===(n=te.owner)||void 0===n?void 0:n.__typename)&&te.owner.id||null,ce=(0,r.Z)((0,d.vkX)({onCompleted:function(e){e&&e.saveIOTestResults&&B(e.saveIOTestResults.message)}}),1)[0];s.useEffect((function(){var e=[N.onStateChanged((function(e){H(e),ne&&e===ae.Z.Idle&&I((function(e){var t;return ce({variables:{replId:Q,results:Object.values(e).map((function(e){var n;return(0,Z.Z)((0,x.Z)({},e),{output:(null===(n=e.error)||void 0===n?void 0:n.stderr)?(null!==(t=e.output)&&void 0!==t?t:"")+e.error:e.output})})),teamId:ne}}).catch((function(t){O.Tb(t,(function(t){return t.setExtras({results:e,payload:q})}))})),e}))})),N.onError((function(e){B(e.message)})),N.onTestResult((function(e){I((function(t){var n=(0,Z.Z)((0,x.Z)({},t[e.testId]),{testId:e.testId,status:"passed"===e.body?d.kQ0.Passed:d.kQ0.Failed});return"error"===e.body&&(n.error=e.error),(0,Z.Z)((0,x.Z)({},t),(0,g.Z)({},e.testId,n))}))})),N.onInstructionResult((function(e){I((function(t){var n,r,i=Math.abs(e.instructionId),a="";switch(e.body){case"passed":var o;a+=null!==(o=e.passed.output)&&void 0!==o?o:"";break;case"failed":var s;a+=null!==(s=e.failed.output)&&void 0!==s?s:"";break;case"timeout":var l;a+=null!==(l=e.timeout.output)&&void 0!==l?l:"";break;case"error":a+=e.error.message}return(0,Z.Z)((0,x.Z)({},t),(0,g.Z)({},i,(0,Z.Z)((0,x.Z)({},t[i]),{testId:i,output:(null!==(r=null===(n=E[i])||void 0===n?void 0:n.output)&&void 0!==r?r:"")+a})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[E,B,H,N,Q,ne,q,ce]),s.useEffect((function(){var e=function(e){(0,v.Z)(e,Error)&&B(e.message),O.Tb(e)};return M(S).then(L).catch(e),S.watch((function(){return M(S).then(L).catch(e)}))}),[S,L,B]);var de=null===te||void 0===te?void 0:te.ioTests,ue=(0,r.Z)((0,d.Nej)({onError:function(e){return B(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?B(e.deleteTemplateTest.message):(R("Test deleted!"),ee.refetch())}}),2),fe=ue[0],pe=ue[1],me=(0,r.Z)((0,d.AAz)({onError:function(e){return B(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?B(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(R("Test updated!"),K.writeFragment({fragment:d.GgA,data:e.updateTemplateTest}))}}),2),he=me[0],be=me[1],ge=(0,r.Z)((0,d.pVf)({onError:function(e){return B(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?B(e.createTemplateTest.message):(R("Test created!"),ee.refetch())}}),2),ve=ge[0],xe=ge[1],Ze=ee.loading||pe.called&&pe.loading||be.called&&be.loading||xe.called&&xe.loading;s.useEffect((function(){Ze||J(X&&de&&de.length>0?{runInfo:X,tests:de.map(P)}:void 0)}),[de,X,J,Ze]);var we=(0,r.Z)(s.useState(!1),2),ye=we[0],ke=we[1],je=(0,r.Z)(s.useState(!1),2),Ce=je[0],Ne=je[1],Se=(0,r.Z)(s.useState(!1),2),Te=Se[0],ze=Se[1],Be=(0,r.Z)(s.useState(),2),Re=Be[0],_e=Be[1],Ee="undefined"!==typeof Re&&"Repl"===(null===(a=ee.data)||void 0===a?void 0:a.repl.__typename)&&ee.data.repl.ioTests[Re]||void 0,Ie="Repl"===(null===(l=ee.data)||void 0===l?void 0:l.repl.__typename)&&ee.data.repl.isProject;if(ee.error)return(0,i.BX)("div",{className:"jsx-fb1466c53ace89ca wrapper",children:[(0,i.tZ)(p.Z,{align:"center",children:"Unable to fetch tests"}),(0,i.tZ)(o(),{id:"fb1466c53ace89ca",children:".wrapper.jsx-fb1466c53ace89ca{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]});var Ge=function(e){var t;if(void 0!==(null===(t=E[e])||void 0===t?void 0:t.status))return E[e].status===d.kQ0.Passed?"Passed":"Failed"};return(0,i.BX)("div",{className:"jsx-69bed4444090144f tests-panel",children:[(0,i.tZ)("div",{className:"jsx-69bed4444090144f tests-header",children:(0,i.tZ)(f.Z,{level:4,children:"Input/Output Tests"})}),ee.loading?(0,i.tZ)("div",{className:"jsx-69bed4444090144f spinner",children:(0,i.tZ)(k.Z,{})}):(0,i.BX)("div",{className:"jsx-69bed4444090144f tests",children:[(0,i.BX)("div",{className:"jsx-69bed4444090144f button-bar",children:[Ie&&(0,i.tZ)(w.Z,{color:"green",Icon:C.Z,className:"create-test-button",disabled:Ze||W!==ae.Z.Idle,onClick:function(){_e(void 0),ke(!0)},children:"Create test"}),!Ie&&de&&0===de.length?(0,i.tZ)(p.Z,{children:"This project has no tests "}):(0,i.tZ)(w.Z,{color:"positive",Icon:j.Z,onClick:function(){var e;if(!q||"Repl"!==(null===te||void 0===te?void 0:te.__typename)||"Team"!==(null===(e=te.owner)||void 0===e?void 0:e.__typename)||N.state!==ae.Z.Idle){var t=new Error("no tests or run info");throw O.Tb(t,(function(e){return e.setExtra("payload",q)})),t}I({}),(0,le.j)(le.U3.AUTOGRADER_STARTED),N.run(q).catch((function(e){O.Tb(e,(function(e){return e.setExtra("payload",q)})),B(e.message)}))},disabled:Ze||W!==ae.Z.Idle||!q||U!==se.e.CONNECTED,children:"Run tests"})]}),null===de||void 0===de?void 0:de.map((function(e,t){return(0,i.tZ)($,{test:e,onEdit:function(){_e(t),ke(!0)},onDelete:function(){fe({variables:{testId:e.id}})},onView:function(){_e(t),Ne(!0),ze(!1)},onShowFailed:function(){_e(t),Ne(!0),ze(!0)},isRunning:W!==ae.Z.Idle&&void 0!==E[e.id]&&void 0===E[e.id].status,isTeacherView:Ie,status:Ge(e.id),disableButtons:Ze||W!==ae.Z.Idle},e.id)})),(0,i.tZ)(Y,{test:Ee,isOpen:ye,readOnly:!Ie,onRequestClose:function(){ke(!1),_e(void 0)},onCancel:function(){ke(!1),_e(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(he({variables:{input:e}}),_e(void 0)):"Repl"===(null===(t=ee.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&(null===(r=ee.data)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.template)&&ve({variables:{input:(0,Z.Z)((0,x.Z)({},e),{templateId:ee.data.repl.template.id})}}),ke(!1)}}),(0,i.tZ)(re,{test:Ee,isOpen:Ce,actualOutput:"undefined"!==typeof Ee?null===(c=E[Ee.id])||void 0===c?void 0:c.output:void 0,error:Ee&&(null===(m=E[Ee.id])||void 0===m?void 0:m.error),didFail:Ee&&(null===(h=E[Ee.id])||void 0===h?void 0:h.status)===d.kQ0.Failed,isResults:Te,onRequestClose:function(){Ne(!1),_e(void 0)}})]}),(0,i.tZ)(o(),{id:"69bed4444090144f",children:".flex-grow.jsx-69bed4444090144f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.spacer-1.jsx-69bed4444090144f{padding:var(--space-4)}.tests-header.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4)0 var(--space-8)0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.button-bar.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.button-bar.jsx-69bed4444090144f>button{margin-right:var(--space-8);margin-bottom:var(--space-8)}.spinner.jsx-69bed4444090144f{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tests-panel.jsx-69bed4444090144f{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto}.section.jsx-69bed4444090144f{height:-webkit-calc(100% - 50px);height:-moz-calc(100% - 50px);height:calc(100% - 50px)}"})]})},de=n(69128);function ue(){var e=(0,r.Z)(s.useState(null),2),t=e[0],n=e[1],a=s.useRef(V.None),l=(0,u.Z)(),g=(0,de.Z)(),v=g.language,x=g.isLoading,Z=(0,d.CHr)({variables:{replId:l}}),w=Z.loading;return s.useEffect((function(){var e,t,r=null===(e=Z.data)||void 0===e?void 0:e.repl;if("Repl"===(null===r||void 0===r?void 0:r.__typename)){var i=r.unitTests,o=r.ioTests,s=V.Choose;s=o.length>0?V.IO:(null===i||void 0===i?void 0:i.tests)&&(null===(t=i.tests)||void 0===t?void 0:t.length)>0||(null===i||void 0===i?void 0:i.meta)?V.Unit:r.currentUserPermissions.writeTests?a.current!==V.None?a.current:V.Choose:V.None,n(s)}}),[Z.data]),w||x?(0,i.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,i.tZ)(h.Z,{}),(0,i.tZ)(o(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}):(0,i.BX)("div",{className:"jsx-ba2c7540ad19d138 testing-controller",children:[t===V.None&&(0,i.tZ)("div",{className:"jsx-ba2c7540ad19d138 empty",children:(0,i.tZ)(p.Z,{children:"No tests found"})}),t===V.Choose&&(0,i.BX)(m.gC,{align:"center",spacing:2,children:[(0,i.tZ)(f.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,i.BX)("div",{onClick:function(){n(V.Unit),a.current=V.Unit},className:"jsx-ba2c7540ad19d138 "+(c()("panel",{"is-disabled":!v})||""),children:[(0,i.tZ)(f.Z,{level:4,children:"Unit tests"}),(0,i.tZ)(p.Z,{align:"center",children:v?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,i.tZ)("div",{onClick:function(){n(V.IO),a.current=V.IO},className:"jsx-ba2c7540ad19d138 panel",children:(0,i.BX)(m.gC,{spacing:1,align:"center",children:[(0,i.tZ)(f.Z,{level:4,children:"Input output tests"}),(0,i.tZ)(p.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),t===V.IO&&(0,i.tZ)(ce,{}),t===V.Unit&&(0,i.tZ)(b.Z,{onBack:function(){return n(V.Choose)}}),(0,i.tZ)(o(),{id:"ba2c7540ad19d138",children:".empty.jsx-ba2c7540ad19d138{padding:var(--space-16);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.testing-controller.jsx-ba2c7540ad19d138{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.panel.jsx-ba2c7540ad19d138{width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8)}.panel.jsx-ba2c7540ad19d138:hover{background-color:var(--background-root)}.panel.is-disabled.jsx-ba2c7540ad19d138{opacity:.5;pointer-events:none}"})]})}!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(V||(V={}))},1457:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(10253),i=n(29815),a=n(35944),o=n(26473),s=n(67294),l=n(90317),c=n(77365),d=n(79500),u=n(63377),f=n(91513),p=n(48551),m=n(41034),h=n(9517),b=n(60731),g=n(62794),v=n(10164);function x(e){var t,n,r,i,o=e.style,s=e.activeFile,c=(0,u.Z)(),d=(0,l.r8C)({variables:{replID:c},pollInterval:1e4}),f=d.data,p=d.error,m=d.loading;f&&("Repl"===f.repl.__typename?r=null===f||void 0===f||null===(i=f.repl)||void 0===i?void 0:i.database:n="Could not fetch Database info");p&&("GraphQL error: You don't have access to this database"===p.message?r=null:n=p.message);var h=null===f||void 0===f||null===(t=f.currentUser)||void 0===t?void 0:t.isLoggedIn;return(0,a.BX)(b.G7,{css:[o,b.l0.colWithGap(16),b.l0.backgroundColor.backgroundDefault,b.l0.p(8),b.l0.borderRadius(0,4,4,0)],children:[(0,a.tZ)(b.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,a.tZ)(b.G7,{css:[b.l0.colWithGap(16),{overflowY:"auto",width:"100%",flex:"1"}],children:h?(0,a.BX)(a.HY,{children:[(0,a.BX)(b.xv,{multiline:!0,children:[(0,a.tZ)("a",{href:"https://docs.replit.com/hosting/database-faq",target:"_blank",rel:"noopener",css:[b.l0.color.accentPrimaryStronger,b.l0.pr(4)],children:"Replit Database"}),"is an easy to use key-value store."]}),n&&(0,a.tZ)(b.xv,{multiline:!0,css:[b.l0.color.accentNegativeStronger],children:n}),(r||m)&&(0,a.tZ)(b.G7,{css:[b.l0.pb(16)],children:(0,a.tZ)(Z,{database:r,loading:m})}),!m&&(0,a.BX)(b.G7,{css:[b.l0.colWithGap(8)],children:[(0,a.tZ)(b.xv,{variant:"small",css:{textTransform:"uppercase",fontWeight:b.TV.fontWeightMedium},children:"commands"}),(0,a.tZ)(w,{activeFile:s})]})]}):(0,a.tZ)(R,{})}),(0,a.tZ)(B,{})]})}var Z=function(e){var t=e.database;if(e.loading)return(0,a.tZ)(c.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}});if(!t)return null;var n=t.sizeMB||0,r="MB";return n<1&&(n*=1e3,r="KB"),(0,a.BX)(b.G7,{css:[b.l0.colWithGap(8)],children:[(0,a.tZ)(b.xv,{variant:"small",css:{textTransform:"uppercase",fontWeight:b.TV.fontWeightMedium},children:"storage"}),(0,a.BX)(b.G7,{css:[b.l0.rowWithGap(4)],children:[(0,a.BX)(b.xv,{color:"dimmer",children:[n.toFixed(2)," ",r]}),(0,a.tZ)(b.xv,{color:"dimmer",children:"|"}),(0,a.tZ)(b.xv,{color:"dimmer",children:"".concat(t.keysCount||0," ").concat(1===t.keysCount?"key":"keys")})]})]})},w=function(e){var t=e.activeFile,n=(0,a.tZ)(z,{activeFile:t});if(t)switch((0,p.r6)(t)){case"go":n=(0,a.tZ)(T,{examples:N,activeFile:t});break;case"js":case"ts":case"tsx":case"jsx":case"mjs":n=(0,a.tZ)(T,{examples:S,activeFile:t});break;case"py":n=(0,a.tZ)(T,{examples:C,activeFile:t})}return(0,a.tZ)(b.G7,{css:[b.l0.colWithGap(8)],children:n})},y=function(e){var t=e.title,n=e.content,o=e.activeFile,l=(0,r.Z)(s.useState(n),2),c=l[0],d=l[1],u=(0,r.Z)(function(){var e=t.split(" ");return[e[0],e.slice(1).join(" ")]}(),2),f=u[0],p=u[1];return(0,a.BX)(b.G7,{css:[b.l0.colWithGap(4)],children:[(0,a.BX)(b.G7,{css:[b.l0.rowWithGap(4)],children:[(0,a.tZ)(b.xv,{css:{fontWeight:b.TV.fontWeightMedium},children:f}),(0,a.tZ)(b.xv,{color:"dimmer",children:p})]}),(0,a.BX)(b.G7,{css:[b.l0.colWithGap(4),{width:"fit-content"}],children:[(0,a.tZ)(b.G7,{css:[b.l0.rowWithGap(4),b.l0.backgroundColor.backgroundRoot,b.l0.borderRadius(4),b.l0.p(4),b.l0.align.center],children:n.map((function(e,n){return"input"===e.type?(0,a.tZ)(b.II,{onChange:function(e){var t=(0,i.Z)(c);t[n].value=e.target.value,d(t)},placeholder:e.placeholder,value:e.value||"",css:[b.l0.width(64),b.l0.height(24),b.l0.zIndex(1)]},"".concat(t,"-").concat(n)):(0,a.tZ)(b.G7,{css:[b.l0.borderRadius(4),b.l0.backgroundColor.backgroundRoot],children:(0,a.tZ)(b.xv,{css:[b.l0.font.code,b.l0.color.greyStronger,b.l0.p(4)],children:e.value})},"".concat(t,"-").concat(n))}))}),(0,a.tZ)(k,{code:c.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),""),activeFile:o})]})]})},k=function(e){var t=e.code,n=e.activeFile,r=(0,f.Z)(n);return r?(0,a.tZ)(b.Tg,{background:"default",children:(0,a.tZ)(b.zx,{small:!0,outlined:!0,onClick:function(){r({code:t})},text:"Insert",iconRight:(0,a.tZ)(h.Z,{}),css:{width:"fit-content"}})}):(0,a.tZ)(b.Tg,{background:"default",children:(0,a.tZ)(b.zx,{small:!0,outlined:!0,onClick:function(){return(0,d.Z)(t)},text:"Copy",iconLeft:(0,a.tZ)(m.Z,{}),css:{width:"fit-content"}})})},j=[{title:"Set a key to a value",content:[{type:"code",value:"curl $REPLIT_DB_URL -d '"},{type:"input",placeholder:"key"},{type:"code",value:"="},{type:"input",placeholder:"value"},{type:"code",value:"'"}]},{title:"Get a key's value",content:[{type:"code",value:"curl $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"Delete a key",content:[{type:"code",value:"curl -XDELETE $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"List all keys",content:[{type:"code",value:'curl "$REPLIT_DB_URL?prefix='},{type:"input",placeholder:"key"},{type:"code",value:'"'}]}],C=[{title:"Import the database",content:[{type:"code",value:"from replit import db"}]},{title:"Set a key to a value",content:[{type:"code",value:'db["'},{type:"input",placeholder:"key"},{type:"code",value:'"] = "'},{type:"input",placeholder:"value"},{type:"code",value:'"'}]},{title:"Get a key's value",content:[{type:"code",value:'value = db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"Delete a key",content:[{type:"code",value:'del db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"List all keys",content:[{type:"code",value:"keys = db.keys()"}]},{title:"List keys with a prefix",content:[{type:"code",value:'matches = db.prefix("'},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],N=[{title:"Import the database",content:[{type:"code",value:'import "github.com/replit/database-go"'}]},{title:"Set a key to a value",content:[{type:"code",value:'database.Set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'")'}]},{title:"Get a key's value",content:[{type:"code",value:'value, _ := database.Get("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"Delete a key",content:[{type:"code",value:'database.Delete("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"List all keys",content:[{type:"code",value:'keys, _ := database.ListKeys("")'}]},{title:"List keys with a prefix",content:[{type:"code",value:"matches, _ := database.ListKeys("},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],S=[{title:"Import the database",content:[{type:"code",value:'const Database = require("@replit/database")'}]},{title:"Create a new database",content:[{type:"code",value:"const db = new Database()"}]},{title:"Set a key to a value",content:[{type:"code",value:'db.set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'").then(() => {});'}]},{title:"Get a key's value",content:[{type:"code",value:'db.get("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(value => {});'}]},{title:"Delete a key",content:[{type:"code",value:'db.delete("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(() => {});'}]},{title:"List all keys",content:[{type:"code",value:"db.list().then(keys => {});"}]},{title:"List keys with a prefix",content:[{type:"code",value:'db.list("'},{type:"input",placeholder:"prefix"},{type:"code",value:'").then(matches => {});'}]}],T=function(e){var t=e.examples,n=e.activeFile;return(0,a.tZ)(b.G7,{css:[b.l0.colWithGap(24)],children:t.map((function(e,t){return(0,a.tZ)(y,{title:e.title,content:e.content,activeFile:n},t)}))})},z=function(e){var t=e.activeFile;return(0,a.tZ)(a.HY,{children:(0,a.BX)(b.G7,{css:[b.l0.colWithGap(24)],children:[(0,a.BX)(b.G7,{css:[b.l0.rowWithGap(4),{flexWrap:"wrap"}],children:[(0,a.tZ)(b.xv,{color:"dimmer",multiline:!0,children:"We\u2019ve set an environment variable called"}),(0,a.tZ)(b.G7,{css:[b.l0.borderRadius(4),b.l0.backgroundColor.backgroundRoot],children:(0,a.tZ)(b.xv,{css:[b.l0.font.code,b.l0.color.greyStronger,b.l0.p(4)],children:"REPLIT_DB_URL"})}),(0,a.tZ)(b.xv,{color:"dimmer",multiline:!0,children:"in your Repl."})]}),j.map((function(e,n){return(0,a.tZ)(y,{title:e.title,content:e.content,activeFile:t},n)})),(0,a.tZ)(b.xv,{color:"dimmer",multiline:!0,children:"You can use the Database from any Repl by making HTTP requests similar to those above. We have language clients for Python, Go, and Node, switch to a file that uses that language to see how to use the client."})]})})},B=function(){return(0,a.tZ)(b.G7,{css:[b.l0.pt(8)],children:(0,a.tZ)(g.Z,{feature:v.l.Database})})},R=function(){return(0,a.BX)(b.G7,{css:[b.l0.colWithGap(16)],children:[(0,a.BX)(b.xv,{multiline:!0,children:[(0,a.tZ)("a",{href:"https://docs.replit.com/hosting/database-faq",target:"_blank",rel:"noopener",css:[b.l0.color.accentPrimaryStronger,b.l0.pr(4)],children:"Replit Database"}),"is the fastest and easiest way to store data from your Repl. Try it out by logging in or signing up."]}),(0,a.tZ)(b.ZP,{href:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,a.tZ)(o.Z,{})})]})}},15328:function(e,t,n){n.d(t,{Z:function(){return V}});var r=n(35944),i=n(60536),a=n.n(i),o=n(67294),s=n(19526),l=n(30019),c=n(99408),d=n(68122),u=n(6951),f=n(39571);function p(e){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.Z,{truncate:!0,level:5,children:"Call stack"}),(0,r.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(t){return(0,r.tZ)(m,{frame:t,onClick:e.onFrameClick},t.id)}))})]})}function m(e){var t,n,i=e.frame,o=e.onClick,s=null===(t=i.source)||void 0===t?void 0:t.name,l=null===(n=i.source)||void 0===n?void 0:n.path,c=s&&(0,f.om)(s),d=l&&(0,f.om)(l),u=l&&(0,f.IT)(l);return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{onClick:function(){return u&&o(u,i.line)},className:"jsx-c66d0af1ad52f929 frame",children:[(0,r.tZ)("div",{className:"jsx-c66d0af1ad52f929 label name",children:i.name}),(0,r.BX)("div",{className:"jsx-c66d0af1ad52f929 label path",children:[(0,r.tZ)("span",{className:"jsx-c66d0af1ad52f929 line",children:i.line}),c||d||s||l]})]}),(0,r.tZ)(a(),{id:"c66d0af1ad52f929",children:".frame.jsx-c66d0af1ad52f929{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code)}.frame.jsx-c66d0af1ad52f929:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.jsx-c66d0af1ad52f929{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.name.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.path.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 1 auto;-moz-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto}.line.jsx-c66d0af1ad52f929{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}"})]})}var h=n(10253),b=n(54810),g=n(27206),v=n(44781),x=n(94184),Z=n.n(x),w=n(33773),y=n(81255),k=n(60731),j=n(67629);function C(e){var t=[],n=(0,b.Z)("flag-debugger-v2"),i=!0,o=!1,c=void 0;try{for(var d,u=e.breakpoints[Symbol.iterator]();!(i=(d=u.next()).done);i=!0){var f=(0,h.Z)(d.value,2),p=f[0],m=f[1],g=!0,x=!1,Z=void 0;try{for(var w,y=m[Symbol.iterator]();!(g=(w=y.next()).done);g=!0){var k=w.value;t.push((0,r.tZ)(N,{breakpoint:k,file:p,line:k.line,verified:k.verified,supportsLogPoints:n,logMessage:k.logMessage,onClick:e.onBreakpointClick,onUpdate:e.onUpdate,onRemove:e.onRemove},"".concat(p,":").concat(k.line,":").concat(k.pid1Id,":").concat(k.dapId)))}}catch(j){x=!0,Z=j}finally{try{g||null==y.return||y.return()}finally{if(x)throw Z}}}}catch(j){o=!0,c=j}finally{try{i||null==u.return||u.return()}finally{if(o)throw c}}return(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.Z,{truncate:!0,level:5,children:"Breakpoints"}),t.length>0?(0,r.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:t}):(0,r.BX)(v.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,r.tZ)("span",{className:"jsx-223474dbb82a953c breakpoint"})," by clicking on the line number.",(0,r.tZ)(a(),{id:"223474dbb82a953c",children:".breakpoint.jsx-223474dbb82a953c{display:inline-block;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:8px;height:8px}"})]})]})}function N(e){var t=e.breakpoint,n=e.file,i=e.line,l=e.verified,c=e.supportsLogPoints,d=e.logMessage,p=e.onClick,m=e.onUpdate,b=e.onRemove,v=(0,f.om)(n),x=(0,h.Z)(o.useState(Boolean(d)),2),C=x[0],N=x[1],S=(0,h.Z)(o.useState(null!==d&&void 0!==d?d:""),2),T=S[0],z=S[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(s.gC,{spacing:1,align:"stretch",children:[(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d breakpoint",children:(0,r.BX)("div",{css:[{"&:hover":{backgroundColor:y.TV.backgroundHigher,color:y.TV.foregroundDefault},"&:focus-within":{color:y.TV.foregroundDefault},"&:hover .frameButton":{background:y.TV.backgroundHigher,backgroundColor:y.TV.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:y.TV.backgroundHighest}}],onClick:function(){p(n,i)},className:"jsx-3743f20b19d8f08d frame",children:[(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d "+(Z()("circle",{verified:l})||"")}),(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d line",children:i}),(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d location",children:(0,r.tZ)("span",{className:"jsx-3743f20b19d8f08d path",children:v||n})}),(0,r.tZ)(k.hU,{className:"frameButton",alt:"Remove breakpoint",css:[{opacity:0}],onClick:function(){b({breakpoint:t})},children:(0,r.tZ)(j.Z,{})}),c&&(0,r.tZ)(k.hU,{className:"frameButton",alt:C?"Close log message":"Open log message",onClick:function(){return N(!C)},children:(0,r.tZ)(w.Z,{rotate:C?180:0})})]})}),C&&(0,r.BX)(s.gC,{spacing:1,align:"stretch",children:[(0,r.tZ)(g.ZP,{label:"log message",name:"logMessage",value:T,onChange:function(e){return z(e.currentTarget.value)},spellCheck:!1}),(0,r.tZ)(u.Z,{onClick:function(){return m({breakpoint:t,logMessage:T})},children:"Save"})]})]}),(0,r.tZ)(a(),{id:"3743f20b19d8f08d",children:".breakpoint.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;max-width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.frame.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default)}.circle.jsx-3743f20b19d8f08d{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:.5}.verified.jsx-3743f20b19d8f08d{opacity:1}.line.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.location.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8)}.path.jsx-3743f20b19d8f08d{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"})]})}var S=n(45826),T=n(29163),z=n(4648),B=n(48505),R=n(15882),_=n(8941),E=n(94270),I=n(77365),G=n(69346),X=n(70917),L=n(86292),D=n(76075),U=n(8633);function O(e){var t=e.client,n=(0,d.Z)(null===t||void 0===t?void 0:t.state),i=(0,d.Z)(null===t||void 0===t?void 0:t.supportsStepBack);return(0,r.BX)(G.Z,{css:y.l0.rowWithGap(2),children:[i&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(T.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,L.j)(L.U3.DEBUGGER_USED,{action:"lastBreakpoint"}),null===t||void 0===t||t.reverseContinue()},alt:"Last Breakpoint",tooltipText:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(z.Z,{})}),(0,r.tZ)(T.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,L.j)(L.U3.DEBUGGER_USED,{action:"stepBack"}),null===t||void 0===t||t.back()},alt:"Step Back",tooltipText:"Step Back",tooltipPlacement:"bottom",children:(0,r.tZ)(B.Z,{})})]}),(0,r.tZ)(F,{stop:function(){(0,L.j)(L.U3.DEBUGGER_USED,{action:"stop"}),null===t||void 0===t||t.stop()},start:function(){(0,L.j)(L.U3.DEBUGGER_USED,{action:"start"}),null===t||void 0===t||t.start()},state:n}),(0,r.tZ)(T.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,L.j)(L.U3.DEBUGGER_USED,{action:"nextStep"}),null===t||void 0===t||t.next()},alt:"Next Step",tooltipText:"Next Step",tooltipPlacement:"bottom",children:(0,r.tZ)(_.Z,{})}),(0,r.tZ)(T.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,L.j)(L.U3.DEBUGGER_USED,{action:"skipStep"}),null===t||void 0===t||t.skip()},alt:"Skip Step",tooltipText:"Skip Step",tooltipPlacement:"bottom",children:(0,r.tZ)(R.Z,{rotate:90})}),(0,r.tZ)(T.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,L.j)(L.U3.DEBUGGER_USED,{action:"nextBreakpoint"}),null===t||void 0===t||t.continue()},alt:"Next Breakpoint",tooltipText:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(E.Z,{})})]})}var A=(0,X.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function F(e){var t=e.state,n=e.start,i=e.stop;return"terminated"===t?(0,r.tZ)(T.Z,{css:y.l0.color.accentPrimaryDefault,size:40,onClick:n,alt:"Run",tooltipText:"Run",tooltipPlacement:"bottom",children:(0,r.tZ)(U.Z,{})}):"stopping"===t||null===t?(0,r.tZ)(T.Z,{size:40,disabled:!0,alt:"Loading",tooltipText:"Loading",tooltipPlacement:"bottom",children:(0,r.tZ)(I.Z,{})}):(0,r.tZ)(T.Z,{css:"initializing"===t||"preinitializing"===t?[y.l0.color.foregroundDimmer,{animationName:A.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:y.l0.color.accentPrimaryDefault,size:40,onClick:i,alt:"Stop",tooltipText:"Stop",tooltipPlacement:"bottom",children:(0,r.tZ)(D.Z,{})})}var P=n(93160),W=n(62794),M=n(10164);function H(e){var t=e.children;return(0,r.BX)(P.Z,{background:"default",css:[y.l0.height("100%"),y.l0.width("100%"),y.l0.p(8),y.l0.overflow("auto"),{borderTopRightRadius:y.TV.borderRadius4}],children:[(0,r.BX)(s.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,r.tZ)(s.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:(0,r.tZ)(l.Z,{truncate:!0,level:4,children:"Debugger"})}),(0,r.tZ)(W.Z,{feature:M.l.Debugger}),t]}),(0,r.tZ)(a(),{id:"ffa04cbdbbf3badd",children:"a.jsx-ffa04cbdbbf3badd{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium)}"})]})}function V(e){var t=(0,c.Z)().debuggest,n=(0,d.Z)(t.mainClient),i=(0,d.Z)(n?n.state:null),o=(0,d.Z)(n?n.stackFrames:null),s=(0,d.Z)(n?n.variables:null),l=(0,d.Z)(n?n.breakpoints:null),m=function(t,n){var r=(0,f.om)(t);r&&e.onOpenFile({path:r,line:n})};return(0,r.BX)(H,{children:[(0,r.tZ)(O,{client:n}),l&&(0,r.tZ)(C,{breakpoints:l,onBreakpointClick:m,onUpdate:function(e){var t=e.breakpoint,r=e.logMessage;n&&t.pid1Id&&n.updateBreakpoint(t.pid1Id,{logMessage:r})},onRemove:function(e){var t=e.breakpoint;n&&t.pid1Id&&n.removeBreakpoint(t.pid1Id)}}),s&&n&&"paused"===i&&(0,r.tZ)(S.Z,{client:n,variables:s}),o&&"paused"===i&&(0,r.tZ)(p,{frames:o,onFrameClick:m}),n&&(0,r.tZ)("div",{className:"jsx-98cfff378e1e6f5f logs-button",children:(0,r.tZ)(u.Z,{size:"small",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var t=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.download="debugger-logs.txt",n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((function(){URL.revokeObjectURL(n.href)}),1500)}(n.getDebugLogs())},children:"Download Logs"})}),(0,r.tZ)(a(),{id:"98cfff378e1e6f5f",children:".instructions.jsx-98cfff378e1e6f5f{height:var(--space-16)}.logs-button.jsx-98cfff378e1e6f5f{position:absolute;bottom:var(--space-8);right:var(--space-8)}"})]})}},71500:function(e,t,n){n.d(t,{Z:function(){return Ce}});var r=n(35944),i=n(60536),a=n.n(i),o=n(67294),s=n(30019),l=n(63377),c=n(90317),d=n(26042),u=n(69396),f=n(10253),p=n(41664),m=n.n(p),h=n(37424),b=n(75301),g=n(6951),v=n(88075),x=n(42839),Z=n(67629),w=n(14994),y=n(3401),k=n(72806),j=n(19526),C=n(81255),N=n(93160),S=n(65632),T=n(93058),z=n(99534),B=n(29815),R=n(87653),_=n(46702),E=n(96594),I=n(94184),G=n.n(I),X=n(28898),L=n(11163),D=n(97813),U=n(33773);function O(e){var t=e.direction,n=e.url,i=(0,r.BX)("span",{className:a().dynamic([["e4375ef23f64266b",["left"===t?"rotate(90deg)":"rotate(-90deg)"]]])+" "+(G()("chevron",{hoverable:void 0!==n})||""),children:[(0,r.tZ)(U.Z,{size:20,color:n?"var(--foreground-dimmest)":"var(--background-root)"}),(0,r.tZ)(a(),{id:"e4375ef23f64266b",dynamic:["left"===t?"rotate(90deg)":"rotate(-90deg)"],children:".chevron.__jsx-style-dynamic-selector{display:inline-block;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-transition:.2s all;-moz-transition:.2s all;-o-transition:.2s all;transition:.2s all}.chevron.__jsx-style-dynamic-selector svg{width:24px;height:24px;-webkit-transform:".concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-moz-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-ms-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";-o-transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)",";transform:").concat("left"===t?"rotate(90deg)":"rotate(-90deg)","}.hoverable.__jsx-style-dynamic-selector{cursor:pointer}.hoverable.chevron.__jsx-style-dynamic-selector svg:hover{stroke:var(--accent-primary-default)}.hoverable.__jsx-style-dynamic-selector:hover{background:var(--accent-primary-default)}")})]});return n?(0,r.tZ)(m(),{href:n,children:(0,r.tZ)("a",{children:i})}):i}var A,F=function(){return(0,r.BX)("span",{title:"late",className:"jsx-c2ef7e04fe810e06",children:["late",(0,r.tZ)(a(),{id:"c2ef7e04fe810e06",children:"span.jsx-c2ef7e04fe810e06{display:inline-block;color:var(--accent-negative-default);border:1px solid var(--accent-negative-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:1px var(--space-4);font-size:var(--font-size-small)}"})]})};function P(e){var t=A.NotStarted,n=A.Started,r=A.Submitted,i=A.Reviewed;switch(e){case t:return"Not Started";case n:return"Not submitted yet";case r:return"Submitted";case i:return"Reviewed";default:return""}}function W(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?A.Submitted:!e.timeSubmitted&&e.timeLastReviewed?A.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?A.Submitted:A.Reviewed:void 0:A.Started:A.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(A||(A={}));var M=function(e,t){if(e){var n=e.indexOf("?"),r=new URLSearchParams(-1===n?"":e.slice(n));r.append("submissionReview","true");var i=-1===n?e:e.slice(0,n);return t?"".concat(i,"?").concat(r.toString(),"#").concat(t):"".concat(i,"?").concat(r.toString())}};function H(e){var t=e.result,n=e.selected,i=e.current,o=e.isLate,s=(0,z.Z)(e,["result","selected","current","isLate"]),l=(0,D.Z)(),c=i?"":M(t.url,l),f=(0,r.BX)(j.Ug,{spacing:1,align:"center",children:[(0,r.tZ)("div",{"data-microtip-position":"right","aria-label":P(t.status),role:"tooltip",className:"jsx-5d2ba38a58506d36 indicator-container",children:(0,r.tZ)("div",{className:"jsx-5d2ba38a58506d36 "+(G()("indicator",t.status)||"")})}),(0,r.tZ)(X.Z,{url:t.image}),(0,r.tZ)("div",{className:"jsx-5d2ba38a58506d36 name",children:t.name}),o&&(0,r.tZ)(F,{}),(0,r.tZ)(a(),{id:"5d2ba38a58506d36",children:".indicator-container.jsx-5d2ba38a58506d36{width:10px;height:10px;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;padding:var(--space-4)}.name.jsx-5d2ba38a58506d36{color:var(--foreground-dimmer);font-size:var(--font-size-default);max-width:230px;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}.indicator.jsx-5d2ba38a58506d36{width:8px;height:8px;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px}.indicator.submitted.jsx-5d2ba38a58506d36{background:var(--accent-yellow-dimmer)}.indicator.reviewed.jsx-5d2ba38a58506d36{background:var(--accent-positive-default)}.indicator.started.jsx-5d2ba38a58506d36{border:2px solid var(--foreground-dimmest)}"})]});return(0,r.BX)("div",(0,u.Z)((0,d.Z)({},s),{className:"jsx-39df8ba33633f058 "+(G()("result",t.status,{selected:n,current:i})||""),children:[c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(m(),{href:c,children:(0,r.tZ)("a",{className:"jsx-39df8ba33633f058 result-link",children:f})},t.submissionId),(0,r.tZ)("a",{href:c,target:"_blank",role:"tooltip","data-microtip-position":"left","aria-label":"Open in a new tab",className:"jsx-39df8ba33633f058 result-external-link",children:(0,r.tZ)(_.Z,{color:"var(--foreground-default)"})})]}):(0,r.tZ)("div",{className:"jsx-39df8ba33633f058 result-link",children:f}),(0,r.tZ)(a(),{id:"39df8ba33633f058",children:".result.jsx-39df8ba33633f058{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;background-color:var(--background-default)}.result.not-started.jsx-39df8ba33633f058{opacity:.4}.result.current.jsx-39df8ba33633f058{background-color:var(--background-root)}.selected.jsx-39df8ba33633f058{background-color:var(--background-root);opacity:1!important}.result-link.jsx-39df8ba33633f058{text-decoration:none;padding:var(--space-8)}.result-external-link.jsx-39df8ba33633f058{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);opacity:0;margin-left:auto}.result.jsx-39df8ba33633f058:hover .result-external-link.jsx-39df8ba33633f058{opacity:1}.result-external-link.jsx-39df8ba33633f058 svg{-webkit-transition:.3s stroke;-moz-transition:.3s stroke;-o-transition:.3s stroke;transition:.3s stroke}.result-external-link.jsx-39df8ba33633f058:hover svg{stroke:var(--accent-primary-default)}"})]}))}var V=function(e){var t,n,i,s=e.team,l=e.submission,c=e.submissionList,p=e.template,m=(0,L.useRouter)(),h=(0,D.Z)(),b=(0,f.Z)(o.useState([]),2),g=b[0],v=b[1],x=(0,f.Z)(o.useState(""),2),Z=x[0],w=x[1],y=(0,E.Kb)({items:g,defaultHighlightedIndex:0,onSelectedItemChange:function(e){var t=e.selectedItem;g.length&&t&&-1!==e.highlightedIndex&&t.url&&m.push(t.url)}}),k=y.isOpen,C=y.getInputProps,N=y.getMenuProps,S=y.getItemProps,T=y.openMenu,z=y.highlightedIndex,_=o.useRef(null);o.useEffect((function(){k&&_.current&&_.current.focus()}),[k]);var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(l.isGroupSubmission){var t=c;0!==e.length&&(t=t.filter((function(t){var n;return null===(n=t.submissionGroup)||void 0===n?void 0:n.users.some((function(t){var n;return null===(n=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var n=t.map((function(e){var t,n=e.submissionGroup.users.map((function(e){return e.fullName||e.username})).join(", ");return{image:e.submissionGroup.users[0].image,name:n,url:null===(t=e.repl)||void 0===t?void 0:t.url,status:W(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));v((0,B.Z)(n))}else{var r=s.students;r=0===e.length?r.filter((function(e){return e.user})).sort((function(e,t){return(e.nickname||e.user.fullName||e.user.username).localeCompare(t.nickname||t.user.fullName||t.user.username)})):r.filter((function(t){var n,r,i;return null===(i=t.nickname||(null===(n=t.user)||void 0===n?void 0:n.fullName)||(null===(r=t.user)||void 0===r?void 0:r.username))||void 0===i?void 0:i.toLocaleLowerCase().includes(e.toLocaleLowerCase())}));var i=r.map((function(e){var t,n=c.find((function(t){var n;return(null===(n=t.author)||void 0===n?void 0:n.id)===e.user.id}));return{image:e.user.image,name:e.nickname||e.user.fullName||e.user.username,url:null===n||void 0===n||null===(t=n.repl)||void 0===t?void 0:t.url,status:W(n),submissionId:null===n||void 0===n?void 0:n.id,timeSubmitted:null===n||void 0===n?void 0:n.timeSubmitted}}));v((0,B.Z)(i))}},G=c.findIndex((function(e){return e.id===l.id})),U=c[G-1],A=c[G+1],F=c.filter((function(e){return e.timeLastReviewed})).length,P=function(e){var t=s.students.find((function(t){var n;return(null===(n=t.user)||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)}));return(null===t||void 0===t?void 0:t.nickname)||(null===e||void 0===e?void 0:e.fullName)||"@".concat(null===e||void 0===e?void 0:e.username)};return(0,r.BX)("div",(0,u.Z)((0,d.Z)({},N()),{className:"jsx-e10a8ca7bd05f64a submission-search",children:[k&&(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a dropdown",children:[(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a search-box-container",children:[(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a search-icon",children:(0,r.tZ)(R.Z,{})}),(0,r.tZ)("input",(0,u.Z)((0,d.Z)({},C({value:Z,placeholder:"Navigate",onKeyDown:function(e){"Escape"===e.key&&v([])},onChange:function(e){var t=e.target.value;I(t),w(t)},ref:_})),{className:"jsx-e10a8ca7bd05f64a search-box"}))]}),(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a",children:g.map((function(e,t){return(0,r.tZ)(H,(0,u.Z)((0,d.Z)({result:e,selected:z===t,current:e.submissionId===l.id},S({index:t,item:e,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{isLate:p.dueDate&&e.timeSubmitted&&p.dueDate<e.timeSubmitted}))}))})]}),(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a navigation-element",children:[(0,r.BX)("div",{onClick:function(){T(),I()},className:"jsx-e10a8ca7bd05f64a pseudo-search-input",children:[(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a search-icon",children:(0,r.tZ)(R.Z,{})}),(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a",children:"Navigate"})]}),(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a arrow-navigation",children:[(0,r.tZ)(O,{direction:"left",url:M(null===U||void 0===U||null===(t=U.repl)||void 0===t?void 0:t.url,h)}),(0,r.BX)("div",{className:"jsx-e10a8ca7bd05f64a",children:[F,"/",c.length]}),(0,r.tZ)(O,{direction:"right",url:M(null===A||void 0===A||null===(n=A.repl)||void 0===n?void 0:n.url,h)})]})]}),(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submission-info",children:l.isGroupSubmission?l.submissionGroup.users.map((function(e){return(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submitter-row",children:(0,r.BX)(j.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(X.Z,{url:null===e||void 0===e?void 0:e.image}),(0,r.tZ)("span",{className:"jsx-e10a8ca7bd05f64a submission-name",children:P(e)})]})},null===e||void 0===e?void 0:e.id)})):(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submission-identity",children:(0,r.tZ)("div",{className:"jsx-e10a8ca7bd05f64a submitter-row",children:(0,r.BX)(j.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(X.Z,{url:null===(i=l.author)||void 0===i?void 0:i.image}),(0,r.tZ)("span",{className:"jsx-e10a8ca7bd05f64a submission-name",children:P(l.author)})]})})})}),(0,r.tZ)(a(),{id:"e10a8ca7bd05f64a",children:".submission-search.jsx-e10a8ca7bd05f64a{width:100%;position:relative;border:1px solid;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest)}.navigation-element.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.pseudo-search-input.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;color:var(--foreground-dimmer);font-size:var(--font-size-default)}.arrow-navigation.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-dimmest);font-size:var(--font-size-small);-webkit-box-align:baseline;-webkit-align-items:baseline;-moz-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;padding:0 var(--space-8)}.submitter-row.jsx-e10a8ca7bd05f64a{text-decoration:none;color:var(--foreground-default)}.submission-info.jsx-e10a8ca7bd05f64a{display:grid;grid-gap:var(--space-8);padding:var(--space-16)}.submission-name.jsx-e10a8ca7bd05f64a{color:var(--foreground-dimmer);font-size:var(--font-size-default)}.search-box.jsx-e10a8ca7bd05f64a{border:none;outline:none;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;font-size:var(--font-size-default);background-color:inherit;color:var(--foreground-default)}.search-icon.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-16);background-color:inherit}.search-box-container.jsx-e10a8ca7bd05f64a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;background-color:var(--background-default)}.dropdown.jsx-e10a8ca7bd05f64a{position:absolute;background:var(--background-default);z-index:10;width:350px;max-height:426px;overflow-y:scroll;overflow-y:overlay;white-space:nowrap;border:1px solid;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-color:var(--foreground-dimmest);margin:-1px}"})]}))},Y=n(17847),q=function(e){return{short:(0,Y.Z)(e,"do MMM"),long:(0,Y.Z)(e,"do MMM, hh:mm a")}};function J(e){var t=e.submission,n=e.dueDate;return(0,r.BX)("div",{className:"jsx-5ae79eda8485444a submission-info",children:[t.timeSubmitted?(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-header",children:(0,r.BX)(j.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(v.Z,{}),(0,r.tZ)("span",{className:"jsx-5ae79eda8485444a submitted-text",children:"Submitted"}),n&&n<t.timeSubmitted&&(0,r.tZ)(F,{})]})}),(0,r.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-time",children:(0,r.BX)(j.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(w.Z,{}),(0,r.tZ)("span",{className:"jsx-5ae79eda8485444a",children:q(new Date(t.timeSubmitted)).long})]})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-header",children:(0,r.BX)(j.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(Z.Z,{}),(0,r.tZ)("span",{className:"jsx-5ae79eda8485444a submitted-text",children:"Not submitted"})]})}),(0,r.tZ)("div",{className:"jsx-5ae79eda8485444a submitted-time",children:(0,r.BX)(j.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(b.Z,{}),(0,r.BX)("span",{className:"jsx-5ae79eda8485444a",children:["Forked"," ",q(new Date(t.repl.timeCreated)).short]})]})})]}),(0,r.tZ)(a(),{id:"5ae79eda8485444a",children:".submission-info.jsx-5ae79eda8485444a{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8)}.submitted-header.jsx-5ae79eda8485444a{color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap}.submitted-header.jsx-5ae79eda8485444a svg{width:2em;height:2em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.submitted-time.jsx-5ae79eda8485444a{color:var(--foreground-dimmer);padding:var(--space-8)var(--space-16);white-space:nowrap;font-size:var(--font-size-default)}.submitted-time.jsx-5ae79eda8485444a svg{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}"})]})}function K(e){var t=e.repl,n=e.submission,i=(0,h.H)(),o=(0,T.Z)().showError,s=(0,f.Z)((0,c.SyV)({onError:function(e){return o(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&o(e.reviewRepl.message)}}),2),l=s[0],p=s[1].loading,m=(0,f.Z)((0,c.F_9)(),1)[0],b=Boolean(n.timeLastReviewed);return(0,r.BX)(N.Z,{css:[C.l0.p(8),C.l0.borderRadius(8)],children:[(0,r.BX)("div",{className:"jsx-e661e3db2a261a56 feedback-header",children:[(0,r.tZ)(S.Z,{}),(0,r.tZ)("span",{className:"jsx-e661e3db2a261a56",children:"Feedback"})]}),(0,r.BX)("div",{className:"jsx-e661e3db2a261a56 mark-reviewed",children:[(0,r.tZ)(k.Z,{id:i("reviewed-status"),disabled:p,checked:b,onChange:function(){return e=!b,void l({variables:{replId:t.id,status:e},optimisticResponse:{reviewRepl:(0,u.Z)((0,d.Z)({},t),{submission:(0,u.Z)((0,d.Z)({},n),{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,r.tZ)("label",{htmlFor:i("reviewed-status"),className:"jsx-e661e3db2a261a56",children:b?"Reviewed":"Mark as reviewed"})]}),n.timeSubmitted&&(0,r.tZ)("div",{className:"jsx-e661e3db2a261a56 unsubmit",children:(0,r.tZ)(g.Z,{onClick:function(){m({variables:{replId:t.id},optimisticResponse:{unsubmitRepl:(0,u.Z)((0,d.Z)({},t),{submission:(0,u.Z)((0,d.Z)({},n),{timeLastReviewed:null})})}})},fullWidth:!0,children:"Unsubmit"})}),(0,r.tZ)(a(),{id:"e661e3db2a261a56",children:".feedback-header.jsx-e661e3db2a261a56{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);color:var(--foreground-default);font-weight:var(--font-weight-medium);white-space:nowrap}.feedback-header.jsx-e661e3db2a261a56 svg{width:1.4em;height:1.4em;padding:.3em;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.mark-reviewed.jsx-e661e3db2a261a56,.unsubmit.jsx-e661e3db2a261a56{display:grid;grid-auto-flow:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8);padding:var(--space-8)var(--space-16);font-size:var(--font-size-default);cursor:pointer;color:var(--foreground-dimmer)}"})]})}function $(e){var t=e.replUrl;return(0,r.tZ)(m(),{href:"".concat(t,"/history"),children:(0,r.BX)("a",{target:"_blank",className:"jsx-d3efcaed296b8808",children:[(0,r.tZ)(g.Z,{Icon:x.HistoryIcon,fullWidth:!1,className:"history-button",children:"See Repl History"}),(0,r.tZ)(a(),{id:"d3efcaed296b8808",children:"a.jsx-d3efcaed296b8808{text-decoration:none}.history-button svg{width:1em}"})]})})}function Q(e){var t,n,i,o=e.data;if(!o||"Repl"!==o.repl.__typename||"Team"!==(null===(t=o.repl.owner)||void 0===t?void 0:t.__typename)||"ReplSubmission"!==(null===(n=o.repl.submission)||void 0===n?void 0:n.__typename)||"ReplTemplate"!==(null===(i=o.repl.template)||void 0===i?void 0:i.__typename))return null;var s=o.repl.submission,l=o.repl.template.submissions;return(0,r.BX)("div",{className:"jsx-a8b6b0d83e1c54ba education-pane-container",children:[(0,r.BX)("div",{className:"jsx-a8b6b0d83e1c54ba contents",children:[(0,r.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba template-selector-container",children:(0,r.tZ)(V,{team:o.repl.owner,template:o.repl.template,submission:s,submissionList:l})}),(0,r.tZ)(J,{submission:s,dueDate:o.repl.template.dueDate}),(0,r.tZ)(K,{repl:o.repl,submission:s}),(0,r.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba buffer"})]}),(0,r.BX)("div",{className:"jsx-a8b6b0d83e1c54ba bottom-dock",children:["Repl"===o.repl.__typename&&(0,r.tZ)($,{replUrl:o.repl.url}),(0,r.tZ)("div",{className:"jsx-a8b6b0d83e1c54ba",children:(0,r.tZ)(m(),{href:"/team/".concat(o.repl.owner.username,"/templates/").concat(o.repl.template.repl.slug),children:(0,r.tZ)(g.Z,{Icon:y.Z,children:"Return to submissions"})})})]}),(0,r.tZ)(a(),{id:"a8b6b0d83e1c54ba",children:".education-pane-container.jsx-a8b6b0d83e1c54ba{padding:var(--space-8);max-width:400px;width:inherit;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.contents.jsx-a8b6b0d83e1c54ba{display:grid;grid-gap:var(--space-16)}.bottom-dock.jsx-a8b6b0d83e1c54ba{display:grid;grid-gap:var(--space-8);margin-top:auto}.template-selector-container.jsx-a8b6b0d83e1c54ba{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]})}var ee,te=n(47568),ne=n(34051),re=n.n(ne),ie=n(61668),ae=n(44781),oe=n(1879),se=n(47421),le=n(78120),ce=n(16064),de=function(e){var t=e.fileName,n=e.docRef,i=e.initialContents,s=(0,ce.Z)({filePath:t,fontSize:14,indentSize:4,indentIsSpaces:!0}),l=s.view,c=s.ref;return o.useEffect((function(){if(l){var e=se.tk.updateListener.of((function(e){n.current=e.state.doc}));l.dispatch({effects:le.Py.appendConfig.of(e)}),l.focus()}}),[l,n]),o.useEffect((function(){l&&(l.state.doc.length||l.dispatch({changes:{from:0,insert:i}}))}),[l,i]),(0,r.BX)("div",{className:"jsx-d59ba8968f57599c editable-area",children:[(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor-wrapper",children:(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor",children:(0,r.tZ)("div",{ref:c,className:"jsx-d59ba8968f57599c"})})}),(0,r.tZ)(a(),{id:"d59ba8968f57599c",children:".editable-area.jsx-d59ba8968f57599c{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor-wrapper.jsx-d59ba8968f57599c{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative}.editor.jsx-d59ba8968f57599c{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-d59ba8968f57599c{height:100%;width:100%;z-index:5}"})]})},ue=function(e){var t=e.title,n=e.fileName,i=e.initialContents,l=e.isOpen,c=e.onSave,d=e.onCancel,u=o.useRef(null);return(0,r.BX)(oe.Z,{maxWidth:872,isOpen:l,onRequestClose:function(){},preventClose:!0,children:[(0,r.tZ)("div",{className:"jsx-c68269737c22d0ec editor-modal",children:(0,r.BX)(j.gC,{align:"stretch",spacing:2,children:[(0,r.BX)(s.Z,{level:3,children:["Edit ",t.toLowerCase()]}),(0,r.tZ)(de,{docRef:u,fileName:n,initialContents:i}),(0,r.tZ)(j.Ug,{justify:"end",align:"end",children:(0,r.BX)(j.Ug,{justify:"end",align:"end",spacing:1,children:[(0,r.tZ)(g.Z,{onClick:function(){return d()},children:"Cancel"}),(0,r.tZ)(g.Z,{color:"primary",onClick:function(){var e;return u.current&&c(null===(e=u.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,r.tZ)(a(),{id:"c68269737c22d0ec",children:".editor-modal.jsx-c68269737c22d0ec{padding:var(--space-16)}"})]})};function fe(e){var t="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(t,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(t,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(t,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}(ee||(ee={}));var pe=n(2916),me=n(43902),he=n(64080),be=n(88652),ge=n(78135),ve=n(83770),xe=n(25108);function Ze(e){var t=e.attachments;return(0,r.tZ)("div",{className:"manage-attachments",children:(0,r.BX)(j.gC,{spacing:2,children:[(0,r.tZ)(we,{attachment:t.find((function(e){return e.fileName===ee.LessonPlan})),fileName:ee.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,r.tZ)(we,{attachment:t.find((function(e){return e.fileName===ee.Instructions})),fileName:ee.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function we(e){var t,n=e.attachment,i=e.fileName,a=e.label,s=e.helpText,l=(0,pe.Z)(),d=(0,T.Z)(),u=d.showConfirm,p=d.showError,m=(0,ge.I0)(),h=(0,ve.Z)(),b=(0,f.Z)((0,c.RG9)({onCompleted:function(){return u("Updated "+i)},onError:function(e){xe.log(e),p("Error")}}),2),g=b[0],v=b[1],x=o.useCallback(function(){var e=(0,te.Z)(re().mark((function e(t){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l&&(g({variables:{input:{replId:l.id,fileName:i,contents:t,lastModified:(new Date).toISOString()}}}),i===ee.Instructions&&m({type:"INSTRUCTIONS_UPLOADED",wid:h,contents:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,i,g,h,m]);return l&&(t=i===ee.LessonPlan?function(e){var t=e.language;return"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(fe(t),"\n  ")}({language:l.language}):function(e){var t=e.language;return"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(fe(t),"\n  ")}({language:l.language})),(0,r.tZ)(ye,{loading:!l||v.loading,fileName:i,contents:null===n||void 0===n?void 0:n.contents,defaultContents:t,label:a,helpText:s,attachmentLastUploadedAgo:n?(0,be.Sy)(new Date(n.timeUpdated)):void 0,onUploadFile:x})}function ye(e){var t=e.loading,n=e.fileName,i=e.contents,s=e.defaultContents,l=e.label,c=e.helpText,d=e.attachmentLastUploadedAgo,u=e.onUploadFile,p=(0,f.Z)(o.useState(!1),2),m=p[0],h=p[1];return(0,r.BX)("div",{className:"jsx-5b5c01bd3abb3f44 attachment",children:[(0,r.tZ)(ue,{title:l,fileName:n,isOpen:m,initialContents:i||s,onCancel:function(){return h(!1)},onSave:function(e){h(!1),u(e)}}),(0,r.BX)(j.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,r.BX)(j.gC,{spacing:1,children:[(0,r.BX)(j.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,r.tZ)(ae.Z,{fontWeight:"medium",children:l}),(0,r.tZ)(ie.Z,{label:c})]}),d&&(0,r.BX)(ae.Z,{size:"xsmall",children:["Uploaded ",d]})]}),t?(0,r.tZ)(me.Z,{style:{width:"16px",height:"16px"}}):(0,r.tZ)(g.Z,{border:!1,filled:!1,Icon:he.Z,onClick:(0,te.Z)(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0);case 1:case"end":return e.stop()}}),e)})))})]}),(0,r.tZ)(a(),{id:"5b5c01bd3abb3f44",children:".attachment.jsx-5b5c01bd3abb3f44{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"})]})}function ke(e){var t,n,i=e.data;return!i||"Repl"!==i.repl.__typename||"Team"!==(null===(t=i.repl.owner)||void 0===t?void 0:t.__typename)||"ReplTemplate"!==(null===(n=i.repl.template)||void 0===n?void 0:n.__typename)||i.repl.submission?null:(0,r.BX)("div",{className:"jsx-ea2ca64296d8f56a project-view-container",children:[(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a project-view-contents",children:(0,r.tZ)(Ze,{attachments:i.repl.attachments})}),(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a bottom-dock",children:(0,r.tZ)(ae.Z,{size:"small",children:(0,r.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-ea2ca64296d8f56a",children:"Find more curriculum on Curriculum Hub"})})}),(0,r.tZ)(a(),{id:"ea2ca64296d8f56a",children:".project-view-container.jsx-ea2ca64296d8f56a{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.bottom-dock.jsx-ea2ca64296d8f56a{display:grid;grid-gap:var(--space-8);margin-top:auto}"})]})}var je=n(25108);function Ce(e){var t,n,i,o,d,u,f,p=e.style,m=(0,l.Z)(),h=(0,c.SAU)({variables:{replId:m}}),b=h.data,g=h.loading,v=h.error;return g&&(u=(0,r.tZ)("div",{children:"Loading..."})),v&&(je.error(v),u=(0,r.tZ)("div",{children:"Something went wrong"})),b&&"Repl"===b.repl.__typename&&"Team"===(null===(t=b.repl.owner)||void 0===t?void 0:t.__typename)&&"ReplTemplate"===(null===(n=b.repl.template)||void 0===n?void 0:n.__typename)&&"ReplSubmission"===(null===(i=b.repl.submission)||void 0===i?void 0:i.__typename)&&(u=(0,r.tZ)(Q,{data:b}),f="Submissions"),b&&"Repl"===b.repl.__typename&&"Team"===(null===(o=b.repl.owner)||void 0===o?void 0:o.__typename)&&"ReplTemplate"===(null===(d=b.repl.template)||void 0===d?void 0:d.__typename)&&!b.repl.submission&&(u=(0,r.tZ)(ke,{data:b}),f="Curriculum"),(0,r.BX)("div",{style:p,className:"jsx-a46a7aae0e88f5b6 education-pane",children:[(0,r.tZ)("div",{className:"jsx-a46a7aae0e88f5b6 education-pane-header",children:(0,r.tZ)(s.Z,{level:4,children:f})}),u,(0,r.tZ)(a(),{id:"a46a7aae0e88f5b6",children:".education-pane.jsx-a46a7aae0e88f5b6{background-color:var(--background-default);color:var(--foreground-dimmer);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8)}.education-pane-header.jsx-a46a7aae0e88f5b6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;color:var(--foreground-default);width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap}"})]})}},97405:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(35944),i=n(60536),a=n.n(i),o=(n(67294),n(19526)),s=n(30019),l=n(44781),c=n(69346),d=n(81255),u=n(87514),f=n(5886),p={styles:(0,r.tZ)(a(),{id:"223f8ac8383e5040",children:"*.jsx-223f8ac8383e5040{max-width:100%}"}),className:"jsx-223f8ac8383e5040"};function m(e){var t=e.children;return(0,r.BX)("div",{className:"jsx-f9a53312d33ef027 enveditor",children:[(0,r.BX)(o.gC,{spacing:2,align:"stretch",justify:"center",className:p.className,children:[(0,r.BX)(o.gC,{spacing:1,align:"stretch",justify:"center",className:p.className,children:[(0,r.BX)(c.Z,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.flex.wrap],children:[(0,r.tZ)(s.Z,{truncate:!0,level:4,children:"Secrets"}),(0,r.tZ)(f.Co,{iconLeft:(0,r.tZ)(u.Z,{}),href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",small:!0,text:"Docs",target:"_blank"})]}),(0,r.tZ)(l.Z,{size:"small",foreground:"2",children:"System environment variables."})]}),t]}),p.styles,(0,r.tZ)(a(),{id:"f9a53312d33ef027",children:".enveditor.jsx-f9a53312d33ef027{height:100%;width:100%;-webkit-border-top-right-radius:var(--border-radius-4);-moz-border-radius-topright:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);background-color:var(--background-default);padding:var(--space-8);overflow:auto}"})]})}},65407:function(e,t,n){var r=n(10253),i=n(35944),a=n(60536),o=n.n(a),s=n(67294),l=n(41942),c=n(22776),d=n(57263),u=n(48055),f=n(99408),p=n(92876),m=n(6625),h=n(63377),b=n(25108),g=".lesson/".concat("instructions.md"),v=function(e){var t=e.contents,n=(0,f.Z)().fs,r=(0,c.Z)(n,g);return(0,i.BX)("div",{className:o().dynamic([["4a2a9dfc904beede",[d.j.tabletMin]]])+" root",children:[(0,i.tZ)("div",{className:o().dynamic([["4a2a9dfc904beede",[d.j.tabletMin]]])+" content",children:(0,i.tZ)(l.ZP,{components:{img:r},sourcePos:!0,children:t})}),(0,i.tZ)(o(),{id:"4a2a9dfc904beede",dynamic:[d.j.tabletMin],children:".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative}.content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32)var(--space-16)}@media only screen and (min-width:".concat(d.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48)var(--space-32)}}")})]})};t.Z=function(){var e=(0,h.Z)(),t=(0,f.Z)().fs,n=(0,m.Z)(),a=(0,r.Z)(s.useState(null),2),o=a[0],l=a[1];return s.useEffect((function(){t.readFile(g).then((function(e){if(n.current)return e.error?(b.error(e.error),void p.$e((function(t){t.setTag("instructions-viewer",!0),p.Tb("Error loading instructions viewier: ".concat(e.error))}))):void l(e.content.toString())}))}),[t,n,e]),o?(0,i.tZ)(v,{contents:o}):(0,i.tZ)(u.Z,{preventHighlightBorder:!0})}},52617:function(e,t,n){n.d(t,{Z:function(){return pe}});var r=n(10253),i=n(35944),a=n(67294),o=n(19526),s=n(46702),l=n(24291),c=n(6951),d=n(41942),u=n(60731),f=n(99408),p=n(33773),m=n(64080),h=n(60536),b=n.n(h),g=n(30019);var v=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,a=e.actions,s=void 0===a?[]:a;return(0,i.BX)(o.Ug,{justify:"space-between",align:"center",children:[(0,i.tZ)(b(),{id:"fd8117a15303f4ca",children:".header-action.jsx-fd8117a15303f4ca{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-dimmer)}.header-action.jsx-fd8117a15303f4ca:hover{background:var(--background-higher);cursor:pointer}"}),(0,i.tZ)(g.Z,{level:r?5:4,children:t}),(0,i.tZ)(o.Ug,{spacing:"4px",align:"center",children:s&&s.map((function(e,t){return(0,i.tZ)("div",{onClick:e.action,className:"jsx-fd8117a15303f4ca header-action",children:e.icon},t)}))})]})},x=n(29815),Z=n(94184),w=n.n(Z);var y=function(e){var t=e.fileDrag,n=e.children,o=(0,r.Z)(a.useState(!1),2),s=o[0],l=o[1],c=a.useRef(0);return(0,i.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var a=r[i];t.accept.includes(a.type)||(n=!1)}n&&(l(!0),c.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),c.current--,0===c.current&&l(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),c.current=0,l(!1),(0,x.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-68ea6c6d36b196a3 section",children:[(0,i.tZ)(b(),{id:"68ea6c6d36b196a3",children:".section.jsx-68ea6c6d36b196a3{position:relative;width:100%}.dragfilter.jsx-68ea6c6d36b196a3{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);opacity:.2}.dragfilter.hidden.jsx-68ea6c6d36b196a3{display:none!important}"}),n,(0,i.tZ)("div",{className:"jsx-68ea6c6d36b196a3 "+(w()("dragfilter",{hidden:!s})||"")})]})};var k,j=function(){var e=(0,f.Z)().session,t=(0,r.Z)(a.useState(!1),2),n=t[0],s=t[1];return(0,i.BX)(y,{children:[(0,i.tZ)(v,{title:"Kaboom",actions:[{icon:(0,i.tZ)(p.Z,{rotate:n?0:-90}),action:function(){return s(!n)}}]}),n&&(0,i.BX)(o.gC,{spacing:1,children:[(0,i.tZ)("div",{}),(0,i.tZ)(c.Z,{Icon:m.Z,size:"small",onClick:function(){return e.openFile("template.html")},children:"Edit HTML Template"})]})]})},C=n(92002),N=n(42941),S=n(27206),T=n(44372),z=n(37432),B=n(17556),R=n(58794),_=n(48551),E=n(93058),I=n(97813),G=n(65456),X=n(1879),L=n(7835);function D(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function U(e,t){k||(k=document.createElement("input")).setAttribute("type","file"),k.setAttribute("accept",t.join(","));var n=function(){k.files&&((0,x.Z)(k.files).forEach(e),k.removeEventListener("change",n))};k.addEventListener("change",n),k.click()}var O=n(41654);var A=function(e){var t=e.isActive,n=e.name,s=e.icon,l=e.options,c=e.onClick,d=e.onRename,u=(0,r.Z)(a.useState(!1),2),f=u[0],p=u[1],m=(0,r.Z)(a.useState(null),2),h=m[0],g=m[1],v=(0,B.Z)((function(){p(!1)}),[]),x=(0,B.Z)((function(){g(null)}),[]);return a.useEffect((function(){x.current&&null!==h&&x.current.focus()}),[x,h]),(0,i.BX)("div",{onClick:c,className:"jsx-103c0085cc983ea1 "+(w()("entry",{active:t&&null===h})||""),children:[(0,i.BX)(o.Ug,{spacing:1,align:"center",children:[s,null===h?(0,i.tZ)("p",{className:"jsx-103c0085cc983ea1",children:n}):(0,i.tZ)(S.ZP,{ref:x,value:h,onChange:function(e){g(e.currentTarget.value)},onKeyDown:D({Escape:function(){g(null)},Enter:function(){d&&h&&d(h),g(null)}})})]}),l&&l.length>0&&(0,i.tZ)("div",{onClick:function(e){e.stopPropagation(),p(!f)},className:"jsx-103c0085cc983ea1 "+(w()("options-icon",{active:t})||""),children:(0,i.tZ)(O.MoreVertical,{})}),l&&l.length>0&&f&&(0,i.tZ)("div",{ref:v,onKeyDown:D({Escape:function(){p(!1)}}),className:"jsx-103c0085cc983ea1 options-box",children:l.map((function(e){return e?(0,i.tZ)("div",{onClick:function(t){t.stopPropagation(),p(!1),e.action(),"Rename"===e.name&&g(n)},className:"jsx-103c0085cc983ea1 "+(w()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}),(0,i.tZ)(b(),{id:"103c0085cc983ea1",children:".entry.jsx-103c0085cc983ea1{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative}.entry.active.jsx-103c0085cc983ea1{background:var(--accent-primary-default)!important;color:var(--white)!important;font-weight:var(--font-weight-medium)!important}.entry.jsx-103c0085cc983ea1:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer}.options-icon.jsx-103c0085cc983ea1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest)}.options-icon.jsx-103c0085cc983ea1:hover{color:var(--foreground-dimmest)}.options-icon.active.jsx-103c0085cc983ea1{opacity:1!important;color:var(--white)!important}.entry.jsx-103c0085cc983ea1:hover .options-icon.jsx-103c0085cc983ea1{opacity:1}.options-box.jsx-103c0085cc983ea1{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular)!important;z-index:500}.option.jsx-103c0085cc983ea1{padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-default)}.option.danger.jsx-103c0085cc983ea1{color:var(--accent-negative-default)}.option.jsx-103c0085cc983ea1:hover{background:var(--background-higher)}.option.danger.jsx-103c0085cc983ea1:hover{background:var(--accent-negative-default);color:var(--white)}"})]})},F=n(57704);function P(e){var t=e.close,n=e.entries,o=(0,f.Z)(),s=o.fs,l=o.session,c=(0,B.Z)(t,[]),d=(0,E.Z)().showError,u=(0,r.Z)((0,T.Z)({name:""}),3),p=u[0],m=u[2];return a.useEffect((function(){c.current&&c.current.focus()}),[c]),(0,i.tZ)(S.ZP,{ref:c,name:"name",onChange:m,onKeyDown:D({Escape:t,Enter:function(){var e="".concat(p.name,".js"),r="code/".concat(e);n.includes(e)?d("file '".concat(p.name,"' already exists")):(s.writeFile(r,R.Z.from("")).then((function(){l.openFile(r)})),t())}})})}var W,M=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,o=(0,I.Z)(),s=(0,r.Z)(a.useState(!1),2),l=s[0],c=s[1],d=(0,E.Z)().showError,u=(0,r.Z)(a.useState(null),2),p=u[0],m=u[1],h=((0,z.Z)({path:"code",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===G.Tv.File})).map((function(e){return e.filename})).sort();return(0,i.BX)(y,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var t="code/".concat(e.name);h.includes(t)?d("scene '".concat((0,_.eb)(e.name),"' already exists")):e.text().then((function(e){n.writeFile(t,R.Z.from(e))}))}},children:[(0,i.tZ)(v,{sub:!0,title:"Code",actions:[{icon:(0,i.tZ)(C.Z,{}),action:function(){return c(!0)}}]}),(0,i.tZ)(N.Z,{height:"4px"}),(0,i.tZ)("div",{children:h.map((function(e){var r="code/".concat(e),a=(0,_.eb)(e),s=[{name:"Rename",action:function(){}}];return"main"!==a&&s.push({name:"Delete",action:function(){return m(r)},danger:!0}),(0,i.tZ)(A,{isActive:r===o,onClick:function(){return t(r)},onRename:function(e){n.moveFile(r,"code/".concat(e,".js")).then((function(e){e.error&&d("failed to rename")}))},name:a,options:s},a)}))}),l&&(0,i.tZ)(P,{entries:h,close:function(){return c(!1)}}),p&&(0,i.tZ)(X.Z,{isOpen:Boolean(p),onRequestClose:function(){return m(null)},children:(0,i.tZ)(L.Z,{danger:!0,prompt:"Delete scene '".concat((0,_.eb)(p),"' ?"),desc:"Are you sure you want to delete this scene? This action cannot be undone.",onCancel:function(){return m(null)},confirmText:"Yes, delete this scene",icon:(0,i.tZ)(F.Z,{}),onConfirm:function(){n.deleteFile(p),m(null)}})})]})},H=n(26042),V=n(69396),Y=n(27668),q=n(49619),J=n(14924);!function(e){e.Ready="READY",e.Loading="LOADING",e.Error="ERROR"}(W||(W={}));var K=n(91513),$=n(54098),Q=n.n($),ee=n(44781);var te=function(e){var t=e.kind,n=e.renderItem,s=e.onRequestClose,l=e.onAdd,d=function(e){var n="".concat(k,"/").concat(e);Q()(n).then((function(e){return e.arrayBuffer()})).then((function(r){var i="".concat(t,"/").concat(e);p.writeFile(i,R.Z.from(r)).then((function(t){if(t.error)throw new Error(t.error);m.openFile(i),l&&l(e,n)})),s()})).catch((function(){return j("Failed to fetch ".concat(e))}))},u=(0,f.Z)(),p=u.fs,m=u.session,h=(0,r.Z)(a.useState([]),2),v=h[0],x=h[1],Z=(0,r.Z)(a.useState(""),2),w=Z[0],y=Z[1],k="https://kaboomjs.com/".concat(t),j=(0,E.Z)().showError;return a.useEffect((function(){Q()("https://kaboomjs.com/api/assets/".concat(t)).then((function(e){return e.json()})).then((function(e){return x(e)})).catch((function(){return j("Failed to fetch assets lib listing")}))}),[x,j,k]),(0,i.BX)("div",{className:"jsx-d616aed56d26af98 assets",children:[(0,i.BX)(o.gC,{spacing:2,children:[(0,i.tZ)(g.Z,{level:3,children:"Assets Lib (beta)"}),0===v.length?(0,i.tZ)(ee.Z,{foreground:2,children:"Loading..."}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(S.ZP,{large:!0,label:"Search",onChange:function(e){y(e.target.value)}}),(0,i.tZ)("div",{className:"jsx-d616aed56d26af98 box",children:v.filter((function(e){return!w||e.includes(w)})).map((function(e){return(0,i.tZ)(a.Fragment,{children:n({name:e,url:"".concat(k,"/").concat(e),add:function(){return d(e)}})},e)}))}),(0,i.tZ)(c.Z,{size:"small",onClick:function(){v.length>0&&d(v[Math.floor(Math.random()*v.length)])},children:"I\u2019m Feeling Lucky"})]})]}),(0,i.tZ)(b(),{id:"d616aed56d26af98",children:".assets.jsx-d616aed56d26af98{padding:var(--space-24)}.box.jsx-d616aed56d26af98{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll}"})]})},ne=n(37424);function re(e){var t=e.url,n=e.add;return(0,i.BX)(i.HY,{children:[(0,i.tZ)("img",{src:t,loading:"lazy",onClick:n,className:"jsx-4ad892a0258c4ced entry"}),(0,i.tZ)(b(),{id:"4ad892a0258c4ced",children:".entry.jsx-4ad892a0258c4ced{padding:var(--space-16);height:120px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.entry.jsx-4ad892a0258c4ced:hover{cursor:pointer;background:var(--background-root)}"})]})}function ie(e){var t=e.close,n=e.entries,o=e.onFileOpen,s=(0,f.Z)().fs,l=(0,B.Z)(t,[]),c=a.useRef(null),d=(0,E.Z)().showError,p=(0,r.Z)(a.useState({name:"",width:32,height:32}),2),m=p[0],h=p[1];a.useEffect((function(){c.current&&c.current.focus()}),[c]);var b=function(){if(0!==m.name.length){var e=m.width,r=m.height;if(isNaN(e)||isNaN(r)||e<=0||r<=0)d("invalid width / height!");else if(e>256||r>256)d("only supports sprites smaller than 256x256 yet");else{var i="".concat(m.name,".pedit"),a="sprites/".concat(i);n.includes(i)?d("sprite '".concat(m.name,"' already exists")):(s.writeFile(a,R.Z.from(JSON.stringify({fromKaboom:!0,width:m.width,height:m.height}))).then((function(){o(a)})),t())}}else d("invalid 'name'")},g=(0,ne.H)();return(0,i.tZ)("div",{ref:l,className:"dialog",onKeyDown:D({Escape:t,Enter:b}),children:(0,i.tZ)(u.Tg,{elevated:!0,css:[u.l0.borderRadius(8),u.l0.p(8),u.l0.mt(8)],children:(0,i.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,i.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:g("name"),children:(0,i.tZ)(u.xv,{color:"dimmer",variant:"small",children:"Name"})}),(0,i.tZ)(u.II,{id:g("name"),ref:c,value:m.name,onChange:function(e){h((0,V.Z)((0,H.Z)({},m),{name:e.target.value}))}})]}),(0,i.BX)(u.G7,{css:[u.l0.rowWithGap(8)],children:[(0,i.BX)(u.G7,{css:[u.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,i.tZ)("label",{htmlFor:g("width"),children:(0,i.tZ)(u.xv,{color:"dimmer",variant:"small",children:"Width"})}),(0,i.tZ)(u.II,{id:g("width"),value:"".concat(m.width),onChange:function(e){return h((0,V.Z)((0,H.Z)({},m),{width:parseInt(e.target.value,10)||0}))}})]}),(0,i.BX)(u.G7,{css:[u.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,i.tZ)("label",{htmlFor:g("height"),children:(0,i.tZ)(u.xv,{color:"dimmer",variant:"small",children:"Height"})}),(0,i.tZ)(u.II,{id:g("height"),value:"".concat(m.height),onChange:function(e){return h((0,V.Z)((0,H.Z)({},m),{height:parseInt(e.target.value,10)||0}))}})]})]}),(0,i.BX)(u.G7,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,i.tZ)(u.zx,{onClick:t,text:"Cancel"}),(0,i.tZ)(u.zx,{colorway:"primary",onClick:b,text:"Create",iconLeft:(0,i.tZ)(C.Z,{})})]})]})})})}var ae=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,o=(0,E.Z)().showError,s=(0,I.Z)(),l=(0,r.Z)(a.useState(!1),2),c=l[0],d=l[1],p=(0,r.Z)(a.useState(!1),2),m=p[0],h=p[1],g=(0,r.Z)(a.useState(null),2),Z=g[0],w=g[1],k=(0,K.Z)(s),j=function(e,t){var n=(0,a.useState)({}),r=n[0],i=n[1],o=(0,a.useRef)({}),s=(0,a.useCallback)((function(n){var a=r[n];if(a)return a;a={state:W.Loading},i((function(e){return(0,V.Z)((0,H.Z)({},e),(0,J.Z)({},n,a))}));var s=function(e){var t=o.current;t[e](),delete t[e],i((function(t){var n=(0,H.Z)({},t);return delete n[e],n}))};return o.current[n]=e.watchFile(n,{onChange:function(e){i((function(r){return(0,V.Z)((0,H.Z)({},r),(0,J.Z)({},n,{content:t?t(e,n):e,state:W.Ready}))}))},onMoveOrDelete:function(){s(n)},onError:function(){s(n)}}),a}),[e,r,t]);return(0,a.useEffect)((function(){var e=o.current;return function(){for(var t in i({}),e)e[t](),delete e[t]}}),[]),s}(n,(function(e,t){if(t.endsWith("pedit")){var n=JSON.parse(e.toString());if(!n.fromKaboom)return n.frames[0]}else{var r=(0,_.yC)(t);if(r)return"data:".concat(r,";base64,").concat(e.toString("base64"))}return""})),S=((0,z.Z)({path:"sprites",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===G.Tv.File})).map((function(e){return e.filename})).sort(),T=["image/png","image/jpeg",".pedit"],B=function(e){var t="sprites/".concat(e.name);if(S.includes(t))return o("sprite '".concat((0,_.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){n.writeFile(t,R.Z.from(e))}))},X=[{icon:(0,i.tZ)(Y.Z,{}),action:function(){return h(!0)}},{icon:(0,i.tZ)(q.Z,{}),action:function(){return U(B,T)}},{icon:(0,i.tZ)(C.Z,{}),action:function(){return d(!0)}}];return(0,i.BX)(y,{fileDrag:{accept:T,onDrop:B},children:[(0,i.tZ)(v,{sub:!0,title:"Sprites",actions:X}),(0,i.tZ)(N.Z,{height:"4px"}),(0,i.tZ)("div",{className:"jsx-286709118fe5858",children:S.map((function(e){var r="sprites/".concat(e),a=(0,_.r6)(e),l=(0,_.eb)(e),c=j(r),d=k?[{name:"Insert load code",action:function(){var e="".concat("pedit"===a?"loadPedit":"loadSprite","(").concat(JSON.stringify(l),", ").concat(JSON.stringify(r),");");k({code:e})}}]:[];return(0,i.tZ)(A,{isActive:r===s,onClick:function(){return t(r)},onRename:function(e){n.moveFile(r,"sprites/".concat(e,".").concat(a)).then((function(e){e.error&&o("failed to rename")}))},icon:(0,i.tZ)("div",{className:"jsx-286709118fe5858 preview-img",children:c.state===W.Ready&&(0,i.tZ)("img",{src:c.content,className:"jsx-286709118fe5858"})}),name:l,options:(0,x.Z)(d).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return w(r)},danger:!0}])},l)}))}),c&&(0,i.tZ)(ie,{entries:S,close:function(){return d(!1)},onFileOpen:t}),Z&&(0,i.tZ)(u.u_,{isOpen:Boolean(Z),onRequestClose:function(){return w(null)},children:(0,i.tZ)(L.Z,{danger:!0,prompt:"Delete sprite '".concat((0,_.eb)(Z),"' ?"),desc:"Are you sure you want to delete this sprite? This action cannot be undone.",confirmText:"Yes, delete this sprite",icon:(0,i.tZ)(F.Z,{}),onCancel:function(){return w(null)},onConfirm:function(){n.deleteFile(Z),w(null)}})}),(0,i.tZ)(u.u_,{isOpen:m,onRequestClose:function(){return h(!1)},maxWidth:872,children:(0,i.tZ)(te,{kind:"sprites",renderItem:re,onRequestClose:function(){return h(!1)}})}),(0,i.tZ)(b(),{id:"286709118fe5858",children:".preview-img.jsx-286709118fe5858{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.preview-img.jsx-286709118fe5858 img.jsx-286709118fe5858{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}"})]})};function oe(e){var t=e.name,n=e.url,r=e.add;return(0,i.BX)(o.Ug,{justify:"space-between",align:"center",children:[(0,i.BX)(o.gC,{spacing:1,children:[(0,i.tZ)(ee.Z,{children:t}),(0,i.tZ)("audio",{src:n,controls:!0})]}),(0,i.tZ)(c.Z,{onClick:r,children:"Import"})]})}var se=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,o=(0,I.Z)(),s=(0,E.Z)().showError,l=(0,r.Z)(a.useState(null),2),c=l[0],d=l[1],u=(0,r.Z)(a.useState(!1),2),p=u[0],m=u[1],h=(0,K.Z)(o),b=((0,z.Z)({path:"sounds",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===G.Tv.File})).map((function(e){return e.filename})).sort(),g=["audio/ogg","audio/mpeg","audio/wav"],Z=function(e){var t="sounds/".concat(e.name);if(b.includes(t))return s("sound '".concat((0,_.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){n.writeFile(t,R.Z.from(e))}))},w=[{icon:(0,i.tZ)(Y.Z,{}),action:function(){return m(!0)}},{icon:(0,i.tZ)(q.Z,{}),action:function(){return U(Z,g)}}];return(0,i.BX)(y,{fileDrag:{accept:g,onDrop:Z},children:[(0,i.tZ)(v,{sub:!0,title:"Sounds",actions:w}),(0,i.tZ)(N.Z,{height:"4px"}),(0,i.tZ)("div",{children:b.map((function(e){var r=(0,_.eb)(e),a="sounds/".concat(e),l=h?[{name:"Insert load code",action:function(){return h({code:"loadSound(".concat(JSON.stringify(r),", ").concat(JSON.stringify(a),");")})}}]:[];return(0,i.tZ)(A,{isActive:a===o,onClick:function(){return t(a)},onRename:function(t){n.moveFile(a,"sounds/".concat(t,".").concat((0,_.r6)(e))).then((function(e){e.error&&s("failed to rename")}))},name:r,options:(0,x.Z)(l).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return d(a)},danger:!0}])},r)}))}),c&&(0,i.tZ)(X.Z,{isOpen:Boolean(c),onRequestClose:function(){return d(null)},children:(0,i.tZ)(L.Z,{danger:!0,prompt:"Delete sound '".concat((0,_.eb)(c),"' ?"),desc:"Are you sure you want to delete this sound? This action cannot be undone.",confirmText:"Yes, delete this sound",icon:(0,i.tZ)(F.Z,{}),onCancel:function(){return d(null)},onConfirm:function(){n.deleteFile(c),d(null)}})}),(0,i.tZ)(X.Z,{isOpen:p,onRequestClose:function(){return m(!1)},maxWidth:872,children:(0,i.tZ)(te,{kind:"sounds",renderItem:oe,onRequestClose:function(){return m(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},le=n(87514),ce=n(43530),de=n(65915);function ue(e){var t=e.file,n=e.name,r=(0,f.Z)().session,a=(0,de.Z)()===t;return(0,i.BX)("div",{onClick:function(){r.setPreviewedFile(null),r.setPreviewedFile(t)},className:"jsx-148e6ca45d3ccd5a entry",children:[(0,i.BX)(o.Ug,{spacing:1,align:"center",children:[a?(0,i.tZ)(le.Z,{}):(0,i.tZ)(ce.Z,{}),(0,i.tZ)(ee.Z,{foreground:a?1:2,fontWeight:a?"medium":"regular",children:null!==n&&void 0!==n?n:(0,_.eb)(t)})]}),(0,i.tZ)(b(),{id:"148e6ca45d3ccd5a",children:".entry.jsx-148e6ca45d3ccd5a{cursor:pointer}"})]})}var fe=function(){var e=(0,r.Z)(a.useState(!0),2),t=e[0],n=e[1],s=(0,r.Z)(a.useState(!1),2),l=s[0],c=s[1],d=(0,f.Z)().fs,u=(0,z.Z)({path:"learn",initialExpanded:!0,fs:d});a.useEffect((function(){var e=!1;return d.stat("README.md").then((function(t){e||t.exists&&c(!0)})),function(){e=!0}}),[]);var m=(u.children||[]).filter((function(e){return e.type===G.Tv.File&&(0,_.gK)(e.filename)})).map((function(e){return e.filename})).sort();return(0,i.BX)(y,{children:[(0,i.tZ)(v,{sub:!0,title:"Learn",actions:[{icon:(0,i.tZ)(p.Z,{rotate:t?0:-90}),action:function(){return n(!t)}}]}),t&&(0,i.BX)(o.gC,{spacing:1,children:[(0,i.tZ)("div",{}),l&&(0,i.tZ)(ue,{name:"Intro",file:"README.md"}),m.map((function(e){return(0,i.tZ)(ue,{file:"learn/".concat(e)},e)}))]})]})};function pe(e){var t=e.onFileOpen,n=(0,r.Z)(a.useState(!1),2),f=n[0],p=n[1];return(0,i.BX)(u.G7,{css:[u.l0.p(8),u.l0.flex.growAndShrink(1),u.l0.overflow("scroll"),{userSelect:"none"}],children:[(0,i.BX)(o.gC,{spacing:1,children:[(0,i.tZ)(j,{}),(0,i.tZ)(M,{onFileOpen:t}),(0,i.tZ)(ae,{onFileOpen:t}),(0,i.tZ)(se,{onFileOpen:t}),(0,i.tZ)(fe,{}),(0,i.tZ)("div",{}),(0,i.tZ)(c.Z,{Icon:s.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,i.tZ)(c.Z,{Icon:s.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,i.tZ)(c.Z,{Icon:l.Z,size:"small",onClick:function(){return p(!0)},children:"What\u2019s new"})]}),(0,i.tZ)(u.u_,{isOpen:f,onRequestClose:function(){return p(!1)},maxWidth:872,children:(0,i.tZ)(u.G7,{css:[u.l0.colWithGap(16),u.l0.p(32)],children:(0,i.tZ)(d.ZP,{children:'\n# New Kaboom Workspace\n\n- **No weird delay when run after editing.** Just press Cmd + S to refresh webview and quickly iterate!\n- **Helpful error reporting.** No need to go into browser console every time. The kaboom console displays your errors nicely.\n- **Support NPM packages and typescript by default.** Kaboom dev server builds your code with esbuild on the fly.\n- **Replit DB and Auth integration.** Make a score board even multiplayer with DB and Auth!\n- **In editor tutorial.** The template comes with a nice intro tutorial which you can learn and code along.\n- **Autocomplete.** Updated kaboom lib comes with detailed jsdoc for every function. No need to pull your hair out to figure out how certain functions work!\n- **HTML template.** Easily customize the html for your game.\n- **Total control over which version of Kaboom you use.** it\'s managed by NPM.\n- **Assets Library** Grab some quick assets to test out a game idea.\n- **Transparent dev server.** The dev server scripts are just in the Repl, customize them or toss them out if you want to. Or turn it into a multiplayer game server!\n- **New library version** The template comes with kaboom2000 (beta), with bunch of [new stuff and improvements](https://github.com/replit/kaboom/blob/master/CHANGELOG.md)\n\n## Migration Guide\n\n- The kaboom template now will not generate the initializing and assets loading code (`kaboom()`, `loadSprite()` etc.) for you, allowing more customized setup, and making it more portable with using kaboom outside replit.\n\n```js\nimport kaboom from "kaboom";\n\n// initialize context\nkaboom();\n\n// load assets\nloadSprite("bean", "sprites/bean.png");\nloadSound("coin", "sounds/coin.mp3");\n\n// the rest is the same\nconst player = add([\n\tsprite("bean"),\n\tarea(),\n]);\n```\n\nFor easier assets loading, use the "Insert load code" option in the asset entry option menu.\n\n- The template by default is running `kaboom@next`, which is currently the beta version of kaboom2000. It contains breaking changes, all listed in [CHANGELOG.md](https://github.com/replit/kaboom/blob/master/CHANGELOG.md). If you don\'t feel like migrating now, you can always `npm install kaboom@5.1`\n'})})})]})}},76670:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(14924),i=n(10253),a=n(35944),o=n(67294),s=n(57263),l=n(18757),c=n(48055),d=n(65915),u=n(99408);n(24351);function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,u.Z)().session,n=(0,i.Z)(o.useState(t.getCursorPosition()),2),r=n[0],a=n[1];return o.useEffect((function(){if(!e)return a(t.getCursorPosition()),t.onCursorPositionChanged(a)}),[t,e]),r}var p=n(96189),m=n(31826),h=n(48551),b=n(66681),g=n(60731),v=n(65456),x=n(97813),Z=(0,m.Z)((function(e){e.scrollIntoView({behavior:"smooth",block:"center"})}),100),w=o.memo(b.Z);function y(){var e=(0,u.Z)().fs,t=(0,u.Z)().session,n=(0,i.Z)(o.useState(!1),2),l=n[0],m=n[1],b=(0,x.Z)(),y=(0,d.Z)(),j=f(b!==y),C=o.useRef(null),N=(0,p.Z)((function(){m(!0),C.current&&clearTimeout(C.current),C.current=setTimeout((function(){m(!1)}),150)}),{type:"throttle",wait:37.5});o.useLayoutEffect((function(){if(!l&&b===y){var e=document.querySelectorAll(".rendered-markdown [data-sourcepos]"),t=Array.from(e).reverse();if(t){var n=j.lineNumber,r=j.column,a=!0,o=!1,s=void 0;try{for(var c,d=t[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var u=c.value,f=u.dataset.sourcepos;if(!f)throw new Error("Expected data source pos on selected element");var p=(0,i.Z)(f.split("-"),2),m=p[0],h=p[1],g=(0,i.Z)(m.split(":").map(Number),2),v=g[0],x=g[1],w=(0,i.Z)(h.split(":").map(Number),2),k=w[0],C=w[1];if(n>=v&&r>=x&&(n<k||n===k&&r<=C))return void Z(u)}}catch(N){o=!0,s=N}finally{try{a||null==d.return||d.return()}finally{if(o)throw s}}}}}),[j,l,b,y]);var S=(0,i.Z)(o.useState(null),2),T=S[0],z=S[1];return o.useEffect((function(){if(z(null),y&&(0,h.Mb)(y))return e.watchOtFile(y,{onReady:function(e){var t=e.initialContent;z(t.toString())},onChange:function(e){var t=e.latestContent;z(t)},onMoveOrDelete:function(e){e.eventType===v.kS.Delete&&t.setPreviewedFile(null)}})}),[y,e,t]),y?null===T?(0,a.tZ)(c.Z,{preventHighlightBorder:!0}):(0,a.BX)(g.G7,{css:[g.l0.colWithGap(8),g.l0.height("100%"),g.l0.width("100%"),g.l0.overflow("auto"),g.l0.backgroundColor.backgroundDefault,g.l0.zIndex(2),g.l0.align.center,g.l0.py(16),g.l0.px(16),(0,r.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(s.j.tabletMin,"px)"),g.l0.px(32))],tag:"div",innerRef:N,children:[(0,a.tZ)(g.G7,{css:[g.l0.rowWithGap(0),g.l0.height(30),g.l0.width("100%"),g.l0.justify.spaceBetween,g.l0.align.center,g.l0.backgroundColor.backgroundDefault],children:(0,a.tZ)(k,{})}),(0,a.tZ)(g.G7,{css:[g.l0.width("100%"),{"& .rendered-markdown":[g.l0.flex.column,g.l0.center],"& .rendered-markdown > *":[g.l0.maxWidth(840),g.l0.width("100%")],"& .rendered-markdown > table":g.l0.maxWidth("100%")}],children:(0,a.tZ)(w,{path:y,source:T,fs:e,sourcePos:!0})})]}):(0,a.tZ)(g.G7,{css:[g.l0.height("100%"),g.l0.width("100%"),g.l0.center],children:(0,a.tZ)(g.xv,{children:"No previewed file"})})}var k=function(){var e=(0,d.Z)();return(0,a.BX)(g.G7,{css:[g.l0.rowWithGap(2),g.l0.color.foregroundDimmer,g.l0.width("calc(100% - ".concat(g.TV.space16,")")),g.l0.align.center],children:[(0,a.tZ)(l.Z,{}),(0,a.BX)(g.xv,{css:g.l0.m(4),color:"dimmer",children:["Preview of ",(0,a.tZ)("a",{href:"#".concat(e),children:e})]})]})}},80049:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(47568),i=n(10253),a=n(34051),o=n.n(a),s=n(35944),l=n(60536),c=n.n(l),d=n(67294),u=n(34837),f=n.n(u),p=n(58794),m=n(96189),h=n(99408),b=n(54810),g=n(93058),v=n(1879),x=n(7835),Z=n(28497),w=n(32027),y=n(76818);function k(e){var t=e.style,n=e.activeFile,a=d.useRef(null),l=d.useRef(null),u=(0,h.Z)().fs,k=(0,g.Z)(),j=k.showError,C=k.showConfirm,N=(0,w.Z)(),S=(0,i.Z)(d.useState(!1),2),T=S[0],z=S[1],B=(0,b.Z)("flag-pedit-multiplayer"),R=(0,m.Z)((function(){var e=a.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return d.useEffect((function(){var e=function(){if(!c)throw new Error("Tried to export png but peditCtxRef was null");var e=window.prompt("Export as:");if(e){var t="".concat(e,".png"),n=c.curFrame().toPNG();u.writeFile(t,p.Z.from(n)).then((function(){C("Successfully exported to ".concat(t))}))}},t=!1;if(n&&a.current){var i=a.current,s=n,c=null,d=s.endsWith(".kbmsprite"),m=function(){};return B&&(m=u.watchFile(s,{onChange:function(e){var n=e.toString(),r=n&&JSON.parse(n);r&&c&&!t&&c.load(d?(0,Z.C)(r):r)}})),function(){h.apply(this,arguments)}(),function(){t=!0,c&&(c.cleanUp(),c=null),l.current&&(l.current=null),m()}}function h(){return(h=(0,r.Z)(o().mark((function n(){var r,a,p;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.readFile(s);case 2:if(r=n.sent,!t){n.next=5;break}return n.abrupt("return");case 5:if(!r.error){n.next=8;break}return j("failed to read ".concat(s)),n.abrupt("return");case 8:a=r.content.toString(),p=a&&JSON.parse(a),i.width=i.offsetWidth,i.height=i.offsetHeight,(c=f()(p?p.fromKaboom?{canvas:i,width:p.width,height:p.height}:{canvas:i,data:d?(0,Z.C)(p):p}:{canvas:i,width:64,height:64})).on("change",b),c.on("save",b),c.on("export",e),l.current=c.save,i.focus();case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(c){e.next=4;break}throw new Error("Expected peditCtx");case 4:if(n=c.save(),!d){e.next=9;break}return e.next=8,(0,Z.u)(n);case 8:n=e.sent;case 9:return e.next=11,u.writeFile(s,p.Z.from(JSON.stringify(n)));case 11:e.sent.error&&t&&j("Failed to save ".concat(s,", please try again"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[u,n,a]),(0,s.BX)("div",{style:t,className:c().dynamic([["c86cb3d51fed2583",[N?"0 3px 0 3px ".concat(N):"0"]]])+" pedit",children:[(0,s.tZ)(c(),{id:"c86cb3d51fed2583",dynamic:[N?"0 3px 0 3px ".concat(N):"0"],children:".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;-webkit-box-shadow:".concat(N?"0 3px 0 3px ".concat(N):"0",";-moz-box-shadow:").concat(N?"0 3px 0 3px ".concat(N):"0",";box-shadow:").concat(N?"0 3px 0 3px ".concat(N):"0","}canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0}.upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none}.upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher)}.upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32)}")}),(0,s.tZ)("canvas",{ref:function(e){a.current=e,R(e)},tabIndex:0,className:c().dynamic([["c86cb3d51fed2583",[N?"0 3px 0 3px ".concat(N):"0"]]])},n),n&&n.endsWith(".kbmsprite")&&(0,s.tZ)("button",{onClick:function(){return z(!0)},className:c().dynamic([["c86cb3d51fed2583",[N?"0 3px 0 3px ".concat(N):"0"]]])+" upgrade-button",children:"Upgrade"}),(0,s.tZ)(v.Z,{isOpen:T,onRequestClose:function(){return z(!1)},children:(0,s.tZ)(x.Z,{prompt:"Upgrade to '.pedit'?",desc:"You\u2019re using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? It\u2019ll create a new '.pedit' file with the same content. If you\u2019re using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0.",onCancel:function(){return z(!1)},confirmText:"Upgrade",icon:(0,s.tZ)(y.Z,{}),onConfirm:function(){if(l.current)if(n){var e=n.replace(/\.kbmsprite$/,".pedit"),t=p.Z.from(JSON.stringify(l.current()));u.writeFile(e,t).then((function(t){t.error?j("Failed to write to ".concat(e)):C("Successfully written to ".concat(e))})),z(!1)}else j("failed to get active file");else j("Please try again after the file loads")}})})]})}},22371:function(e,t,n){n.d(t,{V:function(){return y},Z:function(){return k}});var r=n(47568),i=n(10253),a=n(34051),o=n.n(a),s=n(35944),l=n(67294),c=n(66681),d=n(60731),u=n(77365),f=n(79652),p=n(67629),m=n(48505),h=n(8941),b=n(48551),g=n(99408),v=n(65456),x=n(63377),Z=n(35642);var w,y=".tutorial";function k(){var e=(0,g.Z)().fs,t=(0,i.Z)(l.useState([]),2),n=t[0],a=t[1],m=(0,i.Z)(l.useState(w.Loading),2),h=m[0],k=m[1],N=(0,x.Z)(),S=(0,i.Z)(function(e,t){var n,r=(0,l.useState)((function(){return null!==(n=Z.Z.get(e))&&void 0!==n?n:t})),i=r[0],a=r[1];return(0,l.useEffect)((function(){Z.Z.set(e,i)}),[e,i]),[i,a]}("tutorialProgress--".concat(N),0),2),T=S[0],z=S[1],B=(0,i.Z)(l.useState(!1),2),R=B[0],_=B[1],E=l.useRef(null),I=l.useCallback((function(){E.current&&(E.current.scrollTop=0)}),[E]);return l.useEffect((function(){var t=!1,n=function(){var n=(0,r.Z)(o().mark((function n(){var r,s,l,c,d,u,f,p,m,h,g,x,Z,j,C;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return k(w.Loading),n.next=3,e.readDir(y);case 3:if(r=n.sent,!t){n.next=6;break}return n.abrupt("return");case 6:if(!r.error){n.next=9;break}return k(w.Error),n.abrupt("return");case 9:return s=[],n.next=12,Promise.all(r.children.filter((function(e){return e.type===v.Tv.File&&"md"===(0,b.r6)(e.filename)})).map((function(t){var n="".concat(y,"/").concat(t.filename);return Promise.all([n,e.readFile(n)])})));case 12:if(l=n.sent,!t){n.next=15;break}return n.abrupt("return");case 15:for(c=!0,d=!1,u=void 0,n.prev=16,f=l[Symbol.iterator]();!(c=(p=f.next()).done);c=!0)m=(0,i.Z)(p.value,2),h=m[0],(g=m[1]).error?k(w.Error):(Z=g.content.toString(),j=RegExp("^#\\s(?<title>.*)"),C=j.exec(Z),s.push({title:null===C||void 0===C||null===(x=C.groups)||void 0===x?void 0:x.title,content:Z,path:h}));n.next=24;break;case 20:n.prev=20,n.t0=n.catch(16),d=!0,u=n.t0;case 24:n.prev=24,n.prev=25,c||null==f.return||f.return();case 27:if(n.prev=27,!d){n.next=30;break}throw u;case 30:return n.finish(27);case 31:return n.finish(24);case 32:a(s),k(w.Ready);case 34:case"end":return n.stop()}}),n,null,[[16,20,24,32],[25,,27,31]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){t=!0}}),[e]),h===w.Loading?(0,s.tZ)(d.G7,{css:[d.l0.flex.growAndShrink(1),d.l0.center],children:(0,s.tZ)(u.Z,{})}):h===w.Error?(0,s.tZ)(d.G7,{css:[d.l0.flex.growAndShrink(1),d.l0.center],children:(0,s.BX)(d.G7,{css:[d.l0.center,d.l0.colWithGap(4)],children:[(0,s.tZ)(p.Z,{color:d.TV.accentNegativeDefault}),(0,s.tZ)(d.xv,{color:"dimmer",children:"Failed to load tutorial"})]})}):0===n.length?(0,s.tZ)(d.G7,{css:[d.l0.flex.growAndShrink(1),d.l0.center],children:(0,s.BX)(d.G7,{css:[d.l0.center,d.l0.colWithGap(4)],children:[(0,s.tZ)(p.Z,{color:d.TV.accentNegativeDefault}),(0,s.tZ)(d.xv,{color:"dimmer",children:"No tutorials found!"})]})}):R?(0,s.BX)(d.G7,{css:[d.l0.overflowY("scroll"),d.l0.flex.growAndShrink(1),d.l0.p(8),d.l0.colWithGap(16)],children:[(0,s.tZ)(d.xv,{variant:"headerDefault",children:"Table of Contents"}),(0,s.tZ)(d.G7,{css:[d.l0.flex.growAndShrink(1),d.l0.colWithGap(8)],children:n.map((function(e,t){return(0,s.BX)(d.G7,{css:[d.l0.p(8),T===t?d.l0.backgroundColor.backgroundHighest:d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(4),d.l0.rowWithGap(8),d.l0.align.center,d.l0.cursor.pointer,T===t?{outline:"solid 2px var(--outline-dimmest)"}:{},{":hover":{outline:"solid 2px var(--outline-dimmest)"}}],onClick:function(){z(t),_(!1)},children:[(0,s.tZ)(d.G7,{css:[d.l0.backgroundColor.backgroundHighest,d.l0.width(20),d.l0.height(20),d.l0.borderRadius("full"),d.l0.center,{outline:"solid 1px var(--outline-dimmest)"}],children:(0,s.tZ)(d.xv,{variant:"small",color:"dimmest",children:t+1})}),(0,s.tZ)(d.xv,{css:[d.l0.maxWidth("80%")],children:e.title})]},e.title)}))})]}):(0,s.BX)(d.G7,{dataCy:"tutorial-viewer-content",innerRef:E,css:[d.l0.overflowY("scroll"),d.l0.flex.growAndShrink(1),d.l0.p(16),d.l0.pb(32),d.l0.colWithGap(16)],children:[n.length>1&&(0,s.tZ)(d.zx,{text:"Table of Contents",iconLeft:(0,s.tZ)(f.Z,{}),onClick:function(){return _(!0)}}),(0,s.tZ)(c.Z,{fs:e,path:n[T].path,source:n[T].content,sourcePos:!1}),n.length>1&&(0,s.BX)(d.G7,{css:[d.l0.position.absolute,d.l0.width("100%"),d.l0.bottom(0),d.l0.left(0)],children:[(0,s.tZ)(C,{progress:(T+1)/n.length}),(0,s.BX)(d.G7,{css:[d.l0.width("100%"),d.l0.height(32),d.l0.align.center,d.l0.flex.row],children:[T>0&&(0,s.tZ)(j,{title:n[T-1].title,minimal:T<n.length-1,previous:!0,onClick:function(){z((function(e){return e-1})),I()}}),T<n.length-1&&(0,s.tZ)(j,{title:n[T+1].title,onClick:function(){z((function(e){return e+1})),I()}})]})]})]})}!function(e){e.Ready="READY",e.Loading="LOADING",e.Error="ERROR"}(w||(w={}));var j=function(e){var t=e.onClick,n=e.title,r=e.previous;return e.minimal?(0,s.tZ)(d.G7,{tag:"button",css:[d.l0.justify.center,d.l0.p(8),r?d.l0.backgroundColor.backgroundHigher:d.l0.backgroundColor.backgroundHighest,d.l0.cursor.pointer,d.l0.height("100%")],onClick:t,children:r?(0,s.tZ)(m.Z,{}):(0,s.tZ)(h.Z,{})}):(0,s.BX)(d.G7,{tag:"button",css:[d.l0.rowWithGap(8),d.l0.flex.growAndShrink(1),d.l0.height("100%"),r?d.l0.justify.start:d.l0.justify.spaceBetween,r?d.l0.backgroundColor.backgroundHigher:d.l0.backgroundColor.backgroundHighest,d.l0.align.center,d.l0.p(8),d.l0.cursor.pointer,{userSelect:"none"}],onClick:t,children:[r&&(0,s.tZ)(m.Z,{}),(0,s.BX)(d.xv,{children:[(0,s.BX)("span",{css:[d.l0.color.foregroundDimmer],children:[r?"Previous":"Next",n?": ":" page"]}),n&&(0,s.tZ)("b",{children:n})]}),!r&&(0,s.tZ)(h.Z,{})]})},C=function(e){var t=e.progress;return(0,s.tZ)(d.u,{tooltip:"Progress: ".concat(t),children:(0,s.tZ)(d.G7,{css:[d.l0.width("100%"),d.l0.height(4),d.l0.backgroundColor.backgroundHigher],children:(0,s.tZ)(d.G7,{css:[d.l0.width("".concat(100*t,"%")),d.l0.height("100%"),d.l0.backgroundColor.purpleDefault]})})})}},84789:function(e,t,n){n.d(t,{Z:function(){return le}});var r=n(10253),i=n(35944),a=n(67294),o=n(90317),s=n(30019),l=n(92002),c=n(63377),d=n(77365),u=n(26042),f=n(69396),p=n(42844),m=n(33773),h=n(60731),b=n(93058),g=n(54168),v=n(87514),x=n(60536),Z=n.n(x),w=n(16064),y=n(47421),k=n(78120),j=k.q6.define();function C(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,o=e.skeleton,s=e.language,l=e.skeletonClosingBracket,c=e.indentSize,d=void 0===c?2:c,u=(0,w.Z)({language:s,indentIsSpaces:!0,indentSize:2,fontSize:14}),f=u.view,p=u.ref,m=a.useRef(o?"".concat(o,"\n"):""),h=l?"\n".concat(l):"",b=" ".repeat(d);return a.useEffect((function(){if(f&&f.state.doc.length){var e=m.current;m.current=o?"".concat(o,"\n"):"",f.dispatch({changes:{from:0,to:e.length-1,insert:o},annotations:[k.YW.addToHistory.of(!1),j.of(!0)]})}}),[f,o]),a.useEffect((function(){if(f){var e=k.yy.changeFilter.of((function(e){return!!e.annotation(j)||[-1,m.current.length,e.startState.doc.length-h.length,e.startState.doc.length+1]})),i=y.tk.updateListener.of((function(e){var t=e.state.doc.slice(m.current.length,e.state.doc.toString().length-h.length).toString();if(t!=="".concat(b).concat(r,"\n").concat(b)?n(t):n(""),e.docChanged&&e.state.doc.length===m.current.length+h.length){var i="\n"+b;f.dispatch({changes:{from:m.current.length-1,insert:"\n"+b},selection:{anchor:m.current.length+i.length-1},annotations:[j.of(!0)]})}})),a="".concat(m.current).concat(b).concat(r,"\n").concat(h);f.dispatch({changes:{from:0,to:f.state.doc.length,insert:a},effects:k.Py.appendConfig.of([e,i]),selection:{anchor:a.length},annotations:k.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=f.state.doc.toString().length;f.dispatch({changes:{from:m.current.length,to:t-h.length,insert:e},annotations:k.YW.addToHistory.of(!1)})}},focus:function(){return f.focus()}})}}),[n,s,f,h,t,r,b]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)("div",{ref:p,className:"jsx-c0a72647b9c20ef"}),(0,i.tZ)(Z(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var N=n(86292),S=n(88075);function T(e){var t,n,s,l,d=e.isOpen,p=e.meta,v=e.language,x=e.hasMetadata,Z=e.onClose,w=(0,c.Z)(),y=(0,b.Z)().showConfirm,k=(0,r.Z)(a.useState(null),2),j=k[0],C=k[1],T=(0,r.Z)(a.useState(!0),2),E=T[0],I=T[1],G=(0,r.Z)(a.useState((null===p||void 0===p?void 0:p.initialization)||""),2),X=G[0],L=G[1],D=(0,r.Z)(a.useState((null===p||void 0===p?void 0:p.imports)||""),2),U=D[0],O=D[1],A=(0,r.Z)(a.useState((null===p||void 0===p?void 0:p.setup)||""),2),F=A[0],P=A[1],W=(0,r.Z)(a.useState((null===p||void 0===p?void 0:p.tearDown)||""),2),M=W[0],H=W[1],V=(0,r.Z)((0,o.rUq)({onError:function(e){return C(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?C(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:w}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:o.aAi});return t?(0,f.Z)((0,u.Z)({},t),{meta:(0,u.Z)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),y("Setup saved!"),Z()))}}),2),Y=V[0],q=V[1],J=(0,r.Z)((0,o.AFf)({onError:function(e){return C(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?C(t.message):"ReplUnitTestMeta"===t.__typename&&(y("Imports updated!"),Z()))}}),2),K=J[0],$=J[1],Q=(0,g.x)(v),ee=U!==(null===p||void 0===p?void 0:p.imports)||X!==(null===p||void 0===p?void 0:p.initialization)||F!==(null===p||void 0===p?void 0:p.setup)||M!==(null===p||void 0===p?void 0:p.tearDown),te=q.loading||$.loading;return(0,i.tZ)(h.u_,{isOpen:d,onRequestClose:Z,maxWidth:872,children:(0,i.BX)(h.G7,{css:[h.l0.colWithGap(24)],children:[(0,i.tZ)(h.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(z,{unitTestsLib:Q,onChange:O,language:v,initialValue:null!==(t=null===p||void 0===p?void 0:p.imports)&&void 0!==t?t:""}),(0,i.tZ)(h.G7,{onClick:function(){return I(!E)},css:{cursor:"pointer"},children:(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,i.tZ)(h.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(m.Z,{color:"var(--foreground-default)",size:20,rotate:E?270:0})]})}),E?null:(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.tZ)(B,{unitTestsLib:Q,onChange:L,language:v,initialValue:null!==(n=null===p||void 0===p?void 0:p.initialization)&&void 0!==n?n:""}),(0,i.tZ)(R,{unitTestsLib:Q,onChange:P,language:v,initialValue:null!==(s=null===p||void 0===p?void 0:p.setup)&&void 0!==s?s:""}),(0,i.tZ)(_,{unitTestsLib:Q,onChange:H,language:v,initialValue:null!==(l=null===p||void 0===p?void 0:p.tearDown)&&void 0!==l?l:""})]}),(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.justify.spaceBetween],children:[(0,i.tZ)(h.xv,{css:[h.l0.color.accentNegativeStronger],multiline:!0,children:j}),(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(12)],children:[(0,i.tZ)(h.zx,{disabled:te,onClick:Z,text:"Cancel"}),(0,i.tZ)(h.zx,{colorway:"primary",disabled:!ee||te,onClick:function(){(0,N.j)(N.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),x?K({variables:{input:{initialization:X,imports:U,setup:F,tearDown:M,replId:w}}}):Y({variables:{input:{initialization:X,imports:U,setup:F,tearDown:M,replId:w}}})},iconLeft:(0,i.tZ)(S.Z,{}),text:"".concat(te?"Saving...":"Save")})]})]})]})})}function z(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,s=e.initialValue,l=(0,r.Z)(a.useState(null),2),c=l[0],d=l[1];a.useEffect((function(){c&&(c.setValue(s),c.focus())}),[c,s]);var u=t.defaultImports().trim();return(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,i.tZ)(h.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(h.ZP,{iconLeft:(0,i.tZ)(v.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(h.G7,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(h.G7,{css:[h.l0.borderRadius(8),h.l0.height(200),h.l0.position.relative],children:(0,i.tZ)(C,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:d,language:o,skeleton:u,skeletonClosingBracket:"",indentSize:0})})})]})}function B(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,s=e.initialValue,l=(0,r.Z)(a.useState(null),2),c=l[0],d=l[1];a.useEffect((function(){c&&c.setValue(s)}),[c,s]);var u=t.classConstructorName();return(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,i.tZ)(h.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(h.ZP,{iconLeft:(0,i.tZ)(v.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),u&&(0,i.BX)(h.xv,{multiline:!0,children:["Hint: constructor name is ",(0,i.tZ)("code",{children:u}),"."]}),(0,i.tZ)(h.G7,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(h.G7,{css:[h.l0.borderRadius(8),h.l0.height(200),h.l0.position.relative],children:(0,i.tZ)(C,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:d,language:o,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function R(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,s=e.initialValue,l=(0,r.Z)(a.useState(null),2),c=l[0],d=l[1];a.useEffect((function(){c&&c.setValue(s)}),[c,s]);var u=t.setupIntro().trim();return(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,i.tZ)(h.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(h.ZP,{iconLeft:(0,i.tZ)(v.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(h.G7,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(h.G7,{css:[h.l0.borderRadius(8),h.l0.height(200),h.l0.position.relative],children:(0,i.tZ)(C,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:d,language:o,skeleton:u,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function _(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,s=e.initialValue,l=(0,r.Z)(a.useState(null),2),c=l[0],d=l[1];a.useEffect((function(){c&&c.setValue(s)}),[c,s]);var u=t.tearDownIntro().trim();return(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,i.tZ)(h.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(h.ZP,{iconLeft:(0,i.tZ)(v.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(h.G7,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(h.G7,{css:[h.l0.borderRadius(8),h.l0.height(200),h.l0.position.relative],children:(0,i.tZ)(C,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:d,language:o,skeleton:u,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var E=function(e){var t=e.language,n=e.meta,o=(0,r.Z)(a.useState(!1),2),s=o[0],l=o[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(h.zx,{iconLeft:(0,i.tZ)(p.Z,{}),onClick:function(){return l(!0)},text:"Setup"}),(0,i.tZ)(T,{language:t,isOpen:s,onClose:function(){return l(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n})]})},I=n(29815),G=n(77836),X=n(64080),L=n(57704),D=n(67629),U=n(43530),O=n(30992),A=n(47568),F=n(34051),P=n.n(F),W=n(92876),M=n(99408),H=n(67287),V=n(51995),Y=n(83160),q="\x1b[0;31m",J="\x1b[0m",K=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function $(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(q).concat(t).concat(J,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var Q=function(e){var t=e.language,n=e.unitTests,o=e.onResult,s=e.trackingContext,l=function(e){(b.writeToTerminal(e),window.store)&&(0,window.store.dispatch)((0,H.yY)({wid:"",type:"",raw:!0,message:e}))},c=function(){(b.clearTerminal(),window.store)&&((0,window.store.dispatch)({type:"CLEAR_CONSOLE"}),l("\r\n"))},d=(0,r.Z)(a.useState(!1),2),f=d[0],p=d[1],m=(0,M.Z)(),b=m.session,v=m.container,x=m.packager,Z=m.fs,w=null,y=function(){p(!1),(0,Y.WT)(Z),w&&(w.stopLogSpinner(),w=null)},k=function(){var e=(0,A.Z)(P().mark((function e(){var r,i,a,d,m,h,b,k,j,C,S,T,z,B,R,_,E,G,X,L,D,U;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:if(r=null,w={startLogSpinner:function(e){if(r)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=e,n=0;return r=setInterval((function(){n++;var e=K[n%K.length];if(!w)throw new Error("Expected logger");w.clearLine(),w.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){r&&clearInterval(r),r=null},logMessage:l,clearLogs:c,clearLine:function(){if(!w)throw new Error("Expected logger");w.logMessage("\x1b[1K\r")}},n){e.next=6;break}throw new Error("Run button should not be active if there are no tests");case 6:return p(!0),(0,N.j)(N.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"ranTests"}),w.clearLogs(),i=(0,g.x)(t),e.next=12,i.buildAndRunTests((0,u.Z)({container:v,fs:Z,packager:x,logger:w},n));case 12:if(a=e.sent,w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null===a.error){e.next=21;break}return w.logMessage("".concat(q).concat(a.error).concat(J,"\r\n")),y(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),e.abrupt("return");case 21:if(d=a.result.passed?[]:a.result.failures.map((function(e){return i.parseTestResultName(e.name)})),m=[],h=n.tests.map((function(e){return i.getProperTestName(e.name)})),b=d.filter((function(e){return!h.includes(e)})),!b.length){e.next=29;break}j=b[0],C=a.result.failures[0].stack,w.logMessage($({name:j,failureMessage:"The following error occurred but was not related to a single unit test",stack:C})),(k=m).push.apply(k,(0,I.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}})))),e.next=60;break;case 29:S=!0,T=!1,z=void 0,e.prev=30,B=n.tests[Symbol.iterator]();case 32:if(S=(R=B.next()).done){e.next=46;break}if(_=R.value,E=i.getProperTestName(_.name),G=d.indexOf(E),X=-1===G,m.push({testId:_.id,didPass:X}),!X){e.next=41;break}return w.logMessage((O=E,"\u2705\t".concat("\x1b[0;32m").concat(O).concat(J,"\r\n\r\n"))),e.abrupt("continue",43);case 41:L=a.result.failures[G].stack,w.logMessage($({name:E,failureMessage:_.failureMessage,stack:L}));case 43:S=!0,e.next=32;break;case 46:e.next=52;break;case 48:e.prev=48,e.t0=e.catch(30),T=!0,z=e.t0;case 52:e.prev=52,e.prev=53,S||null==B.return||B.return();case 55:if(e.prev=55,!T){e.next=58;break}throw z;case 58:return e.finish(55);case 59:return e.finish(52);case 60:if(o(m),D=n.tests.length,!a.result.passed){e.next=66;break}return w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(D,"/").concat(D,"  ").concat(J,"\r\n")),y(),e.abrupt("return");case 66:U=D-a.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(U,"/").concat(D," passed, see errors above  ").concat(J)),y();case 69:case"end":return e.stop()}var O}),e,null,[[30,48,52,60],[53,,55,59]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,A.Z)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{k()}catch(t){W.$e((function(e){e.setTag("unittestsrun","true"),W.Tb(t)})),w&&w.logMessage("\r\n".concat(q," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(J,"\r\n")),y()}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,i.tZ)(h.G7,{children:(0,i.tZ)(h.zx,{disabled:f,colorway:"primary",iconLeft:(0,i.tZ)(V.Z,{}),onClick:j,text:f?"Running tests...":"Run tests"})}):null},ee=n(70804);function te(e){var t=e.isOpen,n=e.test,s=e.language,d=e.onClose,p=e.trackingContext,m=(0,c.Z)(),v=(0,b.Z)().showConfirm,x=(0,r.Z)(a.useState(null),2),Z=x[0],w=x[1],y=(0,r.Z)(a.useState(""),2),k=y[0],j=y[1],T=(0,r.Z)(a.useState(""),2),z=T[0],B=T[1],R=(0,r.Z)(a.useState(""),2),_=R[0],E=R[1],X=(0,r.Z)((0,o.Hd4)({onError:function(e){return E(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?E(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:m}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:o.Rbd});return t?(0,f.Z)((0,u.Z)({},t),{tests:(0,I.Z)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),v("Test created!"),d()))}}),2),L=X[0],A=X[1],F=(0,r.Z)((0,o.kOV)({onError:function(e){return E(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?E(t.message):"ReplUnitTest"===t.__typename&&(v("Test updated!"),d()))}}),2),P=F[0],W=F[1],M=(0,O.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));a.useEffect((function(){M.setValue((null===n||void 0===n?void 0:n.name)||"",{preventTouch:!0}),B((null===n||void 0===n?void 0:n.failureMessage)||""),j((null===n||void 0===n?void 0:n.code)||""),Z&&Z.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,Z]),a.useEffect((function(){E("")}),[k,E]);var H=(0,g.x)(s),V="".concat(H.getCommentChar()," Enter code here"),Y=!n||n.name!==M.value||n.code!==k||n.failureMessage!==z,q=A.loading||W.loading,J=H.testIntro(M.value||""),K=H.hasClosingBrackets()?H.getClosingBrackets():"",$=(0,r.Z)(a.useState(!1),2),Q=$[0],te=$[1],ne=function(){Z&&(Z.setValue("  "+H.exampleTest.code),Z.focus()),j(H.exampleTest.code)};return(0,i.tZ)(h.u_,{isOpen:t,onRequestClose:d,maxWidth:872,children:(0,i.BX)(h.G7,{css:[h.l0.colWithGap(24)],children:[(0,i.tZ)(h.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(h.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(h.Zl,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:M.value,isValid:M.isValid,error:M.error,warning:M.warning,touched:M.touched,onChange:function(e){M.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,i.tZ)(h.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(4)],children:[(0,i.BX)(ee.Z,{isOpen:Q,onClickOutside:function(){return te(!1)},placement:"bottom-end",children:[(0,i.tZ)(h.zx,{iconLeft:(0,i.tZ)(G.Z,{}),small:!0,outlined:!0,text:"View an example",onClick:function(){[V,H.exampleTest.code].includes(k.trim())?ne():te(!0)}}),(0,i.BX)(h.G7,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(4),h.l0.pt(8)],children:[" ",(0,i.tZ)(h.zx,{text:"No, go back",small:!0,iconLeft:(0,i.tZ)(D.Z,{}),onClick:function(){te(!1)}}),(0,i.tZ)(h.zx,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,i.tZ)(S.Z,{}),onClick:function(){ne(),te(!1)}})]})]})]}),(0,i.tZ)(h.ZP,{iconLeft:(0,i.tZ)(U.Z,{}),small:!0,outlined:!0,text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(h.G7,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(h.G7,{css:[h.l0.borderRadius(8),h.l0.height(200),h.l0.position.relative],children:(0,i.tZ)(C,{skeleton:J,skeletonClosingBracket:K,language:s,editorRef:w,onChange:j,placeholder:V})})})]}),(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8)],children:[(0,i.tZ)(h.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(h.II,{value:z,onChange:function(e){return B(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,i.tZ)(h.xv,{css:[h.l0.color.accentNegativeStronger],children:_}),(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(12)],children:[(0,i.tZ)(h.zx,{text:"Cancel",onClick:d}),(0,i.tZ)(h.zx,{text:"".concat(q?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(l.Z,{}),colorway:"primary",disabled:!Y||q,onClick:function(){M.validate()||(k.length<=0?E("Test cannot be empty"):n?(P({variables:{input:{name:M.value,code:k,failureMessage:z,testId:n.id}}}),(0,N.j)(N.U3.REPL_UNIT_TEST_USED,{trackingData:{context:p},action:"modifiedTest"})):(L({variables:{input:{name:M.value,code:k,failureMessage:z,replId:m}}}),(0,N.j)(N.U3.REPL_UNIT_TEST_USED,{trackingData:{context:p},action:"addedTest"})))}})]})]})]})})}function ne(e){var t=e.testId,n=e.onClose,s=(0,b.Z)().showConfirm,l=(0,c.Z)(),d=(0,r.Z)((0,o.IVR)({onError:function(e){return x(e.message)},update:function(e,r){var i,a=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;a&&("UserError"===a.__typename?x(a.message):"ReplUnitTest"===a.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return(0,f.Z)((0,u.Z)({},e),{tests:(0,I.Z)(i)})}}}),(0,N.j)(N.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),s("Test deleted!"),n()))}}),2),p=d[0],m=d[1],g=(0,r.Z)(a.useState(""),2),v=g[0],x=g[1];return(0,i.tZ)(h.u_,{isOpen:Boolean(t),onRequestClose:n,children:(0,i.BX)(h.G7,{css:[h.l0.colWithGap(24)],children:[(0,i.tZ)(h.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(h.xv,{multiline:!0,children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,i.tZ)(h.xv,{multiline:!0,css:[h.l0.color.accentNegativeStronger],children:v}),(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,i.tZ)(h.zx,{text:"Cancel",disabled:m.loading,onClick:n}),(0,i.tZ)(h.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(L.Z,{}),disabled:m.loading,onClick:function(){if(!t)throw new Error("Expected a testId");p({variables:{testId:t}})}})]})]})]})})}var re=function(e){var t=e.unitTests,n=e.isAddingTest,s=e.onClose,d=e.language,u=e.canWrite,f=e.trackingContext,p=void 0===f?"default":f,m=(0,r.Z)(a.useState(n),2),b=m[0],g=m[1],v=(0,r.Z)(a.useState(null),2),x=v[0],w=v[1],y=(0,r.Z)(a.useState(null),2),k=y[0],j=y[1],C=(0,c.Z)(),N=(0,r.Z)((0,o.lQq)(),1)[0],S=(null===t||void 0===t?void 0:t.tests)||[];return(0,i.BX)(h.G7,{css:[h.l0.colWithGap(16)],children:[(0,i.tZ)(Q,{language:d,unitTests:t,onResult:function(e){N({variables:{input:{replId:C,results:e},replId:C}})},trackingContext:p}),S.length>0?(0,i.tZ)(h.G7,{css:[h.l0.colWithGap(8),h.l0.align.center],children:S.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===o.$I7.Passed?n="passed-test":e.lastRun.status===o.$I7.Failed&&(n="failed-test")),(0,i.tZ)(h.G7,{className:"test ".concat(n),css:{width:"100%"},children:(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.justify.spaceBetween,h.l0.align.center,h.l0.p(8),h.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(h.xv,{children:e.name}),u?(0,i.BX)(h.G7,{css:[h.l0.rowWithGap(8)],children:[(0,i.tZ)(h.hU,{onClick:function(){w(e)},alt:"Edit",children:(0,i.tZ)(X.Z,{})}),(0,i.tZ)(h.hU,{onClick:function(){j(e.id)},alt:"Delete",children:(0,i.tZ)(L.Z,{})})]}):null]})},e.id)}))}):(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8),h.l0.align.center],children:[(0,i.tZ)(h.xv,{multiline:!0,css:[h.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),u&&(0,i.tZ)(h.zx,{text:"Add test",onClick:function(){return g(!0)},iconLeft:(0,i.tZ)(l.Z,{})})]}),(0,i.tZ)(te,{isOpen:b||Boolean(x)||n,test:x,language:d,onClose:function(){w(null),g(!1),s&&s()},trackingContext:p}),(0,i.tZ)(ne,{testId:k,onClose:function(){return j(null)}}),(0,i.tZ)(Z(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},ie=n(6951),ae=n(83117);var oe=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,f.Z)((0,u.Z)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(ie.Z,{filled:!1,border:!1,size:"small",Icon:ae.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,i.tZ)(Z(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},se=n(69128);var le=function(e){var t,n,u,f,p=e.onBack,m=(0,c.Z)(),b=(0,r.Z)(a.useState(!1),2),g=b[0],v=b[1],x=(0,se.Z)(),Z=x.language,w=x.isLoading,y=(0,o.CHr)({variables:{replId:m}}),k=null===(t=y.data)||void 0===t?void 0:t.repl;if(y.loading||w)return(0,i.tZ)(h.G7,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.flex.row,h.l0.align.center,h.l0.justify.center,h.l0.p(16)],children:(0,i.tZ)(d.Z,{})});if(!k||"Repl"!==k.__typename)return(0,i.tZ)(h.G7,{css:[h.l0.p(16)],children:(0,i.tZ)(h.xv,{multiline:!0,css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!Z)return(0,i.tZ)(h.G7,{css:[h.l0.p(16)],children:(0,i.tZ)(h.xv,{multiline:!0,css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var j="default";(null===k||void 0===k?void 0:k.isProject)?j="project_repl":(null===k||void 0===k?void 0:k.isProjectFork)&&(j="submission_repl");var C=Boolean((null===(n=k.unitTests)||void 0===n?void 0:n.tests)&&k.unitTests.tests.length>0);return(null===k||void 0===k||null===(u=k.currentUserPermissions)||void 0===u?void 0:u.writeTests)?(0,i.BX)(h.G7,{css:[h.l0.colWithGap(16),h.l0.align.center],children:[(0,i.BX)(h.G7,{css:[h.l0.flex.row,h.l0.justify.spaceBetween,h.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(s.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)(h.hU,{alt:"Add test",size:32,onClick:function(){return v(!0)},children:(0,i.tZ)(l.Z,{})})]}),(0,i.BX)(h.G7,{css:[h.l0.colWithGap(8),h.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(E,{language:Z,meta:(null===(f=k.unitTests)||void 0===f?void 0:f.meta)||null}),(0,i.tZ)(re,{isAddingTest:g,unitTests:(null===k||void 0===k?void 0:k.unitTests)||null,onClose:function(){return v(!1)},language:Z,canWrite:!0,trackingContext:j}),p?(0,i.tZ)(oe,{hasTests:C,onClick:p}):null]})]}):(0,i.BX)(h.G7,{css:[h.l0.colWithGap(16)],children:[(0,i.tZ)(h.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(h.G7,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(re,{unitTests:(null===k||void 0===k?void 0:k.unitTests)||null,language:Z,isAddingTest:!1,canWrite:!1,trackingContext:j})})]})}},54168:function(e,t,n){n.d(t,{x:function(){return T},y:function(){return S}});var r=n(47568),i=n(29815),a=n(34051),o=n.n(a),s=n(92876),l=n(86292),c=n(51438),d=function(){function e(t){(0,c.Z)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.addIndents(),this.code+=s,this.newLine()}}catch(l){r=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),u=n(83160),f={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,u.Og)(f.testSuiteName())," {")},classConstructorName:function(){return(0,u.Og)(f.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(f.testIntroPreName()).concat(e).concat(f.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,u.Og)(f.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new d(f);r.push(f.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(f.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(f.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(f.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;c.code&&(r.push(f.testIntro(c.name)),r.indent(),r.push(c.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(u){a=!0,o=u}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return b.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=f.buildSuite({tests:a,meta:o});return f.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;s.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),s.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},p="__UNIT_TEST_RESULT_START__",m="__UNIT_TEST_RESULT_END__",h="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,u.Og)(f.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,u.Og)(f.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(p,'");\n        System.out.println(out);\n        System.out.println("').concat(m,'");\n    }\n}');function b(){return(b=(0,r.Z)(o().mark((function e(t){var n,r,a,s,c,d,b,g,v,x,Z,w,y,k,j,C,N,S,T,z,B,R,_,E,I;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,a=t.packager,s=t.logger,c=t.suiteCode,b=s.startLogSpinner("Setting up the environment"),e.next=5,(0,u.WT)(r);case 5:return b("Creating your test files 1/2"),e.next=8,(0,u.e3)({fs:r,code:c,filename:"".concat(f.testSuiteName(),".java")});case 8:if(g=e.sent,!(v=g.error)){e.next=14;break}return"Failed to create suite code file",f.captureSetupError({tag:"Failed to create suite code file",raw:v}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 14:return b("Creating your test files 2/2"),e.next=17,(0,u.e3)({fs:r,code:h,filename:"".concat(f.testRunnerName(),".java")});case 17:if(x=e.sent,!(Z=x.error)){e.next=23;break}return"Failed to create test runner file",f.captureSetupError({tag:"Failed to create test runner file",raw:Z}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 23:return s.stopLogSpinner(),s.clearLine(),s.logMessage("Installing imported packages\r\n"),e.next=28,a.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}]);case 28:return e.next=30,a.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return s.clearLogs(),b=s.startLogSpinner("Compiling your files"),e.next=37,n.exec("find",".","-type","f","-name","*.java","-print0");case 37:if(w=e.sent,y=w.output,!(k=w.error)){e.next=44;break}return j="Failed to fetch working directory java files",f.captureSetupError({tag:j,raw:k}),e.abrupt("return",{error:"".concat(j,"\r\n\r\n")+(null===y||void 0===y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n\r\n"+k});case 44:if("string"===typeof y){e.next=46;break}throw new Error("expected working directory files to be a string");case 46:return C=y.slice(0,-1).split("\0"),N=".:./target/dependency/*",e.next=50,(d=n).exec.apply(d,["javac","-classpath",N,"-d","."].concat((0,i.Z)(C)));case 50:if(S=e.sent,T=S.output,!(z=S.error)){e.next=57;break}return B="Failed to compile test runner file",f.captureSetupError({tag:B,raw:z}),e.abrupt("return",{error:"".concat(B,"\r\n\r\n")+(null===T||void 0===T?void 0:T.replace(/\n/g,"\n\r"))+"\r\n\r\n"+z});case 57:return b("Running your tests"),e.next=60,n.exec("java","-classpath",N,(0,u.Og)(f.testRunnerName()));case 60:if(R=e.sent,_=R.output,!(E=R.error)){e.next=66;break}return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===_||void 0===_?void 0:_.replace(/\n/g,"\n\r"))+"\r\n\r\n"+E});case 66:if("string"===typeof _){e.next=68;break}throw new Error("expected runOutput to be a string");case 68:return I=JSON.parse(_.slice(_.indexOf(p)+p.length,_.lastIndexOf(m))),e.abrupt("return",{result:I,error:null});case 70:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=f,v=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},x={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return x.testIntroPreName()+e+x.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new d(x);r.push(x.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(x.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),v(n.setup)&&(r.push(x.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),v(n.tearDown)&&(r.push(x.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;r.push(x.testIntro(c.name)),r.indent(),r.push(c.code||"pass"),r.dedent(),r.newLine()}}catch(u){a=!0,o=u}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return r.toString()},runSuite:function(e){return k.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=x.buildSuite({tests:a,meta:o});return x.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;s.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),s.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Z="__UNIT_TEST_RESULT_START__",w="__UNIT_TEST_RESULT_END__",y="import unittest\nimport ".concat((0,u.Og)(x.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,u.Og)(x.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Z,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(w,"');");function k(){return(k=(0,r.Z)(o().mark((function e(t){var n,r,i,a,s,c,d,f,p,m,h,b,g,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,s=t.suiteCode,c=a.startLogSpinner("Setting up the environment"),e.next=4,(0,u.WT)(r);case 4:return c("Creating your test files 1/2"),e.next=7,(0,u.e3)({fs:r,code:s,filename:"".concat(x.testSuiteName(),".py")});case 7:if(d=e.sent,!(f=d.error)){e.next=13;break}return"Failed to create suite code file",x.captureSetupError({tag:"Failed to create suite code file",raw:f}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return c("Creating your test files 2/2"),e.next=16,(0,u.e3)({fs:r,code:y,filename:"".concat(x.testRunnerName(),".py")});case 16:if(p=e.sent,!(m=p.error)){e.next=22;break}return"Failed to create test runner file",x.captureSetupError({tag:"Failed to create test runner file",raw:m}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 22:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=27,i.installPackages();case 27:if(e.sent){e.next=30;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 30:return a.clearLogs(),a.startLogSpinner("Running your tests"),e.next=34,n.exec("python","-B",(0,u.Og)("".concat(x.testRunnerName(),".py")));case 34:if(h=e.sent,b=h.output,!(g=h.error)){e.next=40;break}return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===b||void 0===b?void 0:b.replace(/\n/g,"\n\r"))+"\r\n"+g});case 40:if("string"===typeof b){e.next=42;break}throw new Error("expected runoutput to be a string");case 42:return v=JSON.parse(b.slice(b.indexOf(Z)+Z.length,b.lastIndexOf(w))),e.abrupt("return",{result:v,error:null});case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return j.testIntroPreName()+e+j.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new d(j);r.push(j.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(j.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(j.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(j.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;c.code&&(r.push(j.testIntro(c.name)),r.indent(),r.push(c.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(u){a=!0,o=u}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return C.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.tests,o=e.meta,s=j.buildSuite({tests:a,meta:o});return j.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:s})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;s.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),s.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function C(){return(C=(0,r.Z)(o().mark((function e(t){var n,r,i,a,s,c,d,f,p,m,h,b,g,v,x,Z,w,y,k,C,N,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,r=t.fs,i=t.packager,a=t.logger,s=t.suiteCode,c=a.startLogSpinner("Setting up the environment"),e.next=4,(0,u.WT)(r);case 4:return c("Creating your test files 1/2"),e.next=7,(0,u.e3)({fs:r,code:s,filename:"".concat(j.testSuiteName(),".js")});case 7:if(d=e.sent,!(f=d.error)){e.next=13;break}return"Failed to create suite code file",j.captureSetupError({tag:"Failed to create suite code file",raw:f}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 13:return c("Creating your test files 2/2"),p=69,m="jest.config.json",h={testRegex:(0,u.Og)("".concat(j.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:p},e.next=19,(0,u.e3)({fs:r,code:JSON.stringify(h),filename:m});case 19:if(b=e.sent,!(g=b.error)){e.next=25;break}return"Failed to create config file",j.captureSetupError({tag:"Failed to create config file",raw:g}),e.abrupt("return",{error:"There was an error creating a test file, if this happens again, please contact support."});case 25:return a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),e.next=30,i.installPackages();case 30:if(e.sent){e.next=33;break}return e.abrupt("return",{error:"Failed to install packages\r\n"});case 33:return a.clearLogs(),c=a.startLogSpinner("Running your tests"),v=(0,u.Og)("output.json"),e.next=38,n.exec("jest","--json","--outputFile",v,"--config",(0,u.Og)(m),"--forceExit","--passWithNoTests");case 38:if(x=e.sent,Z=x.output,!(w=x.error)||w.endsWith(p.toString())){e.next=44;break}return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),e.abrupt("return",{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n"+w});case 44:return c("Parsing your test results"),e.next=47,r.readFile(v);case 47:if(!(y=e.sent).error){e.next=52;break}return"Error reading test results",j.captureSetupError({tag:"Error reading test results",raw:y.error}),e.abrupt("return",{error:"There was an error getting test results, if this happens please contact support."});case 52:if(k=y.content.toString(),!(C=JSON.parse(k)).success){e.next=56;break}return e.abrupt("return",{error:null,result:{passed:!0,failures:[]}});case 56:if(N=C.testResults[0],(S=N.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length){e.next=60;break}return e.abrupt("return",{error:N.message.replace(/\n/g,"\r\n")});case 60:return e.abrupt("return",{error:null,result:{passed:!1,failures:S}});case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N={java10:g,java10_beta:g,java:g,python3:x,python3_beta:x,python:x,nodejs:j,javascript:j,nodejs_beta:j};function S(e){return e in N}function T(e){if(!S(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(N)));return N[e]}},83160:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return m},e3:function(){return f}});var r=n(47568),i=n(34051),a=n.n(i),o=n(92876),s=n(31066),l=n(65456),c=n(58794),d="_test_runner";function u(e){return d+e}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(a().mark((function e(t){var n,r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fs,r=t.code,i=t.filename,o=u(i),s=c.Z.from(r,"utf8"),e.abrupt("return",n.writeFile(o,s));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.readDir(s.Ql);case 3:if(!(n=e.sent).error){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(n.children.map((function(e){return e.filename.startsWith(d)?e.type===l.Tv.File?t.deleteFile(e.filename):t.deleteDir(e.filename):Promise.resolve(null)})));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),o.$e((function(t){t.setTag("unitTestLib","true"),o.Tb(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}},69128:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2916),i=n(25497),a=n(99408),o=n(67294),s=n(54168);function l(){var e=(0,r.Z)(),t=(0,a.Z)().dotReplit,n=null===e||void 0===e?void 0:e.language,l=(0,o.useState)(null),c=l[0],d=l[1],u=(0,o.useState)(!0),f=u[0],p=u[1];return(0,o.useEffect)((function(){if(n){if((0,s.y)(n))return d(n),void p(!1);var e=!1,r=t.watch((function(t){var n,r;if(e||(e=!0,p(!1)),t.error)t.error===i.Yt.NotFound&&d(null);else{var a=null===(n=t.config.unitTest)||void 0===n||null===(r=n.language)||void 0===r?void 0:r.toLowerCase();a&&(0,s.y)(a)?d(a):d(null)}}));return function(){r()}}}),[n,t]),{language:c,isLoading:f}}},32549:function(e,t,n){var r=n(11163),i=n.n(r);t.Z=function(){return Boolean(i().query.embed||i().query.lite)}},48055:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(35944),i=n(60536),a=n.n(i),o=(n(67294),n(24561)),s=n(32027);function l(e){var t=e.preventHighlightBorder,n=(0,s.Z)();return(0,r.BX)("div",{className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(o.ZP,{primaryColor:"var(--background-highest)",secondaryColor:"var(--background-higher)",uniquekey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:a().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(a(),{id:"b8bdeb39d1178985",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";-moz-box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},28497:function(e,t,n){function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()}))}}function i(e){return new Promise((function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n}))}function a(e){return new Promise((function(t,n){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var a=i.getContext("2d");if(a){var o=r.map((function(t){return a.drawImage(t,0,0),{pixels:Array.from(a.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));t({frames:o,preview:e.frames[0],width:e.width,height:e.height})}else n(new Error("failed to get canvas ctx"))})).catch(n)}))}n.d(t,{C:function(){return r},u:function(){return a}})}}]);
//# sourceMappingURL=2171-ae9a70cf6565af3c.js.map