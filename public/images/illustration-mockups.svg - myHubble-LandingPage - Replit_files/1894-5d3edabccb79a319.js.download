"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1894],{33473:function(e,n,t){var r=t(35944),i=t(69346),o=t(81255),l=t(61756),a=t(81456);n.Z=function(e){return(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(2),o.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(l.ZP,{colorway:e.colorway,iconLeft:e.icon,stretch:!0,onClick:e.onClick,text:e.text,css:[o.l0.flex.growAndShrink(1),o.l0.borderRadius(8,0,0,8)]}),(0,r.tZ)(l.ZP,{colorway:e.colorway,onClick:e.onCountClick,text:(0,a.d)(e.count),css:[o.l0.borderRadius(1,8,8,1)]})]})}},12662:function(e,n,t){t.d(n,{Z:function(){return H},S:function(){return X}});var r=t(47568),i=t(26042),o=t(69396),l=t(34051),a=t.n(l),c=t(35944),s=t(67294),u=t(90317),d=t(98705),p=t(10253),m=t(16496),h=t.n(m),Z=t(18332),f=t(96594);var v=t(30758),g=t(82670),b=t(29815),w=t(32703),x=t(62722),y=t(7657);function C(e){var n=e.initialValue,t=e.textTriggers,i=(0,s.useState)(n||""),o=i[0],l=i[1],c=(0,s.useRef)(null),u=function(e){var n=e.textTriggers,t=e.applySuggestion,r=(0,s.useRef)(null),i=(0,p.Z)((0,Z.Z)(n),2),o=i[0].suggestions,l=i[1],a=(0,f.Kb)({items:(null===o||void 0===o?void 0:o.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(o),onSelectedItemChange:function(e){var n=e.selectedItem;if(o&&n){var i=r.current;if(i){var l=o.applySuggestion({targetValue:i.value,suggestionValue:n.value}),a=l.fullValue,c=l.cursorIndex;t({fullValue:a,cursorIndex:c})}}}}),c=(0,s.useMemo)((function(){if(o&&r.current)return h()(r.current,o.textTrigger.index)}),[o]);return{ref:(0,s.useCallback)((function(e){r.current=e,l(e)}),[l]),suggestions:null===o||void 0===o?void 0:o.results,caretCoordinates:c,combobox:a}}({textTriggers:t,applySuggestion:function(e){var n=e.cursorIndex,t=e.fullValue;l(t),setTimeout((function(){c.current&&c.current.setSelectionRange(n,n)}))}}),m=u.combobox,C=u.caretCoordinates,k=u.suggestions,R=u.ref,B=function(e){var n=(0,s.useRef)(null),t=(0,d.Z)(e.onChange),i=(0,d.Z)(e.onError),o=(0,s.useCallback)((function(e){n.current=e}),[]),l=(0,s.useCallback)(function(){var e=(0,r.Z)(a().mark((function e(r){var o,l,c,s,u,d,p,m,h,Z;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.current){e.next=3;break}return e.abrupt("return");case 3:return l=o.value,c=o.selectionStart?o.selectionStart:l.length,s=r.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),u=l.substr(0,c),d=l.substr(c),p=(0,b.Z)(s),u&&p.unshift(u),d&&p.push(d),t.current(p.join("\n")),m=[],e.prev=13,e.next=16,(0,w.L0)(r);case 16:m=e.sent,e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(13),i.current(e.t0),e.abrupt("return");case 23:return h=[],e.prev=24,e.next=27,Promise.all(m.map((function(e){return(0,x.mh)(e,y.N.CommunityPost)})));case 27:h=e.sent,e.next=34;break;case 30:return e.prev=30,e.t1=e.catch(24),i.current(e.t1),e.abrupt("return");case 34:if(n.current){e.next=36;break}return e.abrupt("return");case 36:Z=s.reduce((function(e,n,t){var i=r[t].name.replace(/\.[^/.]+$/,""),o=h[t],l=(0,g.Z)(o,Error)?"Error uploading":o.url;return e.replace(n,"![".concat(i,"](").concat(l,")"))}),n.current.value),t.current(Z);case 38:case"end":return e.stop()}}),e,null,[[13,19],[24,30]])})));return function(n){return e.apply(this,arguments)}}(),[t,i]),c=(0,s.useCallback)((function(e){var n=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));n.length&&l(n)}),[l]);return{ref:o,handleFiles:l,handlePaste:c}}({onChange:l,onError:function(){}}),G=B.handleFiles,S=B.handlePaste,T=B.ref,D=(0,p.Z)((0,v.Z)((function(e){null!==e&&G(e)})),2)[1],W=(0,s.useCallback)((function(e){c.current=e,R(e),T(e)}),[R,T]),E=(0,s.useCallback)((function(e,n){var t;null===(t=c.current)||void 0===t||t.setSelectionRange(e,n)}),[]);return{ref:W,value:o,setValue:l,dropZoneHandlers:D,handlePaste:S,combobox:m,caretCoordinates:C,suggestions:k,setSelectionRange:E}}var k=t(57731),R=t(32951),B=t(25019),G=t(4306),S=t(58809),T=t(60731),D=t(37424),W=(0,T.KD)("div"),E=(0,T.KD)("li");function X(e){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.l){e.next=2;break}throw new Error("Expected apolloClient");case 2:return e.next=4,S.l.query({query:u.ofZ,variables:{query:n,limit:5}});case 4:return t=e.sent.data,e.abrupt("return",t.usernameSearch);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var n,t=e.onChange,l=e.initialValue,u=e.autoFocus,p=e.placeholder,m=e.onKeyDown,h=e.onBlur,Z=e.onFocus,f=e.userSearch,v=e.showLabel,g=(0,s.useRef)(l),b=(0,d.Z)(t),w=function(e){var n=e.initialValue,t=e.userSearch,i=void 0===t?X:t,o=C({initialValue:n,textTriggers:{"@":function(){var e=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{icon:(0,c.tZ)(k.Z,{alt:e.username,src:e.image,size:16}),value:e.username}})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}});return o}({initialValue:l,userSearch:f}),x=w.setSelectionRange;(0,R.Z)((function(){b.current(w.value)}),[w.value]),(0,s.useEffect)((function(){if(u&&g.current){var e=g.current.length;x(e,e)}}),[u,x]);var y=(0,D.H)();return(0,c.BX)(W,(0,o.Z)((0,i.Z)({css:{position:"relative"}},w.combobox.getComboboxProps()),{children:[(0,c.BX)(T.G7,{css:[T.l0.colWithGap(4)],children:[v?(0,c.tZ)("label",{htmlFor:y("description"),children:(0,c.tZ)(T.xv,{color:"dimmer",variant:"small",children:"Description"})}):null,(0,c.tZ)(T.B,(0,o.Z)((0,i.Z)({},w.combobox.getInputProps({placeholder:p||"Write something about this post",ref:w.ref,onKeyDown:function(e){w.combobox.isOpen||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),m&&m(e)},onBlur:h,onFocus:Z,value:w.value,onChange:function(e){return w.setValue(e.currentTarget.value)},onPaste:w.handlePaste,autoFocus:u})),{css:[T.l0.width("100%"),{minHeight:T.TV.space128,resize:"vertical"}],id:y("description")}))]}),(0,c.tZ)(W,(0,o.Z)((0,i.Z)({},w.combobox.getMenuProps()),{css:[{position:"absolute"},w.caretCoordinates&&{top:w.caretCoordinates.top+w.caretCoordinates.height,left:w.caretCoordinates.left-4}],children:(null===(n=w.suggestions)||void 0===n?void 0:n.length)?(0,c.tZ)(B.Z,{css:{position:"relative",maxWidth:180},children:w.suggestions.map((function(e,n){return(0,c.tZ)(E,(0,o.Z)((0,i.Z)({},w.combobox.getItemProps({item:e,index:n})),{children:(0,c.tZ)(G.Z,{title:e.value,selected:w.combobox.selectedItem===e,highlighted:w.combobox.highlightedIndex===n,icon:e.icon?(0,c.tZ)(T.G7,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}},54917:function(e,n,t){t.d(n,{EQ:function(){return W},Ex:function(){return T},Sh:function(){return D},Yt:function(){return k},g4:function(){return w},l0:function(){return G},nQ:function(){return y},pl:function(){return B},tE:function(){return x},wb:function(){return R}});var r=t(35944),i=t(67294),o=t(59369),l=t(34847),a=t(69346),c=t(33773),s=t(82447),u=t(94718),d=t(12662),p=t(75026),m=t(64080),h=t(53429),Z=t(42844),f=t(64184),v=t(18757),g=t(57704),b=t(60731);function w(e){var n=e.onClick;return(0,r.tZ)(b.zx,{small:!0,onClick:n,outlined:!0,text:"Reply",colorway:"primary",css:[b.l0.p(4),{background:"transparent",borderColor:"transparent"}]})}function x(e){var n=e.onClick,t=e.repliesCount,i=e.isExpanded,o="".concat(i?"Hide":"View"," ").concat(t," ").concat((0,l.Z)("reply",t));return(0,r.tZ)(b.zx,{small:!0,onClick:n,outlined:!0,text:o,css:[b.l0.color.foregroundDimmer,b.l0.p(4),{background:"transparent",borderColor:"transparent","&> span":{marginRight:2}}],iconRight:(0,r.tZ)(c.Z,{size:12,rotate:i?0:270})})}var y,C=(0,a.K)("a");function k(e){var n=e.user;return(0,r.tZ)(u.Z,{username:n.username,children:(0,r.tZ)(s.ZP,{user:n,children:(0,r.tZ)(b.qE,{size:32,username:n.username,src:n.image})})})}function R(e){var n=e.user,t=e.action,i=e.timeCreated;return(0,r.BX)(a.Z,{css:[b.l0.flex.row,b.l0.align.center,b.l0.flex.wrap,{maxWidth:"100%",gap:b.TV.space4}],children:[(0,r.tZ)(u.Z,{username:n.username,children:(0,r.tZ)(s.ZP,{user:n,children:(0,r.tZ)(C,{css:[{color:"inherit"}],children:n.username})})}),t?(0,r.tZ)(b.xv,{color:"dimmer",children:t}):null,(0,r.tZ)(b.EK,{date:i,textColor:"dimmest",textVariant:"small"})]})}function B(e){var n=e.canEdit,t=e.canDelete,l=e.canReport,c=e.canEditSettings,s=e.canHideComment,u=e.canShowComment,d=e.onAction,p=e.className,b=(0,i.useState)(!1),w=b[0],x=b[1],C=[];return n&&C.push({label:y.Edit,icon:(0,r.tZ)(m.Z,{})}),l&&C.push({label:y.Report,icon:(0,r.tZ)(h.Z,{})}),c&&C.push({label:y.Settings,icon:(0,r.tZ)(Z.Z,{})}),s&&C.push({label:y.Hide,icon:(0,r.tZ)(f.Z,{})}),u&&C.push({label:y.Show,icon:(0,r.tZ)(v.Z,{})}),t&&C.push({label:y.Delete,isDestructive:!0,icon:(0,r.tZ)(g.Z,{})}),C.length?(0,r.tZ)(a.Z,{className:p,css:[{opacity:w?1:0,".is-touch-device &":{opacity:1}}],children:(0,r.tZ)(o.Z,{label:"Comment Actions",onOpenChange:x,items:C,onItemClick:function(e){d(e.label)}})}):null}!function(e){e.Edit="Edit",e.Delete="Delete",e.Report="Report",e.Settings="Settings",e.Hide="Hide comment",e.Show="Show comment"}(y||(y={}));var G=(0,a.K)("form"),S=i.createContext(void 0);function T(){return i.useContext(S)}var D=S.Provider;function W(e){var n=e.initialValue,t=e.placeholder,o=e.onCancel,l=e.onSubmit,c=e.hideControls,s=e.buttonText,u=void 0===s?"Comment":s,m=e.buttonIcon,h=void 0===m?(0,r.tZ)(p.Z,{}):m,Z=e.error,f=(0,i.useState)(!1),v=f[0],g=f[1],w=(0,i.useState)(n),x=w[0],y=w[1],C=T();return(0,r.BX)(G,{css:[b.l0.colWithGap(8)],onSubmit:function(e){e.preventDefault(),l(x)},children:[(0,r.tZ)(d.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&l(x)},initialValue:x,placeholder:t,onChange:y,onFocus:function(){return g(!0)},userSearch:C}),Z?(0,r.BX)(a.Z,{css:[b.l0.display.block],children:[(0,r.tZ)(b.xv,{css:[b.l0.color.redDefault],children:Z})," ",(0,r.BX)(b.xv,{children:["For more information,"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/browsing-publishing-repls",target:"_blank",children:"check out the guidelines."})]})]}):null,v||!c?(0,r.BX)(a.Z,{css:[b.l0.rowWithGap(8),b.l0.justify.end],children:[(0,r.tZ)(b.zx,{text:"Cancel",onClick:function(e){g(!1),o&&o(e)}}),(0,r.tZ)(b.zx,{type:"submit",text:u,onClick:function(){},iconLeft:h,colorway:"primary",disabled:!x})]}):null]})}},61894:function(e,n,t){t.d(n,{G:function(){return De},Z:function(){return We}});var r=t(14924),i=t(26042),o=t(69396),l=t(10253),a=t(29815),c=t(35944),s=t(67294),u=t(90317),d=t(96139),p=t(47568),m=t(34051),h=t.n(m),Z=t(81255),f=t(11163),v=t(60731),g=t(37853),b=t(69346),w=t(1144),x=t(93058),y=t(34847),C=t(519);function k(e){var n=e.count;return n>0?(0,c.BX)(b.Z,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.tZ)(w.x,{children:n}),(0,c.tZ)(w.x,{color:"dimmer",children:(0,y.Z)("comment",n)})]}):(0,c.tZ)(w.x,{color:"dimmer",multiline:!0,children:"No comments yet"})}function R(e){var n,t=e.repl,r=(0,x.Z)(),a=r.showConfirm,s=r.showError,d=(0,l.Z)((0,u.k2b)({onError:function(e){return s(e.message)},onCompleted:function(e){var n,t=e.setReplCommentSettings;"UserError"!==t.__typename?"Repl"===t.__typename&&a("Comments "+((null===(n=t.commentSettings)||void 0===n?void 0:n.enabled)?"enabled":"disabled")):s(t.message)}}),1),p=d[0],m=!(null===t||void 0===t?void 0:t.commentSettings)||t.commentSettings.enabled;return(0,c.BX)(b.Z,{css:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.center],children:[m?(0,c.tZ)(k,{count:t.commentCount}):(0,c.tZ)(w.x,{color:"dimmer",multiline:!0,children:"Adding comments has been turned off for this Repl."}),(null===(n=t.currentUserPermissions)||void 0===n?void 0:n.changeCommentSettings)&&(0,c.BX)(b.Z,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,c.tZ)(w.x,{children:"Allow comments"}),(0,c.tZ)(C.Z,{isOn:m,onChange:function(){return p({variables:{input:{replId:t.id,enabled:!m}},optimisticResponse:{setReplCommentSettings:(0,o.Z)((0,i.Z)({},t),{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!m}})}})}})]})]})}var B=t(12662),G=t(54917),S=t(77365);function T(e){var n,t,l,d=e.replId,m=(0,f.useRouter)().query,b=(0,u.ex8)({ssr:!1,variables:{replId:d,after:m.after?m.after.toString():void 0,count:25}}),w=b.data,x=b.loading,y=b.fetchMore,C=b.refetch,k="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)?w.repl:null,T=!(!k||"User"!==(null===(n=k.owner)||void 0===n?void 0:n.__typename))&&(null===k||void 0===k?void 0:k.owner.isBlockingCurrentUser),D=null===w||void 0===w?void 0:w.currentUser,W=null===k||void 0===k?void 0:k.comments.pageInfo,E=(0,s.useMemo)((function(){return k&&D?function(e){var n,t=e.repl,i=e.currentUser,o="User"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?(0,r.Z)({},t.owner.username,t.owner):{};return t.comments.items.forEach((function(e){e.user&&(o[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){(null===e||void 0===e?void 0:e.user)&&(o[e.user.username]=e.user)}))})),t.multiplayers.forEach((function(e){o[e.username]=e})),i&&delete o[i.username],Object.values(o)}({repl:k,currentUser:D}):[]}),[k,D]),X=!(null===k||void 0===k?void 0:k.commentSettings)||k.commentSettings.enabled,P=(l=E,function(){var e=(0,p.Z)(h().mark((function e(n){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===n||void 0===n?void 0:n.toLowerCase(),!((r=l.filter((function(e){return!t||e.username.toLowerCase().includes(t)}))).length<5&&n)){e.next=7;break}return e.next=5,(0,B.S)(n);case 5:e.sent.forEach((function(e){r.some((function(n){return n.username===e.username}))||r.push(e)}));case 7:return e.abrupt("return",r.slice(0,5));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return(0,c.BX)(v.G7,{css:[Z.l0.colWithGap(16)],children:[x&&(0,c.BX)(v.G7,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.tZ)(S.Z,{}),(0,c.tZ)(v.xv,{children:"Loading comments..."})]}),k&&!T?(0,c.BX)(c.HY,{children:[(0,c.BX)(G.Sh,{value:P,children:[(0,c.tZ)(R,{repl:k}),D&&X?(0,c.tZ)(g.H,{onComment:function(){return C()},replId:k.id,placeholder:k?"Say something about ".concat(k.title):""}):null,null===(t=k.comments)||void 0===t?void 0:t.items.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,c.tZ)(g.x,{commentsEnabled:X,comment:e,onReply:function(){return C()},onDelete:function(){return C()}},e.id)}))]}),(null===W||void 0===W?void 0:W.nextCursor)&&k?(0,c.tZ)(v.G7,{children:(0,c.tZ)("a",{href:k.url+"?after="+W.nextCursor,onClick:function(e){e.preventDefault(),x||y({variables:{after:W.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,o.Z)((0,i.Z)({},r),{repl:(0,o.Z)((0,i.Z)({},l),{comments:(0,o.Z)((0,i.Z)({},l.comments),{items:(0,a.Z)(t.comments.items).concat((0,a.Z)(l.comments.items))})})}):e}})},children:x?"Loading...":"Load more comments"})}):null]}):null,k&&T?(0,c.BX)(v.G7,{css:[Z.l0.colWithGap(24),Z.l0.align.center,Z.l0.textAlign.center],children:[(0,c.tZ)(v.xv,{variant:"subheadBig",multiline:!0,children:"You\u2019re blocked"}),(0,c.BX)(v.xv,{children:["You can\u2019t follow, comment or see"," ",k.owner&&"User"===k.owner.__typename?k.owner.username:"user","\u2019s Repls on their profile."]})]}):null]})}var D=t(86292),W=t(4924),E=t(70917),X=t(61756),P=t(5886),H=t(92002),A=t(83074),_=t(64080),U=t(75026),I=t(57263),V=t(88046),F=t(33417),M=t(1879),z=t(98967),O=t(44565),L=t(41664),j=t.n(L),q=t(23223),N=t(70570),Y=t(82447),K=t(94718),Q=t(5804),J=t(2896),$=t(53427),ee=t(81456),ne=t(26725),te=(0,b.K)("a"),re={template:{background:Z.TV.yellowDimmest,foreground:Z.TV.yellowStrongest},app:{background:Z.TV.accentPrimaryDimmest,foreground:Z.TV.accentPrimaryStrongest}};function ie(e){var n=e.colorway,t=e.text;return(0,c.tZ)(b.Z,{css:[{backgroundColor:n.background},Z.l0.borderRadius(8),Z.l0.px(4),Z.l0.py(2)],children:(0,c.tZ)(b.Z,{css:[{color:n.foreground,fontSize:Z.TV.fontSizeSmall}],children:t})})}function oe(e){var n,t,l,a,s,d,p,m,h=e.repl,f=e.currentUser,v=h.owner,g=h.lastPublishedAt||(null===(n=h.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.timeCreated),x=v&&v.id===(null===f||void 0===f?void 0:f.id);return(0,c.BX)(b.Z,{css:[Z.l0.colWithGap(32)],children:[(0,c.BX)(b.Z,{css:[Z.l0.colWithGap(16)],children:[(0,c.tZ)(b.Z,{css:[Z.l0.rowWithGap(8),Z.l0.align.start],children:(0,c.BX)(b.Z,{css:[Z.l0.colWithGap(8),Z.l0.flex.growAndShrink(1)],children:[(0,c.BX)(b.Z,{css:(p={},(0,r.Z)(p,"@media (max-width: ".concat(I.j.tabletMin-1,"px)"),[Z.l0.colWithGap(8)]),(0,r.Z)(p,"@media (min-width: ".concat(I.j.tabletMin,"px)"),[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.center]),p),children:[v?(0,c.tZ)(c.HY,{children:(0,c.BX)(b.Z,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.flex.wrap,{gap:Z.TV.space8}],children:[(0,c.tZ)(K.Z,{inline:!0,username:v.username,children:(0,c.tZ)(Y.ZP,{user:v,children:(0,c.tZ)(te,{css:[Z.l0.color.foregroundDefault],children:(0,c.tZ)(N.Z,{username:v.username,src:(null===v||void 0===v?void 0:v.image)||null})})})}),!x&&(0,c.tZ)(ne.Z,{subtle:!0,small:!0,user:v}),(0,c.tZ)(w.x,{color:"dimmer",children:"User"===v.__typename&&v.followerCount>0?(0,ee.d)(v.followerCount)+(m=v.followerCount,m>1?" followers":" follower"):null})," "]})}):(0,c.tZ)(N.Z,{small:!0,src:null,username:"[deleted]"}),(null===(l=h.source)||void 0===l||null===(a=l.deployment)||void 0===a||null===(s=a.repl)||void 0===s?void 0:s.owner)&&(0,c.BX)(b.Z,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.tZ)(w.x,{color:"dimmest",children:"Made with "}),(0,c.tZ)(j(),(0,o.Z)((0,i.Z)({},(0,V.aq)(h.source.deployment.repl)),{children:(0,c.BX)(te,{css:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.color.foregroundDefault],children:[(0,c.tZ)($.ZP,{size:24,alt:h.source.deployment.repl.templateLabel,iconUrl:h.source.deployment.repl.iconUrl}),(0,c.tZ)(w.x,{children:h.source.deployment.repl.templateLabel})]})}))]})]}),(0,c.BX)(b.Z,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,(0,r.Z)({},"@media (max-width: ".concat(I.j.tabletMin,"px)"),[Z.l0.colWithGap(8),Z.l0.align.start])],children:[(0,c.BX)(b.Z,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[h.publishedAs===u.O2h.Template?(0,c.tZ)(ie,{colorway:re.template,text:"Template"}):null,h.publishedAs===u.O2h.App?(0,c.tZ)(ie,{colorway:re.app,text:"App"}):null,g?(0,c.BX)(w.x,{color:"dimmer",variant:"small",children:["Published on"," ",new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),(null===(d=h.origin)||void 0===d?void 0:d.owner)?(0,c.BX)(w.x,{color:"dimmer",variant:"small",children:["Forked from"," ",(0,c.tZ)(Y.ZP,{user:h.origin.owner,children:(0,c.tZ)("a",{children:h.origin.owner.username})}),"/",(0,c.tZ)(j(),(0,o.Z)((0,i.Z)({},(0,V.aq)(h.origin)),{children:(0,c.tZ)("a",{children:h.origin.title})}))]}):null]})]})}),h.tags.length?(0,c.tZ)(b.Z,{children:(0,c.tZ)(b.Z,{tag:"ul","aria-label":"Tags",css:[{flexWrap:"wrap",margin:"calc(".concat(Z.TV.space4," * -1)")},Z.l0.flex.row],children:h.tags.map((function(e){var n=(0,Q.M6)(e.id);return(0,c.tZ)("li",{css:{listStyle:"none"},children:(0,c.tZ)(J.Z,{text:"#"+e.id,css:[{margin:Z.TV.space4}],href:n.href,as:n.as})},e.id)}))})}):null,h.description?(0,c.tZ)(b.Z,{children:(0,c.tZ)(q.Z,{css:{backgroundColor:"transparent"},children:h.description})}):(0,c.tZ)(w.x,{color:"dimmest",children:"This Repl has no description"})]}),(0,c.tZ)(b.Z,{css:[{borderBottom:"1px solid ".concat(Z.TV.outlineDefault)}]})]})}var le,ae,ce,se,ue=t(50942),de=t(93160),pe=t(25958),me=t(33473),he=t(6600),Ze=t(87514),fe=t(92876),ve="b7292411-5efe-4c15-be23-060d48a9a6d6",ge=function(e){var n=e.isLoggedIn,t=(0,s.useState)(!1),r=t[0],i=t[1],o=(0,x.Z)().showError,a=(0,s.useState)(!1),u=a[0],d=a[1],p=(0,l.Z)((0,F.Z)({onError:function(){fe.$e((function(e){e.setExtra("templateId",ve),fe.Tb(new Error("RelatedReplsBanner: Failed to fork template"))}))}}),2),m=p[0],h=p[1].loading,Z=(0,c.tZ)(Ze.Z,{});return(0,c.BX)(c.HY,{children:[(0,c.tZ)(v.G7,{css:[v.l0.borderRadius(8),{overflow:"hidden","@media(max-width: 768px)":{borderWidth:1,borderColor:v.TV.backgroundHighest}}],children:(0,c.BX)(v.G7,{css:{position:"relative",background:"url('/public/images/javascript-tutorial-banner-1.jpg')",backgroundPosition:"center",backgroundSize:"cover",height:256,"@media(max-width: 768px)":{height:128}},children:[(0,c.BX)(v.G7,{css:{padding:v.TV.space16,"@media(max-width: 768px)":{padding:v.TV.space8}},children:[(0,c.tZ)(v.G7,{css:{flexDirection:"row",justifyContent:"space-between",gap:v.TV.space8},children:(0,c.tZ)(v.xv,{variant:"headerBig",multiline:!0,css:[v.l0.flex.growAndShrink(1),{paddingRight:v.TV.space8,paddingBottom:v.TV.space8,maxWidth:640,color:v.TV.white,textShadow:"0px 2px 4px rgba(2, 2, 3, 0.32)","@media(max-width: 768px)":{fontSize:v.TV.fontSizeHeaderDefault}}],children:"Build a calculator"})}),(0,c.tZ)(v.xv,{variant:"subheadBig",multiline:!0,css:[{paddingTop:v.TV.space8,color:v.TV.white,maxWidth:640,textShadow:"0px 2px 4px rgba(2, 2, 3, 0.32)","@media(max-width: 768px)":{display:"none"}}],children:""})]}),(0,c.tZ)(v.G7,{css:[v.l0.rowWithGap(8),{position:"absolute",bottom:v.TV.space16,left:v.TV.space16}],children:(0,c.tZ)(v.zx,{onClick:function(){if(!n)return i(!0),void(0,D.j)(D.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"related-repls"});h||m({originId:ve,trackingData:{forkSource:"relatedReplsSection"}})},iconLeft:Z,text:"Learn JavaScript",big:!0,css:[{color:v.TV.white,backgroundColor:"rgba(15, 23, 38, 0.7)","&:hover":{backgroundColor:v.TV.black,border:"1px solid var(--black) !important"},"@media(max-width: 768px)":{display:"none"}}]})})]})}),(0,c.tZ)(M.Z,{onRequestClose:function(){return i(!1)},isOpen:r,maxWidth:872,children:(0,c.tZ)(z.Z,{onSuccess:function(){d(!0),m({originId:ve,trackingData:{forkSource:"relatedReplsSection"}})},onFailure:function(e){var n=e.error;d(!1),o(n)},title:u&&h?"Sit tight":"Sign up",showForm:!u||!h,showSuccess:u&&h,description:u&&h?"We\u2019re setting up your workspace\u2026":"Sign up and create your first repl."})})]})},be=t(28592),we=t(9838),xe=Boolean(window.navigator)&&!window.navigator.languages?window.navigator.languages:void 0,ye=t(60286),Ce=function(e){return"@media (max-width: ".concat(e,"px)")},ke={mobile:Ce(I.j.tabletMin),small:(ae=I.j.tabletMin+1,ce=I.j.tabletMax,"@media (min-width: ".concat(ae,"px) and (max-width: ").concat(ce,"px)")),smallAndMobile:Ce(I.j.tabletMax),desktop:(le=I.j.tabletMax+1,"@media (min-width: ".concat(le,"px)"))},Re=function(e){return{name:e,gridArea:(0,E.iv)({gridArea:e})}},Be={header:Re("header"),cta:Re("cta"),main:Re("main"),secondary:Re("secondary"),auxiliary:Re("auxiliary")},Ge={mobile:(0,E.iv)({gridTemplateAreas:'\n      "'.concat(Be.header.name,'"\n      "').concat(Be.cta.name,'"\n      "').concat(Be.main.name,'"\n      "').concat(Be.auxiliary.name,'"\n      "').concat(Be.secondary.name,'"\n      ')}),small:(0,E.iv)({gridTemplateColumns:"1fr auto auto 25%",gridTemplateRows:"auto",gridTemplateAreas:'\n      "'.concat(Be.header.name," ").concat(Be.header.name," ").concat(Be.cta.name," ").concat(Be.cta.name,'"\n      "').concat(Be.main.name," ").concat(Be.main.name," ").concat(Be.main.name," ").concat(Be.main.name,'"\n      "').concat(Be.secondary.name," ").concat(Be.secondary.name," ").concat(Be.secondary.name," ").concat(Be.auxiliary.name,'"\n      ')}),desktop:(0,E.iv)({columnGap:Z.TV.space32,alignItems:"baseline",gridTemplateColumns:"1fr 25%",gridTemplateRows:"auto auto auto auto 1fr",gridTemplateAreas:'\n      "'.concat(Be.header.name," ").concat(Be.cta.name,'"\n      "').concat(Be.main.name," ").concat(Be.cta.name,'"\n      "').concat(Be.main.name," ").concat(Be.auxiliary.name,'"\n      "').concat(Be.main.name," ").concat(Be.auxiliary.name,'"\n      "').concat(Be.secondary.name," ").concat(Be.auxiliary.name,'"\n      ')})},Se=function(e){var n,t=e.withSidebar;return(0,E.iv)([Z.l0.px(16),Z.l0.py(32),(n={maxWidth:1200,margin:"0 auto",display:"grid",gap:Z.TV.space16},(0,r.Z)(n,ke.mobile,Ge.mobile),(0,r.Z)(n,ke.small,[Z.l0.px(16),Ge.small]),(0,r.Z)(n,ke.desktop,[Z.l0.p(32),t?Ge.desktop:Ge.small]),n)])};function Te(e){var n=e.repl,t=e.currentUser,a=function(){if(!t)return m(se.AuthPrompt),void(0,D.j)(D.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"fork"});v||m(se.ForkModal)},d=(0,l.Z)(s.useState(null),2),p=d[0],m=d[1],h=(0,l.Z)((0,F.Z)(),2),f=h[0],v=h[1].loading,g=(0,be.useFlags)().gateFlagRenameForkClone;g||(g="Fork Repl");var w,x,y=(0,V.aq)(n),C=n.currentUserPermissions.containerWrite?(0,c.tZ)(P.Co,{colorway:"primary",iconLeft:(0,c.tZ)(_.Z,{}),stretch:!0,text:"Edit in workspace",as:y.as,href:y.href}):null,k=n.currentUserPermissions.publish&&n.publishedAs&&n.publishedAs!==u.O2h.Template?(0,c.tZ)(X.ZP,{text:"Add an update",type:"button",iconLeft:(0,c.tZ)(U.Z,{}),onClick:function(){return m(se.UpdateModal)}}):null,R=n.publishedAs===u.O2h.Template?{text:v?"Forking...":"Use Template",icon:(0,c.tZ)(H.Z,{}),count:n.publicReleasesForkCount}:{text:v?"Forking...":g,icon:(0,c.tZ)(A.Z,{}),count:n.publicForkCount},B=(0,c.tZ)(me.Z,(0,o.Z)((0,i.Z)({},R),{onClick:a,icon:(0,c.tZ)(A.Z,{}),colorway:null===C?"primary":void 0,onCountClick:function(){return m(se.ForksModal)}})),G=(0,c.tZ)(M.Z,{isOpen:"ForksModal"===p,onRequestClose:function(){return m(null)},children:(0,c.tZ)(O.Z,{replId:n.id})}),S=(0,c.tZ)(M.Z,{isOpen:"UpdateModal"===p,onRequestClose:function(){return m(null)},children:(0,c.tZ)(he.Z,{repl:n,onDone:function(){return m(null)},source:"coverPage"})}),T=(0,c.tZ)(M.Z,{isOpen:p===se.ForkModal,onRequestClose:function(){return m(null)},children:(0,c.tZ)(ye.Z,{onFork:function(e,t,r,i){var o,l;f({originId:n.id,teamId:e,title:t,description:r,isPrivate:i,replReleaseId:(null===(o=n.deployment)||void 0===o||null===(l=o.activeRelease)||void 0===l?void 0:l.id)||void 0,forkToPersonal:!e,trackingData:{forkSource:"replViewHeader",isApp:n.publishedAs===u.O2h.App,isTemplate:n.publishedAs===u.O2h.Template}})},initialTitle:n.title,initialDescription:null!==(w=n.description)&&void 0!==w?w:"",initialPrivacy:!1,hideModal:function(){return m(null)},teamContext:null===t||void 0===t?void 0:t.username})});return C?(0,c.BX)(c.HY,{children:[(0,c.BX)(b.Z,{css:[(x={},(0,r.Z)(x,ke.mobile,Z.l0.colWithGap(8)),(0,r.Z)(x,ke.small,Z.l0.rowWithGap(8)),(0,r.Z)(x,ke.desktop,Z.l0.colWithGap(8)),x)],children:[(0,c.tZ)(b.Z,{children:C}),(0,c.tZ)(b.Z,{children:k}),(0,c.tZ)(b.Z,{children:B})]}),G,T,S]}):(0,c.BX)(c.HY,{children:[B,(0,c.tZ)(M.Z,{isOpen:p===se.AuthPrompt,onRequestClose:function(){m(null)},children:(0,c.tZ)(z.Z,{title:"Sign up or log in to ".concat(g.toLowerCase().split(" ")[0]," this Repl"),onSuccess:function(){return a()},source:"fork"})}),G,T]})}function De(e){var n=e.title,t=e.withSidebar,r=void 0===t||t;return(0,c.tZ)(b.Z,{css:[Z.l0.flex.row,Z.l0.flex.growAndShrink(1)],children:(0,c.BX)(b.Z,{css:[Z.l0.p(16),Z.l0.flex.growAndShrink(1),Se({withSidebar:r})],children:[(0,c.BX)(b.Z,{css:[Be.header.gridArea,Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,c.tZ)(de.Z,{elevated:!0,css:[Z.l0.width(32),Z.l0.height(32),Z.l0.borderRadius("full")]}),(0,c.tZ)(w.h,{color:"dimmest",variant:"headerBig",level:1,css:[Z.l0.flex.growAndShrink(1),{wordBreak:"break-word"}],children:n||"Loading..."})]}),(0,c.tZ)(b.Z,{css:[Be.cta.gridArea],children:(0,c.tZ)(X.ZP,{disabled:!0,text:" "})}),(0,c.tZ)(b.Z,{css:[Be.main.gridArea,Z.l0.colWithGap(16)],children:(0,c.tZ)(de.Z,{elevated:!0,css:[Z.l0.height(500),Z.l0.borderRadius(8)]})}),(0,c.tZ)(b.Z,{css:[Be.auxiliary.gridArea,Z.l0.colWithGap(16)],children:(0,c.BX)(b.Z,{css:Z.l0.colWithGap(16),children:[(0,c.tZ)(w.x,{color:"dimmest",variant:"subheadDefault",children:"Loading..."}),(0,c.tZ)(b.Z,{css:Z.l0.colWithGap(16),children:(0,a.Z)(Array(3)).map((function(e,n){return(0,c.tZ)(de.Z,{elevated:!0,css:[Z.l0.height(100),Z.l0.borderRadius(8)]},n.toString())}))})]})}),(0,c.tZ)(b.Z,{css:[Be.secondary.gridArea]})]})})}function We(e){var n=e.repl,t=e.currentUser,r=e.withSidebar,i=void 0===r||r;s.useEffect((function(){m(!xe||xe.includes("en-US")||xe.includes("en-GB")),t&&!n.currentUserPermissions.containerWrite&&(0,D.j)(D.U3.REPL_GUEST_VIEW,{page:"replView"})}),[t,n.currentUserPermissions.containerWrite]);var o=n.tags.map((function(e){return e.id})).includes("javascript"),a=(0,l.Z)(s.useState(!0),2),p=a[0],m=a[1],h=(0,we.c)("flag-replit-reps-cover-page").enabled;return(0,c.tZ)(b.Z,{css:[Z.l0.flex.row,Z.l0.flex.growAndShrink(1)],children:(0,c.BX)(b.Z,{css:[Z.l0.p(16),Z.l0.flex.growAndShrink(1),Se({withSidebar:i})],children:[(0,c.tZ)(b.Z,{css:[Be.header.gridArea],children:(0,c.tZ)(pe.Z,{repl:n,iconEditable:n.currentUserPermissions.changeIconUrl,canModerate:(null===t||void 0===t?void 0:t.isModerator)||(null===t||void 0===t?void 0:t.isAdmin)})}),(0,c.tZ)(b.Z,{css:[Be.cta.gridArea],children:(0,c.tZ)(Te,{repl:n,currentUser:t})}),(0,c.BX)(b.Z,{css:[Be.main.gridArea,Z.l0.colWithGap(16)],children:[(0,c.tZ)(b.Z,{css:[{height:500,"> *":{height:"100%"}}],children:(0,c.tZ)(d.Z,{repl:n,currentUser:t,enableDeeplinks:!0})}),(0,c.tZ)(oe,{repl:n,currentUser:t})]}),(0,c.BX)(b.Z,{tag:"aside","data-nosnippet":!0,css:[Be.auxiliary.gridArea,Z.l0.colWithGap(16)],children:[h&&p&&(0,c.tZ)(v.jL,{backgroundImage:"/public/images/replit-reps-promo-small.png",headerText:"",bodyText:"",buttons:[{href:"https://replit-reps.replit-community.repl.co/",onClick:function(){},target:"_blank",text:"Apply now"}]}),o&&!h&&(0,c.tZ)(ge,{isLoggedIn:Boolean(t)}),n.relatedRepls.map((function(e){var n=e.name,t=e.repls;return(0,c.BX)(b.Z,{css:Z.l0.colWithGap(16),children:[(0,c.tZ)(w.h,{level:3,variant:"subheadDefault",children:n}),(0,c.tZ)(b.Z,{css:Z.l0.colWithGap(16),children:t.map((function(e){return e.publishedAs===u.O2h.Template?(0,c.tZ)(ue.Z,{repl:e},e.id):(0,c.tZ)(W.ZP,{showOwner:!0,repl:e,maxVisibleTags:1},e.id)}))})]},n)}))]}),(0,c.tZ)(b.Z,{css:[Be.secondary.gridArea],children:(0,c.tZ)(T,{replId:n.id})})]})})}!function(e){e.ForksModal="ForksModal",e.AuthPrompt="AuthPrompt",e.UpdateModal="UpdateModal",e.ForkModal="ForkModal"}(se||(se={}))},23223:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(35944),i=(t(67294),t(41942));function o(e){var n=e.children,t=e.className;return(0,r.tZ)(i.ZP,{background:!1,skipHtml:!0,mentionsLink:!0,unwrapDisallowed:!0,lineBreaks:!0,className:t,allowedElements:["a","pre","code","em","strong","del","ins","p","ul","li","img","blockquote"],children:n})}},44565:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(26042),i=t(69396),o=t(29815),l=t(35944),a=(t(67294),t(1144)),c=t(69346),s=t(81255),u=t(90317),d=t(6951),p=t(34847),m=t(4924),h=t(60731);function Z(e){var n=e.replId,t=(0,u.zWW)({variables:{replId:n,count:100}}),Z=t.data,f=t.fetchMore,v=t.loading,g="Repl"===(null===Z||void 0===Z?void 0:Z.repl.__typename)?Z.repl:null,b=g?g.publicForks:null,w=g?g.publicForkCount+g.publicReleasesForkCount:null;return(0,l.BX)(c.Z,{css:[s.l0.colWithGap(8)],children:[(0,l.BX)(c.Z,{children:[null!==w?(0,l.BX)(c.Z,{css:[s.l0.display.block],children:[(0,l.tZ)(a.x,{variant:"subheadDefault",children:w})," ",(0,l.tZ)(a.x,{color:"dimmest",variant:"subheadDefault",children:(0,p.Z)("forks",w)})]}):null,v?(0,l.tZ)(a.x,{color:"dimmest",variant:"subheadDefault",children:"Loading forks..."}):null]}),(0,l.BX)(c.Z,{css:[s.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(c.Z,{css:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:s.TV.space16,gridAutoFlow:"dense"},children:b?b.items.map((function(e){return(0,l.tZ)(h.Tg,{elevated:!0,css:[s.l0.borderRadius(8)],children:(0,l.tZ)(m.ZP,{showOwner:!0,repl:e})},e.id)})):null}),(null===b||void 0===b?void 0:b.pageInfo.nextCursor)?(0,l.tZ)(d.Z,{disabled:v,border:!1,color:"primary",filled:!1,fullWidth:!0,onClick:function(){v||f({variables:{after:b.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var l=n.fetchMoreResult,a="Repl"===l.repl.__typename?l.repl:null;return a?(0,i.Z)((0,r.Z)({},l),{repl:(0,i.Z)((0,r.Z)({},a),{publicForks:(0,i.Z)((0,r.Z)({},a.publicForks),{items:(0,o.Z)(t.publicForks.items).concat((0,o.Z)(a.publicForks.items))})})}):e}})},children:v?"Loading...":"Load more"}):null]})]})}},54741:function(e,n,t){t.d(n,{Z:function(){return U}});var r=t(10253),i=t(35944),o=t(90317),l=t(59369),a=t(67294),c=t(1879),s=t(60731),u=t(93058),d=t(53429),p=(0,s.KD)("form");function m(e){var n=e.replId,t=e.onDone,l=(0,a.useState)(""),c=l[0],m=l[1],h=(0,u.Z)(),Z=h.showConfirm,f=h.showError,v=(0,r.Z)((0,o.b3J)({variables:{replId:n,reason:c},onCompleted:function(){Z("Repl reported"),t()}}),2),g=v[0],b=v[1].loading;return(0,i.BX)(s.G7,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.xv,{variant:"subheadBig",children:"Report Repl"}),(0,i.BX)(p,{onSubmit:function(e){e.preventDefault(),c?g():f("Not reported. No reason specified.")},css:[s.l0.colWithGap(32)],children:[(0,i.tZ)(s.G7,{css:[s.l0.colWithGap(8)],children:(0,i.tZ)(s.B,{placeholder:"Why do you want to report this Repl?",value:c,onChange:function(e){return m(e.currentTarget.value)},css:[s.l0.minHeight(64),s.l0.maxHeight(128),{resize:"vertical"}]})}),(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(16),s.l0.justify.end],children:[(0,i.tZ)(s.G7,{children:(0,i.tZ)(s.zx,{type:"button",text:"Cancel",onClick:function(){return t()}})}),(0,i.tZ)(s.G7,{children:(0,i.tZ)(s.zx,{disabled:b,text:b?"Reporting":"Report Repl",type:"submit",colorway:"negative",iconLeft:(0,i.tZ)(d.Z,{}),onClick:function(){return t()}})})]})]})]})}var h=t(88961),Z=(0,s.KD)("form");function f(e){var n=e.username,t=e.onDone,l=(0,a.useState)(""),c=l[0],d=l[1],p=(0,u.Z)(),m=p.showConfirm,f=p.showError,v=(0,r.Z)((0,o.$u1)({onCompleted:function(e){var n=e.warnUser;"UserError"===n.__typename?f(n.message):m("The user has been warned.")}}),2),g=v[0],b=v[1].loading;return(0,i.BX)(s.G7,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.h4,{level:1,variant:"headerDefault",children:"Warn the author of the Repl?"}),(0,i.BX)(Z,{onSubmit:function(e){e.preventDefault(),c&&n?(g({variables:{username:n,reason:c}}),t()):f("Please provide a reason.")},css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.B,{placeholder:"Reason for warning the user",value:c,onChange:function(e){return d(e.currentTarget.value)},css:{resize:"none",minHeight:40}}),(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.justify.end],children:[(0,i.tZ)(s.zx,{type:"button",text:"Cancel",onClick:function(){return t()}}),(0,i.tZ)(s.zx,{disabled:b,colorway:"negative",text:b?"Warning user...":"Yes, warn this user",type:"submit",iconLeft:(0,i.tZ)(h.Z,{})})]})]})]})}var v=t(40963),g=t(67177),b=(0,s.KD)("form");function w(e){var n=e.username,t=e.onDone,l=(0,a.useState)(""),c=l[0],d=l[1],p=(0,u.Z)(),m=p.showConfirm,h=p.showError,Z=(0,r.Z)((0,o.DHd)({onCompleted:function(e){var n=e.banCommunityUser;"UserError"===n.__typename?h(n.message):m("The user has been banned.")}}),2),f=Z[0],w=Z[1].loading;return(0,i.BX)(s.G7,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.h4,{level:1,variant:"headerDefault",children:"Ban the author of the Repl?"}),(0,i.tZ)(s.xv,{multiline:!0,children:"Are you sure you want to ban this user? All their Repls will be deleted and they will no longer be able to access their account."}),(0,i.BX)(b,{onSubmit:function(e){e.preventDefault(),c&&n?(f({variables:{username:n,reason:c}}),t()):h("Please provide a reason.")},css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.G7,{css:[s.l0.colWithGap(8)],children:(0,i.tZ)(v.B,{placeholder:"Reason for banning the user",value:c,onChange:function(e){return d(e.currentTarget.value)},css:{resize:"none",minHeight:40}})}),(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.justify.end],children:[(0,i.tZ)(s.zx,{type:"button",text:"Cancel",onClick:function(){return t()}}),(0,i.tZ)(s.zx,{disabled:w,colorway:"negative",text:w?"Banning user...":"Yes, ban this user",type:"submit",iconLeft:(0,i.tZ)(g.Z,{})})]})]})]})}var x=t(84857),y=t(47568),C=t(34051),k=t.n(C),R=t(41654),B=(0,s.KD)("form");function G(e){var n=e.replId,t=e.onDone,l=(0,u.Z)(),a=l.showConfirm,c=l.showError,d=(0,r.Z)((0,o.e2I)({variables:{input:{replId:n}}}),2),p=d[0],m=d[1];return(0,i.BX)(s.G7,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.h4,{level:1,variant:"headerDefault",children:"Unpublish Template from Community?"}),(0,i.BX)(B,{onSubmit:function(){var e=(0,y.Z)(k().mark((function e(n){var r,i,o,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=3,e.next=6,p();case 6:l=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),c("Something went wrong. Please try again.");case 12:if("Repl"!==(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.deleteReplDeployment.__typename)){e.next=16;break}a("Template successfully unpublished"),e.next=19;break;case 16:if("NotFoundError"!==(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.deleteReplDeployment.__typename)&&"UserError"!==(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.deleteReplDeployment.__typename)){e.next=19;break}return c(l.data.deleteReplDeployment.message),e.abrupt("return");case 19:t();case 20:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(n){return e.apply(this,arguments)}}(),css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.xv,{multiline:!0,children:"Unpublishing a Template will remove it from the Templates page. The Repl itself will not be deleted, and you can always re-publish the Template again later."}),(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.justify.end],children:[(0,i.tZ)(s.zx,{type:"button",text:"Cancel",onClick:function(){return t()}}),(0,i.tZ)(s.zx,{disabled:m.loading,colorway:"negative",text:m.loading?"Unpublishing Template...":"Yes, unpublish this Template",type:"submit",iconLeft:(0,i.tZ)(R.EyeOff,{})})]})]})]})}var S=t(76818),T=t(88512),D=(0,s.KD)("form");function W(e){var n=e.replId,t=e.reviewType,l=e.onDone,a=(0,u.Z)(),c=a.showConfirm,d=a.showError,p="Something went wrong ".concat("promote"===t?"promoting":"demoting"," this Template"),m=(0,r.Z)((0,o.bcJ)({variables:{input:{replId:n,shouldPromote:"promote"===t}},onError:function(){d(p)},onCompleted:function(e){"TemplateReview"===e.reviewTemplate.__typename?(c("Template successfully ".concat("promote"===t?"promoted":"demoted")),l()):"UnauthorizedError"===e.reviewTemplate.__typename||"UserError"===e.reviewTemplate.__typename?d(e.reviewTemplate.message):d(p)}}),2),h=m[0],Z=m[1];return(0,i.BX)(s.G7,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.h4,{level:1,variant:"headerDefault",children:"promote"===t?"Promote Template":"Demote Template?"}),(0,i.BX)(D,{onSubmit:function(){var e=(0,y.Z)(k().mark((function e(n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),h();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),css:[s.l0.colWithGap(24)],children:["promote"===t?(0,i.tZ)(s.xv,{multiline:!0,children:"Promoting a Template will show the Template in the Create Repl modal."}):(0,i.tZ)(s.xv,{multiline:!0,children:"Demoting a Template will remove the Template from the Create Repl modal."}),(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.justify.end],children:[(0,i.tZ)(s.zx,{type:"button",text:"Cancel",onClick:function(){return l()}}),"promote"===t?(0,i.tZ)(s.zx,{disabled:Z.loading,colorway:"primary",iconLeft:(0,i.tZ)(S.Z,{}),text:Z.loading?"Promoting Template...":"Promote Template"}):(0,i.tZ)(s.zx,{disabled:Z.loading,colorway:"negative",iconLeft:(0,i.tZ)(T.Z,{}),text:Z.loading?"Demoting Template...":"Demote Template"})]})]})]})}var E,X=t(64184),P=t(18757),H=t(61756),A=(0,s.KD)("form");function _(e){var n=e.post,t=e.onDone,l=(0,u.Z)(),a=l.showConfirm,c=l.showError,d=(0,r.Z)((0,o.ohW)({variables:{postId:n.id,isHidden:!n.isHidden},onCompleted:function(e){"Post"===e.toggleHiddenPost.__typename?n.isHidden?a("Post removed from the community."):a("Post allowed on community."):"NotFoundError"===e.toggleHiddenPost.__typename||"UserError"===e.toggleHiddenPost.__typename?c(e.toggleHiddenPost.message):c("An unexpected error occurred."),t()},onError:function(){c("Something went wrong. Please try again.")}}),2),p=d[0],m=d[1].loading,h=n.isHidden?"Yes, show this post":"Yes, hide this post",Z=n.isHidden?"Showing...":"Hiding...",f=n.isHidden?"Show this post to the Community":"Hide this post from the Community";return(0,i.BX)(s.G7,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(s.xv,{multiline:!0,variant:"subheadBig",children:f}),(0,i.BX)(A,{onSubmit:function(e){e.preventDefault(),p()},css:[s.l0.colWithGap(32)],children:[(0,i.tZ)(s.xv,{multiline:!0,children:"Hiding a post will remove it from the Community feeds, but the post will still be viewable to the creator. Showing a post will make it so all users will be able to discover this post though community feeds."}),(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.justify.end],children:[(0,i.tZ)(s.G7,{children:(0,i.tZ)(H.zx,{type:"button",text:"Cancel",onClick:t})}),(0,i.tZ)(s.G7,{children:(0,i.tZ)(H.zx,{disabled:m,colorway:"negative",text:m?Z:h,type:"submit",iconLeft:(0,i.tZ)(X.Z,{})})})]})]})]})}function U(e){var n,t,u=e.repl,p=e.post,Z=e.canModerate,v=e.source,b=(0,r.Z)(a.useState(null),2),y=b[0],C=b[1],k=[{label:"Report",isDestructive:!0,key:E.reportRepl,icon:(0,i.tZ)(d.Z,{})}];if(Z){if(k.push({label:(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(h.Z,{}),(0,i.tZ)(s.xv,{children:"Warning"}),(0,i.tZ)(s.DR,{text:"mod",css:[s.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),key:E.warnAuthor,isDestructive:!0}),k.push({label:(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(g.Z,{}),(0,i.tZ)(s.xv,{children:"Ban author"}),(0,i.tZ)(s.DR,{text:"mod",css:[s.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),key:E.banAuthor,isDestructive:!0}),null!==u.lastPublishedAt){var R=(null===p||void 0===p?void 0:p.isHidden)?(0,i.tZ)(P.Z,{}):(0,i.tZ)(X.Z,{}),B=(null===p||void 0===p?void 0:p.isHidden)?"Show post to Community":"Hide post from Community";p&&k.push({label:(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[R,(0,i.tZ)(s.xv,{children:B}),(0,i.tZ)(s.DR,{text:"mod",css:[s.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!0,key:E.modHide}),k.push({label:(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(g.Z,{}),(0,i.tZ)(s.xv,{children:"Unpublish Repl"}),(0,i.tZ)(s.DR,{text:"mod",css:[s.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!0,key:E.modUnpublish})}var D;if(u.publishedAs===o.O2h.Template)(null===(D=u.templateReview)||void 0===D?void 0:D.promoted)?k.push({label:(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(T.Z,{}),(0,i.tZ)(s.xv,{children:"Demote Template"}),(0,i.tZ)(s.DR,{text:"mod",css:[s.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!0,key:E.modDemoteTemplate}):k.push({label:(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(S.Z,{}),(0,i.tZ)(s.xv,{children:"Promote Template"}),(0,i.tZ)(s.DR,{text:"mod",css:[s.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!1,key:E.modPromoteTemplate})}return u.currentUserPermissions.publish&&null!==u.lastPublishedAt&&k.push({label:(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(X.Z,{}),(0,i.tZ)(s.xv,{children:"Unpublish from Community"})]}),isDestructive:!0,key:E.unpublish}),u.publishedAs===o.O2h.Template&&u.currentUserPermissions.publish&&k.push({label:(0,i.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(X.Z,{}),(0,i.tZ)(s.xv,{children:"Unpublish Template"}),(0,i.tZ)(s.DR,{text:"mod",css:[s.l0.color.foregroundDefault,{textTransform:"uppercase"}],clickable:!1})]}),isDestructive:!0,key:E.unpublishTemplate}),k.length?(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.Z,{label:"Repl Actions",items:k,onItemClick:function(e){C(e.key)}}),(0,i.tZ)(c.Z,{isOpen:y===E.reportRepl,onRequestClose:function(){return C(null)},children:(0,i.tZ)(m,{replId:u.id,onDone:function(){return C(null)}})}),(0,i.tZ)(c.Z,{isOpen:y===E.unpublish,onRequestClose:function(){return C(null)},children:(0,i.tZ)(x.Z,{repl:u,onDone:function(){return C(null)},source:v})}),(0,i.tZ)(c.Z,{isOpen:y===E.warnAuthor,onRequestClose:function(){return C(null)},children:(0,i.tZ)(f,{username:null===(n=u.owner)||void 0===n?void 0:n.username,onDone:function(){return C(null)}})}),(0,i.tZ)(c.Z,{isOpen:y===E.banAuthor,onRequestClose:function(){return C(null)},children:(0,i.tZ)(w,{username:null===(t=u.owner)||void 0===t?void 0:t.username,onDone:function(){return C(null)}})}),(0,i.tZ)(c.Z,{isOpen:y===E.unpublishTemplate,onRequestClose:function(){return C(null)},children:(0,i.tZ)(G,{replId:u.id,onDone:function(){return C(null)}})}),(0,i.tZ)(c.Z,{isOpen:y===E.modDemoteTemplate,onRequestClose:function(){return C(null)},children:(0,i.tZ)(W,{replId:u.id,reviewType:"demote",onDone:function(){return C(null)}})}),(0,i.tZ)(c.Z,{isOpen:y===E.modPromoteTemplate,onRequestClose:function(){return C(null)},children:(0,i.tZ)(W,{replId:u.id,reviewType:"promote",onDone:function(){return C(null)}})}),(0,i.tZ)(c.Z,{isOpen:y===E.modUnpublish,onRequestClose:function(){return C(null)},children:(0,i.tZ)(x.Z,{repl:u,onDone:function(){return C(null)},source:v})}),p&&(0,i.tZ)(c.Z,{isOpen:y===E.modHide,onRequestClose:function(){return C(null)},children:(0,i.tZ)(_,{post:p,onDone:function(){return C(null)}})})]}):null}!function(e){e.warnAuthor="warnAuthor",e.banAuthor="banAuthor",e.reportRepl="reportRepl",e.unpublish="unpublish",e.unpublishTemplate="unpublishTemplate",e.modPromoteTemplate="modPromoteTemplate",e.modDemoteTemplate="modDemoteTemplate",e.modUnpublish="modUnpublish",e.modHide="modHide"}(E||(E={}))},37853:function(e,n,t){t.d(n,{x:function(){return X},H:function(){return T}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=t(60536),c=t.n(a),s=t(67294),u=t(90317),d=t(88075),p=t(93058),m=t(23223),h=t(74591),Z=t(12662),f=t(1144),v=t(69346),g=t(81255);function b(e){var n=e.title;return(0,l.BX)(v.Z,{css:[g.l0.rowWithGap(8),g.l0.py(8)],children:[(0,l.tZ)(f.x,{variant:"subheadBig",multiline:!0,css:[{wordBreak:"break-all",flexShrink:1}],children:n}),(0,l.tZ)(f.x,{color:"dimmer",css:[g.l0.borderRadius(16),g.l0.p(4),{border:"1px solid "+g.TV.outlineDimmer,height:"fit-content"}],children:"Post"})]})}var w=t(37424),x=t(60731),y=(0,x.KD)("label");function C(e){var n=e.children;return(0,l.tZ)(x.G7,{css:[x.l0.rowWithGap(8),x.l0.align.center],children:n})}function k(e){var n,t=e.postId,i=function(e){h.loading||Z&&m({variables:{input:(0,r.Z)({id:Z.id},e)}})},a=(0,w.H)(),c=(0,u.pDS)({variables:{postId:t}}),s=c.data,d=c.loading,p=(0,o.Z)((0,u.dB7)(),2),m=p[0],h=p[1];if(d)return null;var Z="Post"===(null===s||void 0===s||null===(n=s.post)||void 0===n?void 0:n.__typename)?s.post:null,f=null===s||void 0===s?void 0:s.boards;if(!Z||!f)return(0,l.tZ)(x.xv,{children:"Something went wrong"});var v={isPinned:a("isPinned"),isHidden:a("isHidden"),boardId:a("boardId")};return(0,l.BX)(x.G7,{css:[x.l0.colWithGap(24)],children:[(0,l.tZ)(x.h4,{level:1,variant:"headerDefault",children:"Post settings"}),(0,l.BX)(x.G7,{css:[x.l0.colWithGap(8)],children:[(0,l.BX)(C,{children:[(0,l.tZ)(x.XZ,{id:v.isPinned,checked:Boolean(Z.isPinned),onChange:function(){return i({isPinned:!Z.isPinned})}}),(0,l.tZ)(y,{htmlFor:v.isPinned,children:"Pin post to Talk feed"})]}),Z.canHide?(0,l.BX)(C,{children:[(0,l.tZ)(x.XZ,{id:v.isHidden,checked:Boolean(Z.isHidden),onChange:function(e){return i({isHidden:e.target.checked})}}),(0,l.tZ)(y,{htmlFor:v.isHidden,children:"Hide post from listing"})]}):null]}),Z.canChangeBoard?(0,l.BX)(C,{children:[(0,l.tZ)(x.Ph,{id:v.boardId,placeholder:"Select a board",items:f.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:Z.board?{value:Z.board,title:Z.board.name}:void 0,onChange:function(e){return i({boardId:e.value.id})}}),(0,l.tZ)(y,{htmlFor:v.isHidden,children:"Change board (requires reload)"})]}):null]})}var R=t(54917),B=t(86292),G=t(64184);function S(e){var n=e.initialValue,t=e.commentId,r=e.onReply,i=e.onCancel,a=(0,s.useState)(null),c=a[0],d=a[1],p=(0,o.Z)((0,u.cTp)({onCompleted:function(e){var n="ReplComment"===e.createReplCommentReply.__typename?e.createReplCommentReply:null;if(n)return(0,B.j)(B.U3.COMMENT_MADE,{source:"spotlight"}),void r(n);var t="UserError"===e.createReplCommentReply.__typename?e.createReplCommentReply.message:null;t&&d(t)}}),2),m=p[0],h=p[1];return(0,l.tZ)(R.EQ,{error:c,initialValue:n,onCancel:i,onSubmit:function(e){h.loading||m({variables:{input:{body:e,replCommentId:t}}})}})}function T(e){var n=e.replId,t=e.placeholder,r=e.onComment,i=e.autoFocus,a=void 0!==i&&i,c=e.onCancel,p=void 0===c?function(){}:c,m=(0,s.useState)(!1),h=m[0],Z=m[1],f=(0,s.useState)(null),v=f[0],g=f[1],b=(0,o.Z)((0,u.QpW)({onCompleted:function(e){var n="ReplComment"===e.createReplComment.__typename?e.createReplComment:null;if(n)return(0,B.j)(B.U3.COMMENT_MADE,{source:"spotlight"}),Z(!0),void r(n);var t="UserError"===e.createReplComment.__typename?e.createReplComment.message:null;t&&g(t)}}),2),w=b[0],y=b[1];return h?(0,l.tZ)(x.E_,{icon:(0,l.tZ)(d.Z,{}),closable:!0,closeAction:function(){p(),Z(!1)},colorway:"positive",text:"Comment added"}):(0,l.tZ)(R.EQ,{autoFocus:a,initialValue:"",placeholder:t,hideControls:!0,error:v,onCancel:function(){p(),g(null)},onSubmit:function(e){y.loading||w({variables:{input:{body:e,replId:n}}})}})}function D(e){var n=e.comment,t=e.onReply,a=e.onDelete,p=e.replyToId,Z=e.toggleRepliesButton,f=e.commentsEnabled,v=(0,o.Z)((0,u.gaR)(),2),g=v[0],b=v[1],w=(0,o.Z)((0,u.cqY)({variables:{id:n.id},onCompleted:function(){X(null),a(n)}}),2),y=w[0],C=w[1],k=(0,o.Z)((0,u.oYJ)({variables:{commentId:n.id,isHidden:!n.isHidden}}),1)[0],B=(0,s.useState)(!1),T=B[0],D=B[1],W=(0,s.useState)(null),E=W[0],X=W[1],P=E===R.nQ.Edit,H=n.user;if((0,s.useEffect)((function(){E!==R.nQ.Hide&&E!==R.nQ.Show||k()}),[E,k]),!H)return null;var A=n.currentUserPermissions,_=Boolean(A);return(0,l.BX)(x.G7,{css:[x.l0.rowWithGap(8),{":hover .actions":{opacity:1}}],children:[(0,l.tZ)(R.Yt,{user:H}),(0,l.BX)(x.G7,{css:[x.l0.flex.growAndShrink(1),x.l0.colWithGap(4)],children:[(0,l.BX)(x.G7,{css:[x.l0.align.center,x.l0.rowWithGap(16)],children:[(0,l.tZ)(R.wb,{user:H,timeCreated:n.timeCreated}),n.isHidden&&(0,l.tZ)(x.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(G.Z,{size:12,"alt-text":"This comment is hidden"})})]}),P?(0,l.tZ)(R.EQ,{buttonText:"Save",buttonIcon:(0,l.tZ)(d.Z,{}),initialValue:n.body,onSubmit:function(e){b.loading||(g({variables:{input:{id:n.id,body:e}},optimisticResponse:{updateReplComment:(0,i.Z)((0,r.Z)({},n),{body:e})}}),X(null))},onCancel:function(){return X(null)}}):(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[n.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(m.Z,{children:n.body})}),T?(0,l.tZ)(x.G7,{css:[x.l0.pt(12)],children:(0,l.tZ)(S,{initialValue:"@".concat(H.username," "),commentId:p,onReply:function(e){t(e),D(!1)},onCancel:function(){return D(!1)}})}):(0,l.BX)(x.G7,{css:[x.l0.rowWithGap(8),{marginLeft:-4}],children:[_&&!n.isHidden&&f?(0,l.tZ)(R.g4,{onClick:function(){return D(!0)}}):null,Z]})]}),P?null:(0,l.tZ)(x.G7,{css:[T&&{visibility:"hidden"}],children:(0,l.tZ)(R.pl,{className:"actions",canEdit:Boolean(null===A||void 0===A?void 0:A.edit),canReport:!1,canEditSettings:!1,canDelete:Boolean(null===A||void 0===A?void 0:A.delete),onAction:X,canHideComment:Boolean(null===A||void 0===A?void 0:A.canHideComment)&&!n.isHidden,canShowComment:Boolean(null===A||void 0===A?void 0:A.canHideComment)&&Boolean(n.isHidden)})}),(0,l.tZ)(x.u_,{isOpen:E===R.nQ.Delete,onRequestClose:function(){return X(null)},children:(0,l.tZ)(h.Z,{delete:function(){C.loading||y({variables:{id:n.id}})},entityType:"comment",hideModal:function(){return X(null)}})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[n.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(n.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function W(e){var n=e.initialTitle,t=e.initialBody,r=e.onSubmit,i=e.onCancel,o=(0,s.useState)(n),a=o[0],c=o[1],u=(0,s.useState)(t),p=u[0],m=u[1],h=(0,R.Ex)(),f=(0,w.H)();return(0,l.BX)(R.l0,{css:[x.l0.colWithGap(8),x.l0.mt(8)],onSubmit:function(e){e.preventDefault(),r({title:a,body:p})},children:[(0,l.BX)(x.G7,{css:[x.l0.colWithGap(16)],children:[(0,l.BX)(x.G7,{css:[x.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:f("title"),children:(0,l.tZ)(x.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,l.tZ)(x.II,{value:a,placeholder:"Give your post a title",onChange:function(e){return c(e.currentTarget.value)},id:f("title")})]}),(0,l.tZ)(Z.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&r({title:a,body:p})},initialValue:p,onChange:m,userSearch:h,autoFocus:!1,showLabel:!0})]}),(0,l.BX)(x.G7,{css:[x.l0.rowWithGap(8),x.l0.justify.end],children:[(0,l.tZ)(x.zx,{text:"Cancel",onClick:i}),(0,l.tZ)(x.zx,{type:"submit",iconLeft:(0,l.tZ)(d.Z,{}),text:"Save",onClick:function(){},colorway:"primary",disabled:t===p&&n===a})]})]})}function E(e){var n=e.post,t=e.comment,a=e.onReply,d=e.onDelete,Z=e.replyToId,f=e.toggleRepliesButton,v=e.commentsEnabled,g=(0,p.Z)().showError,w=(0,o.Z)((0,u.kz4)({onError:function(e){return g(e.message)}}),2),y=w[0],C=w[1],B=(0,o.Z)((0,u.gaR)(),2),T=B[0],D=B[1],E=(0,o.Z)((0,u.cqY)({variables:{id:t.id},onCompleted:function(){F(null),d(t)}}),2),X=E[0],P=E[1],H=(0,o.Z)((0,u.oYJ)({variables:{commentId:t.id,isHidden:!t.isHidden}}),1)[0],A=(0,s.useState)(!1),_=A[0],U=A[1],I=(0,s.useState)(null),V=I[0],F=I[1],M=V===R.nQ.Edit,z=t.user;if((0,s.useEffect)((function(){V!==R.nQ.Hide&&V!==R.nQ.Show||H()}),[V,H]),!z)return null;var O=t.currentUserPermissions,L=Boolean(O),j=Boolean(n.canPin||n.canChangeBoard||n.canHide);return(0,l.BX)(x.G7,{css:[x.l0.rowWithGap(8),{":hover .actions":{opacity:1}}],children:[(0,l.tZ)(R.Yt,{user:z}),(0,l.BX)(x.G7,{css:[x.l0.flex.growAndShrink(1),x.l0.colWithGap(4),{"& .rendered-markdown":{backgroundColor:"transparent"}}],children:[(0,l.BX)(x.G7,{css:[x.l0.align.center,x.l0.rowWithGap(16)],children:[(0,l.tZ)(R.wb,{user:z,timeCreated:t.timeCreated,action:"shared an update"}),t.isHidden&&(0,l.tZ)(x.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(G.Z,{size:12,"alt-text":"This comment is hidden"})})]}),M?(0,l.tZ)(W,{initialTitle:n.title||"",initialBody:t.body,onSubmit:function(e){var o=e.title,l=e.body;D.loading||C.loading||(y({variables:{input:{id:n.id,title:o}},optimisticResponse:{updatePost:{post:(0,i.Z)((0,r.Z)({},n),{title:o})}}}),T({variables:{input:{id:t.id,body:l}},optimisticResponse:{updateReplComment:(0,i.Z)((0,r.Z)({},t),{body:l})}}),F(null))},onCancel:function(){return F(null)}}):(0,l.BX)(l.HY,{children:[n.title?(0,l.tZ)(x.G7,{children:(0,l.tZ)(b,{title:n.title})}):null,(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(m.Z,{children:t.body})})]}),_?(0,l.tZ)(x.G7,{css:[x.l0.pt(12)],children:(0,l.tZ)(S,{initialValue:"@".concat(z.username," "),commentId:Z,onReply:function(e){a(e),U(!1)},onCancel:function(){return U(!1)}})}):(0,l.BX)(x.G7,{css:[x.l0.rowWithGap(2),{marginLeft:-4}],children:[L&&v?(0,l.tZ)(R.g4,{onClick:function(){return U(!0)}}):null,f]})]}),M?null:(0,l.tZ)(x.G7,{css:[_&&{visibility:"hidden"}],children:(0,l.tZ)(R.pl,{className:"actions",canEdit:Boolean(null===O||void 0===O?void 0:O.edit),canReport:n.canReport,canEditSettings:j,canDelete:Boolean(null===O||void 0===O?void 0:O.delete),onAction:F,canHideComment:Boolean(null===O||void 0===O?void 0:O.canHideComment)&&!t.isHidden,canShowComment:Boolean(null===O||void 0===O?void 0:O.canHideComment)&&Boolean(t.isHidden)})}),(0,l.tZ)(x.u_,{isOpen:V===R.nQ.Delete,onRequestClose:function(){return F(null)},children:(0,l.tZ)(h.Z,{delete:function(){P.loading||X({variables:{id:t.id}})},entityType:"post",hideModal:function(){return F(null)}})}),(0,l.tZ)(x.u_,{isOpen:V===R.nQ.Report,onRequestClose:function(){return F(null)},children:"TODO: Report"}),(0,l.tZ)(x.u_,{isOpen:V===R.nQ.Settings,onRequestClose:function(){return F(null)},children:(0,l.tZ)(k,{postId:n.id})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[t.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(t.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function X(e){var n,t=e.comment,r=e.onReply,i=e.onDelete,o=e.commentsEnabled,a=(0,s.useState)(!1),c=a[0],u=a[1],d=t.replies,p=d.length,m=p?(0,l.tZ)(R.tE,{onClick:function(){return u((function(e){return!e}))},repliesCount:p,isExpanded:c}):null,h=(null===(n=t.post)||void 0===n?void 0:n.title)?t.post:null;return h?(0,l.BX)(x.Tg,{elevated:!0,css:[x.l0.colWithGap(32),x.l0.p(16),x.l0.borderRadius(8)],children:[(0,l.tZ)(E,{replyToId:t.id,post:h,comment:t,toggleRepliesButton:m,onReply:function(e){u(!0),r(e)},onDelete:i,commentsEnabled:o}),c?(0,l.tZ)(x.G7,{css:[x.l0.colWithGap(32),x.l0.pl(32)],children:d.filter((function(e){var n;return Boolean(null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(D,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]}):(0,l.BX)(x.G7,{css:[x.l0.colWithGap(32)],children:[(0,l.tZ)(D,{commentsEnabled:o,replyToId:t.id,comment:t,toggleRepliesButton:m,onReply:function(e){u(!0),r(e)},onDelete:i}),c?(0,l.tZ)(x.G7,{css:[x.l0.colWithGap(32),x.l0.pl(32)],children:d.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(D,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]})}},25958:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=(t(67294),t(90317)),c=t(81255),s=t(1144),u=t(69346),d=t(88961),p=t(54741),m=t(49483),h=t(53427),Z=t(87251),f=t(7657);function v(e){var n=e.repl,t=e.iconEditable,v=e.canModerate,g=(0,o.Z)((0,a.cuO)(),1)[0],b=(0,m.W)((function(e){return g({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,i.Z)((0,r.Z)({},n),{iconUrl:e})}}})}));return(0,l.BX)(u.Z,{css:[c.l0.colWithGap(8)],children:[(0,l.BX)(u.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[t?null:(0,l.tZ)(h.ZP,{iconUrl:n.iconUrl,alt:"",size:32}),t?(0,l.tZ)(m.Z,{size:32,value:b.previewUrl||n.iconUrl,onUpload:function(e){return b.uploadImage(e,f.N.ReplIcon)},isUploading:Boolean(b.previewUrl)}):null,(0,l.tZ)(s.h,{variant:"headerBig",level:1,css:[c.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:n.title}),(0,l.tZ)(p.Z,{repl:n,canModerate:v,source:"coverPage"})]}),b.error?(0,l.tZ)(u.Z,{css:[c.l0.align.start],children:(0,l.tZ)(Z.Z,{icon:(0,l.tZ)(d.Z,{}),colorway:"negative",text:b.error,closable:!0,closeAction:b.clearError})}):null]})}}}]);
//# sourceMappingURL=1894-5d3edabccb79a319.js.map