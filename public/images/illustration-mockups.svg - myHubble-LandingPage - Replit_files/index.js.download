(()=>{function f(t,o){function e(){t.contentWindow.removeEventListener("unload",o),t.contentWindow.addEventListener("unload",o)}t.addEventListener("load",e),e()}var c=!1;async function d(t="/"){c=!0;let o=document.getElementById("iframe"),e=await fetch(t,{method:"GET",credentials:"same-origin"});if(!e.ok)throw parent==null||parent.postMessage({type:"error",payload:`fetch-error: ${e.status} ${e.statusText}`},"https://replit.com"),new Error(e.statusText);let s=await e.text(),r=new DOMParser().parseFromString(s,"text/html"),a=document.createElement("script");a.innerHTML="history.pushState(null, null, '/');";let p=l();r.head.prepend(a,p);let i=o.contentDocument;i.open(),i.write(r.documentElement.outerHTML),i.close(),c=!1,f(o,u=>{c||(c=!0,u.preventDefault(),setTimeout(function(){try{let m=o.contentWindow.location;d(m.href)}catch{}},0))})}function l(){let t=document.createElement("script");return console.log(location.href),t.async=!1,t.src="https://replco.util.repl.co/devtools/devtools.js",t.setAttribute("onerror","parent.postMessage({ event: 'error', payload: 'script.onerror: Failed to load ' + event.target.src }, '*')"),t}var n=document.getElementById("iframe");(async()=>{try{await d()}catch(t){h(),parent==null||parent.postMessage({type:"error",payload:t})}})();function h(){var e,s;let t="__replit_devtools__";function o(){let r=n.contentWindow.document;if(r.getElementById(t))return;let a=l();a.id=t,r.head.appendChild(a)}(e=n.contentDocument)!=null&&e.head&&o(),n.addEventListener("load",o),n.src||(n.src="/"),(s=n.contentDocument)!=null&&s.head&&o()}window.addEventListener("message",t=>{t.origin===location.origin?(parent==null||parent.postMessage(t.data,"http://localhost:3000"),parent==null||parent.postMessage(t.data,"https://replit.com")):n.contentWindow.postMessage(t.data,location.origin)});})();
