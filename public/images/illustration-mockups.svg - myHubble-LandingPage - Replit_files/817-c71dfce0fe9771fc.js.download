"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{74591:function(e,t,n){var r=n(35944),i=(n(67294),n(69346)),l=n(1144),o=n(81255),a=n(61756),c=n(57704);t.Z=function(e){return(0,r.BX)(i.Z,{css:[o.l0.colWithGap(24)],children:[(0,r.BX)(l.h,{variant:"headerDefault",level:2,children:["Delete ",e.name||e.entityType]}),(0,r.BX)(l.x,{multiline:!0,children:["Are you sure you want to delete this ",e.entityType,"? This cannot be undone."]}),(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(12),o.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Cancel",onClick:e.hideModal}),(0,r.tZ)(a.zx,{iconLeft:(0,r.tZ)(c.Z,{}),onClick:function(){e.delete(),e.hideModal()},text:"Yes, delete this ".concat(e.entityType),colorway:"negative"})]})]})}},59369:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(26042),i=n(69396),l=n(10253),o=n(35944),a=n(67294),c=n(70804),s=n(41654),u=n(96594),d=n(41664),h=n.n(d),p=n(11163),f=n(81255),m=n(70917),v=n(44044),g=n(98705),Z=n(60731),b=n(34140),x=(0,Z.KD)("ul"),y=(0,Z.KD)("li"),k=(0,Z.KD)("a"),w=function(e){var t=e.isHighlighted,n=e.isDestructive;return(0,m.iv)([Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.p(8),Z.l0.cursor.pointer,n&&[Z.l0.color.accentNegativeDefault],t&&{backgroundColor:v.gU.listItem[":not([disabled])"][":active"].backgroundColor},t&&n&&[Z.l0.color.foregroundDefault,Z.l0.backgroundColor.accentNegativeDefault]])};function C(e){var t=e.label,n=e.items,d=e.onItemClick,m=e.onOpenChange,C=e.large,R=e.orientation,B=(0,p.useRouter)(),G=(0,l.Z)(a.useState(!1),2),X=G[0],E=G[1],T=(0,g.Z)(m);a.useEffect((function(){T.current&&T.current(X)}),[X,T]);var _=(0,u.L7)({isOpen:X,items:n,onSelectedItemChange:function(e){var t=e.selectedItem;t&&(E(!1),t.link?B.push(t.link.href,t.link.as):d(t))}}),S=_.getToggleButtonProps,I=_.getMenuProps,W=_.highlightedIndex,z=_.getItemProps,D=_.getLabelProps,U=C?32:24,P=C?20:16;return(0,o.BX)(c.Z,{isOpen:X,padding:0,gap:4,zIndex:f.n0,placement:"bottom-end",onClickOutside:function(){return E(!1)},children:[(0,o.BX)(Z.G7,{children:[(0,o.BX)(Z.G7,(0,i.Z)((0,r.Z)({css:[Z.d$,v.gU.listItem,Z.l0.borderRadius(8),Z.l0.center,{width:U,height:U}],tag:"button"},S({refKey:"innerRef",onClick:function(){return E((function(e){return!e}))}})),{children:["horizontal"===R?(0,o.tZ)(s.MoreHorizontal,{size:P}):(0,o.tZ)(s.MoreVertical,{size:P}),(0,o.tZ)(b.T,{children:(0,o.tZ)("label",(0,i.Z)((0,r.Z)({},D()),{children:t}))})]})),(0,o.tZ)(Z.G7,(0,r.Z)({},I({refKey:"innerRef"})))]}),(0,o.tZ)(x,{css:[Z.l0.minWidth(120),Z.l0.overflow("hidden"),Z.l0.borderRadius(8)],children:n.map((function(e,t){var n=W===t,l=(0,o.BX)(o.HY,{children:[e.icon,(0,o.tZ)(Z.xv,{css:Z.l0.flex.shrink(1),children:e.label})]});return(0,o.tZ)(y,(0,i.Z)((0,r.Z)({css:w({isHighlighted:n,isDestructive:e.isDestructive})},z({item:e,index:t,key:"".concat(e.label).concat(t)})),{children:e.link?(0,o.tZ)(h(),(0,i.Z)((0,r.Z)({passHref:!0},e.link),{children:(0,o.tZ)(k,{css:[Z.l0.align.center,Z.l0.rowWithGap(8),{color:"inherit"}],children:l})})):l}))}))})]})}},60368:function(e,t,n){var r=n(35944),i=n(60536),l=n.n(i);n(67294);t.Z=function(e){var t=e.maxLength,n=void 0===t?140:t,i=e.value,o=void 0===i?"":i,a=e.hideLabel,c=void 0!==a&&a;return(0,r.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[o.length," / ",n," ",c?"":"characters",(0,r.tZ)(l(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},7243:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(35944),i=(n(67294),n(69346)),l=n(81255);function o(e){var t=e.gap,n=e.inset,o=e.children,a=e.className;return(0,r.tZ)(i.Z,{className:a,css:[{overflowX:"auto",overflowY:"hidden","::-webkit-scrollbar":[l.l0.display.none]}],children:(0,r.tZ)(i.Z,{css:[l.l0.px(n),l.l0.rowWithGap(t),{width:"fit-content"}],children:o})})}},60286:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(26042),i=n(69396),l=n(10253),o=n(35944),a=n(67294),c=n(92876),s=n(30992),u=n(60731),d=n(83074),h=n(58086),p=n(37424),f=n(60368),m=n(14455),v=n(9836),g=n(30168),Z=n(94412),b=n(90317),x=n(18707),y=n(28592),k=function(e){var t=e.onFork,n=e.hideModal,r=e.initialTitle,i=e.initialDescription,c=void 0===i?"":i,b=e.initialPrivacy,k=e.teamContext,w=e.currentUser,C=a.useRef(null),R=(0,l.Z)(a.useState(b||!1),2),B=R[0],G=R[1],X=(0,p.H)(),E=(0,l.Z)((0,v.Y)(w,k),2),T=E[0],_=E[1],S=(0,s.Y)(r,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}})),I=(0,s.Y)(c,(function(e){if(e&&e.length>h.p)return{message:"Must be no longer than ".concat(h.p," characters")}}));a.useEffect((function(){var e;"Team"===T.__typename&&(null===(e=T.capabilities)||void 0===e?void 0:e.canCreatePrivateRepl)&&G(!0)}),[T]),a.useEffect((function(){C.current&&C.current.focus()}),[C]);var W=(0,y.useFlags)().gateFlagRenameForkClone;W||(W="Fork Repl");var z="Team"===T.__typename?T.id:null;return(0,o.tZ)("form",{onSubmit:function(e){e.preventDefault(),S.validate()||I.validate()||(t(z,S.value,I.value,B),n())},children:(0,o.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,o.tZ)(u.h4,{variant:"headerDefault",level:2,children:W}),(0,o.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,o.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,o.BX)(u.G7,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.end],children:[(0,o.tZ)(m._,{for:X("name"),children:"Name"}),(0,o.tZ)(f.Z,{maxLength:60,value:S.value,hideLabel:!0})]}),(0,o.tZ)(u.II,{ref:C,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return S.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:S.value,onBlur:S.handleBlur,id:X("name")}),S.error&&(0,o.tZ)(u.xv,{css:[u.l0.color.accentNegativeStronger],children:S.error.message})]}),(0,o.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,o.BX)(u.G7,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.end],children:[(0,o.tZ)(m._,{for:X("description"),children:"Description"}),(0,o.tZ)(f.Z,{maxLength:h.p,value:I.value,hideLabel:!0})]}),(0,o.tZ)(u.B,{maxLength:h.p,value:I.value,onChange:function(e){return I.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[u.l0.minHeight(96),u.l0.maxHeight(128),{resize:"vertical"}],id:X("description")})]}),(0,o.tZ)(Z.P,{context:"fork_modal",isPrivate:B,setIsPrivate:G,privacyState:(0,x.EZ)(T,w)})]}),w.teams.length>0?(0,o.BX)(u.G7,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(m._,{for:X("owner"),children:"Owner"}),(0,o.tZ)(g.Z,{id:X("owner"),currentUser:w,initialSelectedUsername:T.username,onChange:function(e){return _(e.username)}})]}):null,(0,o.BX)(u.G7,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,o.tZ)(u.zx,{onClick:n,text:"Cancel",type:"button"}),(0,o.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:Boolean(S.error||I.error),text:W,iconLeft:(0,o.tZ)(d.Z,{})})]})]})})};function w(e){var t=(0,b.BLx)({fetchPolicy:"cache-and-network",onError:function(e){c.$e((function(t){t.setTag("fork-modal",!0),c.Tb(e)}))}}),n=t.data,l=t.loading,a=t.error;if(l)return(0,o.tZ)(u.xv,{color:"dimmer",children:"Loading..."});if(a)return(0,o.tZ)(u.xv,{children:"Something went wrong."});if(!n)return null;var s=n.currentUser;return s?(0,o.tZ)(k,(0,i.Z)((0,r.Z)({},e),{currentUser:s})):(0,o.tZ)(u.xv,{children:"Please log in"})}},9838:function(e,t,n){n.d(t,{c:function(){return l}});var r=n(67294),i=n(90317);function l(e){var t,n=(0,i.T7i)({variables:{flag:e}}),l=n.data,o=n.loading;return(0,r.useMemo)((function(){var e;return o?{loading:o,enabled:void 0}:{loading:o,enabled:Boolean(null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.flag)}}),[o,null===l||void 0===l||null===(t=l.currentUser)||void 0===t?void 0:t.flag])}},33417:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(26042),i=n(69396),l=n(10253),o=n(67294),a=n(11163),c=n(93058),s=n(90317),u=n(33400),d=n(86292),h=n(15935);function p(){var e,t,n,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=p.onFork,m=p.onError,v=(0,a.useRouter)(),g=(0,c.Z)().showError,Z=(0,u.Z)(),b=(0,l.Z)((0,s.BnM)({onCompleted:function(e){var t="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(t)if(f&&f(),"/replEnvironment2"!==v.pathname&&"/replEnvironmentMobile"!==v.pathname)v.push({pathname:Z,query:{replUrl:t.url}},{pathname:t.url});else{var n=t.url+(v.query.lite?"?lite=".concat(v.query.lite.toString()):"");window.location.href=n}}}),2),x=b[0],y=b[1],k="UserError"===(null===(e=y.data)||void 0===e?void 0:e.createRepl.__typename)?null===(t=y.data)||void 0===t?void 0:t.createRepl.message:null===(n=y.error)||void 0===n?void 0:n.message;o.useEffect((function(){k&&(g(k),m&&m())}),[k,g,m]);var w=o.useCallback((function(e){var t=e.originId,n=e.replReleaseId,l=e.teamId,o=e.title,a=e.description,c=e.isPrivate,s=e.trackingData,u=e.forkToPersonal;x({variables:{input:{originId:t,replReleaseId:n,teamId:l,title:o,isPrivate:c,description:a,forkToPersonal:u,gitRemoteUrl:""}}}).then((function(e){var t,l,o,a,c,u,p,f="Repl"===(null===(t=e.data)||void 0===t?void 0:t.createRepl.__typename)?e.data.createRepl:null;f&&(0,d.j)(d.U3.REPL_CREATED,(0,i.Z)((0,r.Z)({isSignup:!1,isOnboarding:!1},s),{isForked:!0,isPrivate:f.isPrivate,replId:f.id,isRenamed:!1,language:f.language,isSelfForked:!!(null===(l=f.origin)||void 0===l?void 0:l.isOwner),isTemplateFork:Boolean(n),templateReplId:(null===(o=f.source)||void 0===o||null===(a=o.release)||void 0===a||null===(c=a.repl)||void 0===c?void 0:c.id)||void 0,templateType:(null===(u=f.source)||void 0===u||null===(p=u.release)||void 0===p?void 0:p.repl)?(0,h.lw)(f.source.release.repl):void 0}))}))}),[x]),C=!!(y.loading||y.data&&"Repl"===y.data.createRepl.__typename);return[w,{loading:C}]}},18332:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(10253),i=n(29815),l=n(67294),o=n(24351),a=n(26042),c=n(69396),s=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r.Z)(l.useState(null),2),o=i[0],u=i[1],d=l.useCallback(u,[u]),h=l.useRef(t);l.useEffect((function(){h.current=t}),[t]);var p=(0,r.Z)(l.useState(null),2),f=p[0],m=p[1];return l.useEffect((function(){if(o){var e=function(){var e=o.value,t=o.selectionStart;if(t){var n=1===t||s(e[t-2]||""),r=e.length?e[t-1]:null;m((function(i){if(i&&(t<i.index||0===t))return null;if(!r)return i;if(!i&&!n)return i;var l=h.current.includes(r);return i||l?i?s(r)?null:(0,c.Z)((0,a.Z)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i}))}else m(null)},t=function(){m(null)};return o.addEventListener("focus",e),o.addEventListener("keyup",e),o.addEventListener("blur",t),function(){m(null),o.removeEventListener("focus",e),o.removeEventListener("keyup",e),o.removeEventListener("blur",t)}}}),[o,m]),[f,d]}function d(e){var t=l.useRef(e);l.useEffect((function(){t.current=e}),[e]);var n=(0,r.Z)(l.useState(!1),2),a=n[0],c=n[1],s=(0,r.Z)(l.useState(null),2),d=s[0],h=s[1],p=(0,r.Z)(u.apply(void 0,(0,i.Z)(Object.keys(e))),2),f=p[0],m=p[1],v=l.useRef(f);l.useEffect((function(){v.current=f}),[f]);var g=(0,o.Z)(f,100);return l.useEffect((function(){if(g){var e=g.match,n=g.text,r=t.current[e]?t.current[e]:null;if(r){var i=!1;return c(!0),r(n).then((function(e){i||v.current===g&&(c(!1),h({textTrigger:g,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,g.index),i=n,l=t.slice(g.index+g.text.length);l&&l.startsWith(" ")||(i+=" ");var o=r+i+l;return{cursorIndex:(r+i).length+(l&&l.startsWith(" ")?1:0),fullValue:o}}}))})),function(){i=!0}}h(null)}else h(null)}),[g,h]),[{isLoading:a,suggestions:d},m]}},54854:function(e,t,n){function r(e,t){if(!e)return null;var n=e[t];return n?Array.isArray(n)?null:n:null}n.d(t,{Z:function(){return r}})},70338:function(e,t,n){var r=n(47568),i=n(34051),l=n.n(i),o=n(15794);t.Z=function(){var e=(0,r.Z)(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}r=t.user,e.next=14;break;case 5:if(!((i=n.getState().user)&&i.userInfo.isLoggedIn&&i.userInfo)){e.next=10;break}r=i.userInfo,e.next=14;break;case 10:return e.next=12,(0,o.LK)("/is_authenticated");case 12:(a=e.sent).success&&(r=a.user);case 14:return r&&(t&&(r=JSON.parse(JSON.stringify(r))),n.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:r})),e.abrupt("return",{user:r});case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},6600:function(e,t,n){n.d(t,{Z:function(){return R}});var r=n(47568),i=n(34051),l=n.n(i),o=n(35944),a=n(67294),c=n(60731),s=n(37424),u=n(1144),d=n(93160),h=n(69346),p=n(81255),f=n(33773);function m(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return(0,o.BX)(d.Z,{background:t?"higher":"default",css:[p.l0.borderRadius(8),p.l0.colWithGap(16),p.l0.p(8)],children:[(0,o.BX)(h.Z,{css:[p.l0.colWithGap(8)],children:[(0,o.BX)(h.Z,{onClick:function(){return n(!t)},css:[p.l0.rowWithGap(8),{cursor:"pointer"}],children:[(0,o.tZ)(u.x,{children:"Style your post with Markdown"}),(0,o.tZ)(f.Z,{rotate:t?0:270})]}),t?(0,o.tZ)(u.x,{color:"dimmer",multiline:!0,children:"You can style your post with a limited set of Markdown. Here are some supported content types:"}):null]}),t?(0,o.BX)(o.HY,{children:[(0,o.BX)(h.Z,{css:[p.l0.colWithGap(8)],children:[(0,o.tZ)(u.x,{children:"Bold Text"}),(0,o.tZ)(u.x,{color:"dimmer",children:"**bold**"})]}),(0,o.BX)(h.Z,{css:[p.l0.colWithGap(8)],children:[(0,o.tZ)(u.x,{children:"Italic Text"}),(0,o.tZ)(u.x,{color:"dimmer",children:"__italic__"})]}),(0,o.BX)(h.Z,{css:[p.l0.colWithGap(8)],children:[(0,o.tZ)(u.x,{children:"Links"}),(0,o.tZ)(u.x,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(h.Z,{css:[p.l0.colWithGap(8)],children:[(0,o.tZ)(u.x,{children:"Images"}),(0,o.tZ)(u.x,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(h.Z,{css:[p.l0.colWithGap(8)],children:[(0,o.tZ)(u.x,{children:"Code Blocks"}),(0,o.BX)(u.x,{color:"dimmer",children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(h.Z,{css:[p.l0.colWithGap(8)],children:[(0,o.tZ)(u.x,{children:"Inline Code"}),(0,o.tZ)(u.x,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]})]}):null]})}var v=n(90317),g=n(30992),Z=n(88961),b=n(25475),x=n(86292),y=n(75026),k=(0,c.KD)("form");function w(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function C(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function R(e){var t,n,i=e.repl,a=e.source,u=e.onDone,d=(0,s.H)(),h=d("titleIdInput"),p=d("descriptionIdInput"),f=(0,g.Y)("",w),R=(0,g.Y)("",C),B=(0,b.O)();return(0,o.BX)(k,{onSubmit:function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!f.validate()&&!R.validate()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,B.publish({input:{replId:i.id,title:f.value,body:R.value}});case 5:e.sent.error||((0,x.j)(x.U3.UPDATE_SHARED,{source:a,replType:i.publishedAs===v.O2h.Template?"template_repl":"regular_repl"}),u());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),css:[c.l0.colWithGap(16)],children:[(0,o.tZ)(c.h4,{level:2,variant:"subheadBig",children:"Add an update"}),(0,o.BX)(c.xv,{children:["Explain what has changed about this"," ",i.publishedAs===v.O2h.Template?"Template":"Repl","."]}),(0,o.BX)(c.G7,{css:c.l0.colWithGap(8),children:[(0,o.tZ)("label",{css:c.l0.color.foregroundDimmer,htmlFor:h,children:"Title"}),(0,o.tZ)(c.II,{id:h,onChange:function(e){f.setValue(e.target.value)},disabled:B.loading,placeholder:"Give your post a title"}),f.error&&(0,o.tZ)(c.E_,{icon:(0,o.tZ)(Z.Z,{}),text:null===(t=f.error)||void 0===t?void 0:t.message,colorway:"negative"})]}),(0,o.BX)(c.G7,{css:c.l0.colWithGap(8),children:[(0,o.tZ)("label",{css:c.l0.color.foregroundDimmer,htmlFor:p,children:"Description"}),(0,o.tZ)(c.B,{id:p,onChange:function(e){R.setValue(e.target.value)},css:[c.l0.width("100%"),{minHeight:c.TV.space128,maxHeight:c.TV.space256,resize:"vertical",lineHeight:c.TV.lineHeightDefault}],disabled:B.loading,placeholder:"Write something about this post"}),R.error&&(0,o.tZ)(c.E_,{icon:(0,o.tZ)(Z.Z,{}),text:null===(n=R.error)||void 0===n?void 0:n.message,colorway:"negative"})]}),(0,o.tZ)(m,{}),B.error&&(0,o.tZ)(c.E_,{icon:(0,o.tZ)(Z.Z,{}),colorway:"negative",text:B.error}),(0,o.tZ)(c.zx,{text:B.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(B.loading||f.error||R.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(y.Z,{})})]})}},25475:function(e,t,n){n.d(t,{O:function(){return s}});var r=n(47568),i=n(10253),l=n(34051),o=n.n(l),a=n(90317);function c(e){var t,n,r,i,l,o,a;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(n=t.createReplPost2)||void 0===n?void 0:n.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(l=e.data)||void 0===l||null===(o=l.createReplPost2)||void 0===o?void 0:o.__typename)?e.data.createReplPost2.message:(null===(a=e.data)||void 0===a?void 0:a.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function s(){var e=(0,i.Z)((0,a.KDQ)(),2),t=e[0],n=e[1],l=function(){var e=(0,r.Z)(o().mark((function e(r){var i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.input,!n.loading){e.next=3;break}return e.abrupt("return",{data:null,error:null});case 3:return e.prev=3,e.next=6,t({variables:{input:i}});case 6:return l=e.sent,e.abrupt("return",{data:l.data,error:c(l)});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{data:null,error:"Something went wrong publishing your Repl"});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return{publish:l,data:n.data,loading:n.loading,error:c(n)}}},5804:function(e,t,n){n.d(t,{JL:function(){return k},L8:function(){return Z},M6:function(){return g},QH:function(){return b},nr:function(){return v}});var r=n(14924),i=n(26042),l=n(29815),o=n(35944),a=n(67294),c=n(69346),s=n(81255),u=n(1144),d=n(46197),h=n(44365),p=n(72917),f=n(7243),m=n(40658);function v(e,t){var n,r=(null===(n=t.tags)||void 0===n?void 0:n.length)?t.tags.join(","):null;return{href:{pathname:"/postsFeed",query:{boardSlug:r,q:e}},as:{pathname:r?"/community/".concat(r):"/community/all",query:{q:e}}}}function g(e,t){return t?{href:{pathname:"/postsFeed",query:{boardSlug:e,order:t.order}},as:{pathname:"/community/".concat(e),query:(0,i.Z)({},t.order!==h.eR?{order:t.order.toLowerCase()}:{})}}:{href:{pathname:"/postsFeed",query:{boardSlug:e}},as:"/community/".concat(e)}}function Z(e){return g("all",e)}function b(e,t){var n=t.tags?t.tags.join(","):"all";return{href:{pathname:"/postsFeed",query:{boardSlug:n,order:(0,h.Zb)(e)}},as:{pathname:"/community/".concat(n),query:(0,i.Z)({},e!==h.eR?{order:(0,h.Zb)(e)}:{})}}}var x=(0,c.K)("div"),y=m.M+32;function k(e){var t,n,i=e.tagGroups,h=e.params,v=(0,l.Z)(i.official).concat((0,l.Z)(i.community)).map((function(e){var t,n=Boolean(null===(t=h.tags)||void 0===t?void 0:t.includes(e.id)),r=n?Z(h):g(e.id,h);return(0,o.tZ)(p.t,{tag:e,link:r,isActive:n},e.id)})),b=(0,a.useState)(!1),k=b[0],w=b[1],C=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(C.current){var e=new window.IntersectionObserver((function(e){e.forEach((function(e){window.scrollY<e.boundingClientRect.top-y?w(!1):w(!e.isIntersecting)}))}),{root:null,rootMargin:"".concat(-y,"px 0px 0px 0px"),threshold:1}),t=C.current;return e.observe(t),function(){e.unobserve(t),e.disconnect()}}}),[]),(0,o.BX)(c.Z,{children:[(0,o.tZ)(x,{ref:C}),(0,o.BX)(c.Z,{css:[s.l0.colWithGap(16),k&&(0,r.Z)({},d.A.desktop,[s.l0.position.fixed,s.l0.overflowY("auto"),s.l0.height("calc(100vh - ".concat(m.M,"px)")),s.l0.py(32),{top:m.M}])],children:[(0,o.tZ)(u.x,{color:"dimmer",children:"TOP TAGS"}),(0,o.BX)(c.Z,{children:[(0,o.tZ)(f.Z,{gap:8,inset:16,css:[(t={},(0,r.Z)(t,d.A.desktop,[s.l0.display.none]),(0,r.Z)(t,"marginLeft","calc(-1 * ".concat(s.TV.space16,")")),(0,r.Z)(t,"marginRight","calc(-1 * ".concat(s.TV.space16,")")),t)],children:v}),(0,o.tZ)(c.Z,{css:(n={},(0,r.Z)(n,d.A.mobile,[s.l0.display.none]),(0,r.Z)(n,d.A.desktop,[s.l0.colWithGap(32)]),n),children:(0,o.tZ)(c.Z,{css:[s.l0.colWithGap(8),s.l0.align.start],children:v})})]})]})]})}},4924:function(e,t,n){n.d(t,{Vs:function(){return x},ZP:function(){return k},p0:function(){return y}});var r=n(26042),i=n(69396),l=n(35944),o=(n(67294),n(41664)),a=n.n(o),c=n(70917),s=n(60731),u=n(53427),d=n(69928),h=n(5804),p=n(72917),f=n(88046),m=n(82447),v=n(45273),g=n(94718),Z=(0,s.KD)("a"),b=(0,c.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function x(e){var t=e.tags,n=e.maxVisible,r=void 0===n?3:n,i=e.onTagClick,o=t.slice(0,r),a=t.length-o.length;return(0,l.BX)(s.G7,{css:[s.l0.rowWithGap(4),s.l0.align.center],children:[o.map((function(e){return(0,l.tZ)(p.t,{small:!0,tag:e,link:(0,h.M6)(e.id),onClick:i},e.id)})),a>0?(0,l.BX)(s.xv,{variant:"small",color:"dimmest",children:["+",a]}):null]})}function y(e){var t=e.repl,n=e.showOwner,o=e.maxVisibleTags,c=e.onReplClick,h=e.onUserClick,p=e.onTagClick,y=t.owner;return(0,l.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,l.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.start,s.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(u.ZP,{size:84,iconUrl:t.iconUrl,alt:t.title}),(0,l.BX)(s.G7,{css:[s.l0.flex.growAndShrink(1),s.l0.colWithGap(4)],children:[(0,l.tZ)(a(),(0,i.Z)((0,r.Z)({passHref:!0},(0,f.j3)(t)),{children:(0,l.tZ)(Z,{css:[{color:"inherit"},b],onClick:c,children:(0,l.tZ)(s.xv,{variant:"subheadBig",children:t.title})})})),n&&y?(0,l.tZ)(s.G7,{css:[{maxWidth:"fit-content",zIndex:1}],children:(0,l.tZ)(g.Z,{username:y.username,children:(0,l.tZ)(m.ZP,{user:y,children:(0,l.BX)(Z,{css:[{color:"inherit"},s.l0.rowWithGap(4),s.l0.align.center,s.l0.pr(16)],onClick:h,children:[(0,l.tZ)(v.Z,{src:y.image,username:y.username,size:16,layout:"intrinsic"}),(0,l.tZ)(s.xv,{children:y.username})]})})})}):null,t.description?(0,l.tZ)(s.xv,{color:"dimmer",maxLines:2,css:[s.l0.maxWidth(450)],children:t.description}):null]})]}),(0,l.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.justify.spaceBetween,s.l0.flex.wrap],children:[(0,l.tZ)(d.Z,{css:[s.l0.pb(2)],repl:t}),(0,l.tZ)(s.G7,{css:[s.l0.position.relative,s.l0.pt(2),{zIndex:1}],children:(0,l.tZ)(x,{tags:t.tags,maxVisible:o,onTagClick:p})})]})]})}function k(e){var t=e.repl,n=e.showOwner,r=e.maxVisibleTags,i=e.onReplClick,o=e.onUserClick,a=e.onTagClick,c=e.dataCy;return(0,l.tZ)(s.Tg,{elevated:!0,css:[s.l0.borderRadius(8),s.l0.p(8),s.l0.position.relative,s.gU.filledAndOutlined,s.l0.backgroundColor.backgroundDefault,{border:"1px solid "+s.TV.outlineDimmest}],dataCy:c,children:(0,l.tZ)(y,{repl:t,showOwner:n,maxVisibleTags:r,onReplClick:i,onUserClick:o,onTagClick:a})})}},69928:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(35944),i=(n(67294),n(69346)),l=n(81255),o=n(12530),a=n(51995),c=n(75026),s=n(27843),u=n(34847);function d(e){var t=e.repl;return(0,r.BX)(i.Z,{css:[l.l0.rowWithGap(16),l.l0.align.center],children:[(0,r.tZ)(o.Z,{small:!0,count:t.runCount,tooltip:(0,u.Z)("runs",t.runCount),children:(0,r.tZ)(a.Z,{})}),(0,r.tZ)(o.Z,{small:!0,count:t.commentCount,tooltip:(0,u.Z)("comment",t.commentCount),children:(0,r.tZ)(c.Z,{})}),(0,r.tZ)(o.Z,{small:!0,count:t.likeCount,tooltip:(0,u.Z)("like",t.likeCount),children:(0,r.tZ)(s.Z,{})})]})}},72917:function(e,t,n){n.d(t,{g:function(){return w},t:function(){return x}});var r=n(26042),i=n(69396),l=n(35944),o=(n(67294),n(70917)),a=n(41664),c=n.n(a),s=n(69346),u=n(93160),d=n(81255),h=n(1144),p=n(44044),f=n(67629),m=n(16857),v=(0,o.iv)({border:"1px solid "+d.TV.accentPrimaryDefault,backgroundColor:"transparent"}),g=function(e){var t=e.isActive,n=e.small;return(0,o.iv)([d.l0.p(n?4:8),d.l0.align.center,d.l0.rowWithGap(4),d.l0.fontSize(12),t?v:p.gU.outlined,d.l0.borderRadius(16),{color:"inherit","&:hover":v}])};function Z(e){var t=e.tag,n=e.isActive,r=e.isRemovable,i=e.small,o=i?"small":"text";return(0,l.tZ)(u.Z,{elevated:n,css:[d.l0.borderRadius(16)],children:(0,l.BX)(u.Z,{elevated:n,css:[g({isActive:n,small:i})],children:[(0,l.BX)(s.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.flex.shrink(1)],children:[(0,l.tZ)(h.x,{variant:o,color:"dimmest",children:"#"}),(0,l.tZ)(h.x,{color:"dimmer",variant:o,css:[d.l0.flex.shrink(1)],children:t.id})]}),t.isOfficial&&!i?(0,l.tZ)(m.Z,{}):null,r?(0,l.tZ)(f.Z,{size:i?12:16}):null]})})}var b=(0,s.K)("a");function x(e){var t=e.tag,n=e.link,o=e.isActive,a=e.small,s=e.onClick;return(0,l.tZ)(c(),(0,i.Z)((0,r.Z)({},n),{passHref:!0,css:[d.l0.flex.shrink(1),{backgroundColor:"red"}],children:(0,l.tZ)(b,{css:[{color:"inherit"},d.l0.flex.shrink(1)],onClick:s,children:(0,l.tZ)(Z,{tag:t,isActive:o,small:a,isRemovable:o})})}))}var y=(0,s.K)("button"),k=(0,o.iv)({border:"none",background:"transparent",color:"inherit",font:"inherit",lineHeight:"normal"});function w(e){var t=e.tag,n=e.onClick,r=e.isActive,i=e.small;return(0,l.tZ)(y,{css:[k],onClick:n,children:(0,l.tZ)(Z,{tag:t,isActive:r,small:i,isRemovable:!0})})}},46197:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(57263),i={mobile:"@media (max-width: ".concat(r.j.tabletMin,"px)"),desktop:"@media (min-width: ".concat(r.j.tabletMin+1,"px)")}},44365:function(e,t,n){n.d(t,{Qf:function(){return c},Zb:function(){return a},eR:function(){return l}});var r=n(90317),i=n(54854),l=r.vXE.Hot,o={hot:r.vXE.Hot,new:r.vXE.New,top:r.vXE.Top,votes:r.vXE.Top};function a(e){return e.toLowerCase()}function c(e){var t=(0,i.Z)(e,"after")||void 0,n=(0,i.Z)(e,"q")||void 0,r=(0,i.Z)(e,"boardSlug")||void 0,c=r&&"all"!==r?r.split(","):void 0,s=(0,i.Z)(e,"order")||a(l),u=o[s]||l,d=(0,i.Z)(e,"count"),h=d?parseInt(d,10):void 0;return void 0!==h&&Number.isNaN(h)&&(h=void 0),{tags:c,order:u,count:h,searchQuery:n,after:t}}},12530:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(35944),i=n(67294),l=n(1144),o=n(81255),a=n(69346),c=n(81456);function s(e){var t=e.count,n=e.children,s=e.tooltip,u=e.small,d=(0,c.d)(t);return(0,r.BX)(a.Z,{"aria-label":s,"data-microtip-position":"left",role:"tooltip",css:[o.l0.rowWithGap(4),o.l0.align.center,o.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[i.cloneElement(n,{size:u?12:void 0}),(0,r.tZ)(l.x,{variant:u?"small":void 0,color:"dimmer",children:d})]})}},49483:function(e,t,n){n.d(t,{W:function(){return f},Z:function(){return m}});var r=n(35944),i=n(67294),l=n(53427),o=n(64080),a=n(77365),c=n(60459),s=n(69346),u=n(93160),d=n(49619),h=n(81255),p=n(62722);function f(e){var t=(0,i.useState)(null),n=t[0],r=t[1],l=(0,i.useState)(null),o=l[0],a=l[1],s=(0,c.Z)({onUpload:function(t){var n=t.url;r(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;a(null),r(t)},onError:function(e){r(null),a(e.message)}}),u=(0,i.useCallback)((function(){return a(null)}),[]);return{uploadImage:s.uploadImage,error:o,clearError:u,previewUrl:n}}function m(e){var t=(0,i.useRef)(null),n=e.size||48;return(0,r.BX)(s.Z,{css:[h.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,r.tZ)(u.Z,{className:"surface",elevated:!0,css:[h.l0.borderRadius(8),h.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,r.tZ)(s.Z,{className:"icon",css:[h.l0.coverContainer,h.l0.center,h.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,r.tZ)(a.Z,{}):(0,r.tZ)(o.Z,{})})]}):(0,r.tZ)(s.Z,{css:[h.l0.center,h.l0.width(n),h.l0.height(n),h.l0.borderRadius(8),h.l0.color.foregroundDimmer,{border:"1px dashed "+h.TV.outlineDefault,"&:hover":{color:h.TV.accentPrimaryDefault,borderColor:h.TV.accentPrimaryDefault}}],children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)("input",{css:[[h.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:p.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var l=i?i[0]:null;l&&e.onUpload(l)}}})]})}},84857:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(10253),i=n(35944),l=(n(67294),n(60731)),o=n(90317),a=n(61756),c=n(93058),s=n(86292),u=n(64184),d=(0,l.KD)("form");function h(e){var t=e.repl,n=e.source,h=e.onDone,p=(0,c.Z)(),f=p.showConfirm,m=p.showError,v=(0,r.Z)((0,o.jvS)({variables:{input:{replId:t.id}},onCompleted:function(e){"Repl"===e.unpublishReplFromCommunity.__typename?((0,s.j)(s.U3.REPL_UNPUBLISHED,{source:n,numRuns:t.runCount,numLikes:t.likeCount,numComments:t.commentCount,replType:t.publishedAs===o.O2h.Template?"template_repl":"regular_repl"}),f("Repl removed from the community.")):"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?m(e.unpublishReplFromCommunity.message):m("An unexpected error occurred."),h()},onError:function(){m("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:t.id}),fields:{comments:function(e,t){return t.DELETE},tags:function(e,t){return t.DELETE}}})}}),2),g=v[0],Z=v[1].loading;return(0,i.BX)(l.G7,{css:[l.l0.colWithGap(24)],children:[(0,i.tZ)(l.xv,{multiline:!0,variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(d,{onSubmit:function(e){e.preventDefault(),g()},css:[l.l0.colWithGap(32)],children:[(0,i.tZ)(l.xv,{multiline:!0,children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(l.G7,{css:[l.l0.rowWithGap(8),l.l0.justify.end],children:[(0,i.tZ)(l.G7,{children:(0,i.tZ)(a.zx,{type:"button",text:"Cancel",onClick:function(){return h()}})}),(0,i.tZ)(l.G7,{children:(0,i.tZ)(a.zx,{disabled:Z,colorway:"negative",text:Z?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(u.Z,{})})})]})]})]})}},58086:function(e,t,n){n.d(t,{p:function(){return r}});var r=1e3},519:function(e,t,n){var r=n(35944),i=n(60536),l=n.n(i),o=(n(67294),n(37424)),a=n(94184),c=n.n(a);t.Z=function(e){var t=e.name,n=void 0===t?"toggle":t,i=e.isOn,a=e.onIcon,s=e.offIcon,u=e.onChange,d=(0,o.H)()(n);return(0,r.BX)("label",{htmlFor:d,className:"jsx-c7885c9bb72f3431 "+(c()("toggle-label",{isOn:i})||""),children:[(0,r.tZ)("input",{name:n,checked:i,onChange:u,id:d,type:"checkbox",className:"jsx-c7885c9bb72f3431 toggle-checkbox"}),(0,r.tZ)("span",{className:"jsx-c7885c9bb72f3431 toggle-button",children:i&&a?a:s||null}),(0,r.tZ)(l(),{id:"c7885c9bb72f3431",children:'.toggle-checkbox.jsx-c7885c9bb72f3431{height:0;width:0;visibility:hidden}.toggle-label.jsx-c7885c9bb72f3431{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;width:38px;height:24px;background:var(--background-higher);border:.5px solid var(--outline-dimmest);-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;position:relative;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.toggle-button.jsx-c7885c9bb72f3431{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"";position:absolute;left:1px;width:20px;height:20px;-webkit-border-radius:45px;-moz-border-radius:45px;border-radius:45px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s;background:var(--white);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);color:var(--foreground-dimmer)}.toggle-label.isOn.jsx-c7885c9bb72f3431{background-color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.toggle-checkbox.jsx-c7885c9bb72f3431:checked+.toggle-button.jsx-c7885c9bb72f3431{-webkit-transform:translateX(-webkit-calc(100% - 6px));-moz-transform:translateX(-moz-calc(100% - 6px));-ms-transform:translateX(calc(100% - 6px));-o-transform:translateX(calc(100% - 6px));transform:translateX(-webkit-calc(100% - 6px));transform:translateX(-moz-calc(100% - 6px));transform:translateX(calc(100% - 6px));color:var(--accent-primary-default)}.toggle-label.jsx-c7885c9bb72f3431:active .toggle-button.jsx-c7885c9bb72f3431{-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}'})]})}}}]);
//# sourceMappingURL=817-c71dfce0fe9771fc.js.map